<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.34.2">
    <meta name="project" content="funx v0.1.4">


    <title>Funx.Monad.Maybe Usage Rules — funx v0.1.4</title>
    <link rel="stylesheet" href="dist/html-elixir-F2VRIOKR.css" />


      <link rel="canonical" href="https://hexdocs.pm/funx/monad-maybe-usage-rules.html" />

    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-A5E68E17.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-YIPIRHGU.js"></script>

  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
funx
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.1.4
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of funx</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/JKWA/funx/blob/v0.1.4/lib/monad/maybe/usage-rules.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>


    <span><code class="inline">Funx.Monad.Maybe</code> Usage Rules</span>
  </h1>

<h2 id="llm-functional-programming-foundation" class="section-heading">
  <a href="#llm-functional-programming-foundation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">LLM Functional Programming Foundation</span>
</h2>
<p><strong>Key Concepts for LLMs:</strong></p><p><strong>CRITICAL Elixir Implementation</strong>: All monadic operations are under <a href="Funx.Monad.html"><code class="inline">Funx.Monad</code></a> protocol</p><ul><li><strong>NO separate Functor/Applicative protocols</strong> - Elixir protocols cannot be extended after definition</li><li>Always use <code class="inline">Monad.map/2</code>, <code class="inline">Monad.bind/2</code>, <code class="inline">Monad.ap/2</code> or import <a href="Funx.Monad.html"><code class="inline">Funx.Monad</code></a></li><li>Different from Haskell's separate Functor, Applicative, Monad typeclasses</li></ul><p><strong>Kleisli Function</strong>: A function <code class="inline">a -&gt; Maybe b</code> (takes unwrapped value, returns wrapped value)</p><ul><li><strong>Primary use</strong>: <code class="inline">traverse/2</code> and <code class="inline">concat_map/2</code> for list operations</li><li><strong>Individual use</strong>: <code class="inline">Monad.bind/2</code> for single Maybe values</li><li>Example: <code class="inline">find_user :: UserId -&gt; Maybe User</code></li></ul><p><strong>Key List Operation Patterns:</strong></p><ul><li><code class="inline">concat([Maybe a])</code> → <code class="inline">[a]</code> (extract all Just values, ignore Nothing)</li><li><code class="inline">concat_map([a], kleisli_fn)</code> → <code class="inline">[b]</code> (apply Kleisli, collect Just results)</li><li><code class="inline">traverse([a], kleisli_fn)</code> → <code class="inline">Maybe [b]</code> (apply Kleisli, all succeed or Nothing)</li><li><code class="inline">sequence([Maybe a])</code> → <code class="inline">Maybe [a]</code> (like traverse with identity function)</li></ul><p><strong>Functor</strong>: Something you can <code class="inline">map</code> over while preserving structure</p><ul><li><code class="inline">Monad.map/2 :: (a -&gt; b) -&gt; Maybe a -&gt; Maybe b</code></li><li>Transforms the present value, leaves Nothing unchanged</li></ul><p><strong>Applicative</strong>: Allows applying functions inside a context</p><ul><li><code class="inline">Monad.ap/2 :: Maybe (a -&gt; b) -&gt; Maybe a -&gt; Maybe b</code>  </li><li>Can combine multiple Maybe values</li></ul><p><strong>Monad</strong>: Supports <code class="inline">bind</code> for chaining dependent computations</p><ul><li><code class="inline">Monad.bind/2 :: Maybe a -&gt; (a -&gt; Maybe b) -&gt; Maybe b</code></li><li>Flattens nested Maybe values automatically</li></ul><p><strong>Sequence (Category Theory)</strong>: Swap the order of two type constructors</p><ul><li><code class="inline">[Maybe a]</code> → <code class="inline">Maybe [a]</code> (list of Maybe becomes Maybe of list)</li><li>Not about sequential processing - about type transformation</li></ul><p><strong>Presence vs Absence</strong>:</p><ul><li>Presence: Value exists and is usable</li><li>Absence: Value is missing, incomplete, or unavailable</li></ul><h2 id="llm-decision-guide-when-to-use-maybe" class="section-heading">
  <a href="#llm-decision-guide-when-to-use-maybe" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">LLM Decision Guide: When to Use Maybe</span>
</h2>
<p><strong>✅ Use Maybe when:</strong></p><ul><li>Simple presence/absence (user profile, config value)</li><li>No error context needed (&quot;not found&quot; is sufficient)</li><li>Chaining operations that should skip on absence</li><li>Optional fields or nullable database columns</li><li>User says: &quot;optional&quot;, &quot;might not exist&quot;, &quot;could be missing&quot;</li></ul><p><strong>❌ Use Either when:</strong></p><ul><li>Need specific error context (&quot;user not found&quot;, &quot;validation failed&quot;)</li><li>Multiple error types or recovery strategies</li><li>Business validation with detailed failure messages</li><li>User says: &quot;validate&quot;, &quot;check requirements&quot;, &quot;ensure valid&quot;</li></ul><p><strong>⚡ Maybe Strategy Decision:</strong></p><ul><li><strong>Simple presence check</strong>: Use <code class="inline">just/1</code> and <code class="inline">nothing/0</code> constructors</li><li><strong>Chain operations</strong>: Use <code class="inline">bind/2</code> for individual Maybe sequencing</li><li><strong>Transform present values</strong>: Use <code class="inline">map/2</code> with regular functions</li><li><strong>Combine multiple Maybe values</strong>: Use <code class="inline">ap/2</code> for applicative pattern</li><li><strong>Apply Kleisli to lists</strong>: Use <code class="inline">traverse/2</code> (all must succeed) or <code class="inline">concat_map/2</code> (collect successes)</li><li><strong>Convert lists</strong>: Use <code class="inline">sequence/1</code> to flip <code class="inline">[Maybe a]</code> to <code class="inline">Maybe [a]</code></li><li><strong>Pattern match results</strong>: Use <code class="inline">case</code> with <code class="inline">%Just{value: value}</code> and <code class="inline">%Nothing{}</code></li></ul><p><strong>⚙️ Function Choice Guide (Mathematical Purpose):</strong></p><ul><li><strong>Chain dependent lookups</strong>: <code class="inline">bind/2</code> with functions returning Maybe</li><li><strong>Transform present values</strong>: <code class="inline">map/2</code> with functions returning plain values  </li><li><strong>Apply functions to multiple Maybe values</strong>: <code class="inline">ap/2</code> for combining contexts</li><li><strong>Handle missing values</strong>: Pattern match or use <code class="inline">from_nil/1</code>, <code class="inline">to_nil/1</code></li><li><strong>Work with lists</strong>: <code class="inline">sequence/1</code>, <code class="inline">traverse/2</code>, <code class="inline">traverse_a/2</code></li></ul><h2 id="llm-context-clues" class="section-heading">
  <a href="#llm-context-clues" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">LLM Context Clues</span>
</h2>
<p><strong>User language → Maybe patterns:</strong></p><ul><li>&quot;optional user profile&quot; → <code class="inline">find_user/1</code> returning Maybe User</li><li>&quot;might not have email&quot; → Maybe String for optional email field</li><li>&quot;chain lookups&quot; → <code class="inline">bind/2</code> with multiple Maybe-returning functions</li><li>&quot;transform if present&quot; → <code class="inline">map/2</code> to modify just the value</li><li>&quot;combine optional values&quot; → <code class="inline">ap/2</code> to apply function across Maybe values</li><li>&quot;list of optional items&quot; → <code class="inline">sequence/1</code> to collect all present values</li></ul><h2 id="quick-reference" class="section-heading">
  <a href="#quick-reference" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Quick Reference</span>
</h2>
<ul><li>Use <code class="inline">just(value)</code> for present values, <code class="inline">nothing()</code> for absence</li><li>Chain operations with <code class="inline">bind/2</code> - they skip automatically on <code class="inline">nothing</code></li><li>Transform values with <code class="inline">map/2</code> - leaves <code class="inline">nothing</code> unchanged</li><li>Combine multiple Maybe values with <code class="inline">ap/2</code></li><li>Use <code class="inline">bind/2</code> with identity to flatten nested Maybes: <code class="inline">bind(nested_maybe, fn x -&gt; x end)</code></li><li>Convert <code class="inline">[Maybe a]</code> to <code class="inline">Maybe [a]</code> with <code class="inline">sequence/1</code></li><li><strong>Prefer <code class="inline">fold_l/3</code> over pattern matching</strong> for functional case analysis</li><li><strong>Note</strong>: Maybe values are structs <code class="inline">%Just{value: ...}</code> or <code class="inline">%Nothing{}</code>, not tagged tuples</li><li>Import <a href="Funx.Monad.html"><code class="inline">Funx.Monad</code></a> for <code class="inline">map</code>, <code class="inline">bind</code>, <code class="inline">ap</code> and <a href="Funx.Foldable.html"><code class="inline">Funx.Foldable</code></a> for <code class="inline">fold_l</code></li></ul><h2 id="overview" class="section-heading">
  <a href="#overview" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Overview</span>
</h2>
<p><a href="Funx.Monad.Maybe.html"><code class="inline">Funx.Monad.Maybe</code></a> handles presence and absence without explicit null checks.</p><p>Use Maybe for:</p><ul><li>Optional fields and nullable database columns</li><li>Operations that might not return a value</li><li>Chaining computations that should skip on missing data</li><li>Simple presence/absence (no detailed error context needed)</li></ul><p><strong>Key insight</strong>: Maybe represents &quot;optional&quot; - either there's a value (<code class="inline">just</code>) or there isn't (<code class="inline">nothing</code>). All operations respect this, automatically skipping work when there's nothing to work with.</p><h2 id="constructors" class="section-heading">
  <a href="#constructors" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Constructors</span>
</h2>
<h3 id="just-1-wrap-a-present-value" class="section-heading">
  <a href="#just-1-wrap-a-present-value" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">just/1</code> - Wrap a Present Value</span>
</h3>
<p>Creates a Maybe containing a value:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0744041004-1">(</span><span class="mi">42</span><span class="p" data-group-id="0744041004-1">)</span><span class="w">        </span><span class="c1"># Present: contains 42</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0744041004-2">(</span><span class="s">&quot;hello&quot;</span><span class="p" data-group-id="0744041004-2">)</span><span class="w">   </span><span class="c1"># Present: contains &quot;hello&quot;</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0744041004-3">(</span><span class="p" data-group-id="0744041004-4">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="0744041004-4">]</span><span class="p" data-group-id="0744041004-3">)</span><span class="w"> </span><span class="c1"># Present: contains [1, 2, 3]</span></code></pre><h3 id="nothing-0-represent-absence" class="section-heading">
  <a href="#nothing-0-represent-absence" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">nothing/0</code> - Represent Absence</span>
</h3>
<p>Creates a Maybe representing absence:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="3022928103-1">(</span><span class="p" data-group-id="3022928103-1">)</span><span class="w">       </span><span class="c1"># Absent: contains no value</span></code></pre><h3 id="pure-1-alias-for-just-1" class="section-heading">
  <a href="#pure-1-alias-for-just-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">pure/1</code> - Alias for <code class="inline">just/1</code></span>
</h3>
<p>Alternative constructor for present values:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">pure</span><span class="p" data-group-id="5912584833-1">(</span><span class="mi">42</span><span class="p" data-group-id="5912584833-1">)</span><span class="w">    </span><span class="c1"># Same as Maybe.just(42)</span></code></pre><h2 id="core-operations" class="section-heading">
  <a href="#core-operations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Core Operations</span>
</h2>
<h3 id="map-2-transform-present-values" class="section-heading">
  <a href="#map-2-transform-present-values" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">map/2</code> - Transform Present Values</span>
</h3>
<p>Applies a function to the value inside a <code class="inline">just</code>, leaves <code class="inline">nothing</code> unchanged:</p><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Monad</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Foldable</span><span class="w">

</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="7884025285-1">(</span><span class="mi">5</span><span class="p" data-group-id="7884025285-1">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="7884025285-2">(</span><span class="k" data-group-id="7884025285-3">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k" data-group-id="7884025285-3">end</span><span class="p" data-group-id="7884025285-2">)</span><span class="w">    </span><span class="c1"># just(10)</span><span class="w">

</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="7884025285-4">(</span><span class="p" data-group-id="7884025285-4">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="7884025285-5">(</span><span class="k" data-group-id="7884025285-6">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k" data-group-id="7884025285-6">end</span><span class="p" data-group-id="7884025285-5">)</span><span class="w">    </span><span class="c1"># nothing() - function never runs</span></code></pre><p><strong>Use <code class="inline">map</code> when:</strong></p><ul><li>You want to transform the value if it exists</li><li>The transformation function returns a plain value (not wrapped in Maybe)</li><li>You want to preserve the Maybe structure</li></ul><h3 id="bind-2-chain-dependent-operations" class="section-heading">
  <a href="#bind-2-chain-dependent-operations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">bind/2</code> - Chain Dependent Operations</span>
</h3>
<p>Chains operations that return Maybe values, automatically flattening nested Maybe:</p><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Monad</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Foldable</span><span class="w">

</span><span class="c1"># These functions return Maybe values</span><span class="w">
</span><span class="n">find_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="0543236159-1">fn</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0543236159-2">(</span><span class="p" data-group-id="0543236159-3">%{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="p" data-group-id="0543236159-3">}</span><span class="p" data-group-id="0543236159-2">)</span><span class="p">,</span><span class="w"> </span><span class="ss">else</span><span class="p">:</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="0543236159-4">(</span><span class="p" data-group-id="0543236159-4">)</span><span class="w"> </span><span class="k" data-group-id="0543236159-1">end</span><span class="w">
</span><span class="n">get_email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="0543236159-5">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0543236159-6">(</span><span class="s">&quot;user@example.com&quot;</span><span class="p" data-group-id="0543236159-6">)</span><span class="p">,</span><span class="w"> </span><span class="ss">else</span><span class="p">:</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="0543236159-7">(</span><span class="p" data-group-id="0543236159-7">)</span><span class="w"> </span><span class="k" data-group-id="0543236159-5">end</span><span class="w">

</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0543236159-8">(</span><span class="mi">1</span><span class="p" data-group-id="0543236159-8">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="0543236159-9">(</span><span class="n">find_user</span><span class="p" data-group-id="0543236159-9">)</span><span class="w">    </span><span class="c1"># just(%{id: 1})</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="0543236159-10">(</span><span class="n">get_email</span><span class="p" data-group-id="0543236159-10">)</span><span class="w">    </span><span class="c1"># just(&quot;user@example.com&quot;)</span><span class="w">

</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0543236159-11">(</span><span class="o">-</span><span class="mi">1</span><span class="p" data-group-id="0543236159-11">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="0543236159-12">(</span><span class="n">find_user</span><span class="p" data-group-id="0543236159-12">)</span><span class="w">    </span><span class="c1"># nothing() - chain stops here</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="0543236159-13">(</span><span class="n">get_email</span><span class="p" data-group-id="0543236159-13">)</span><span class="w">    </span><span class="c1"># nothing() - this never runs</span></code></pre><p><strong>Use <code class="inline">bind</code> when:</strong></p><ul><li>You're chaining operations that each return Maybe</li><li>Each step depends on the result of the previous step</li><li>You want automatic short-circuiting on <code class="inline">nothing</code></li></ul><p><strong>Common bind pattern:</strong></p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">process_user_id</span><span class="p" data-group-id="4812645208-1">(</span><span class="n">user_id</span><span class="p" data-group-id="4812645208-1">)</span><span class="w"> </span><span class="k" data-group-id="4812645208-2">do</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="4812645208-3">(</span><span class="n">user_id</span><span class="p" data-group-id="4812645208-3">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="4812645208-4">(</span><span class="o">&amp;</span><span class="n">find_user</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="4812645208-4">)</span><span class="w">         </span><span class="c1"># UserId -&gt; Maybe User</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="4812645208-5">(</span><span class="o">&amp;</span><span class="n">get_user_profile</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="4812645208-5">)</span><span class="w">  </span><span class="c1"># User -&gt; Maybe Profile  </span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="4812645208-6">(</span><span class="o">&amp;</span><span class="n">format_name</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="4812645208-6">)</span><span class="w">       </span><span class="c1"># Profile -&gt; Maybe String</span><span class="w">
</span><span class="k" data-group-id="4812645208-2">end</span></code></pre><h3 id="ap-2-apply-functions-across-maybe-values" class="section-heading">
  <a href="#ap-2-apply-functions-across-maybe-values" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">ap/2</code> - Apply Functions Across Maybe Values</span>
</h3>
<p>Applies a function in a Maybe to a value in a Maybe:</p><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Monad</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Foldable</span><span class="w">

</span><span class="c1"># Apply a wrapped function to wrapped values</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0175788454-1">(</span><span class="k" data-group-id="0175788454-2">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k" data-group-id="0175788454-2">end</span><span class="p" data-group-id="0175788454-1">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="0175788454-3">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0175788454-4">(</span><span class="mi">5</span><span class="p" data-group-id="0175788454-4">)</span><span class="p" data-group-id="0175788454-3">)</span><span class="w">          </span><span class="c1"># just(15)</span><span class="w">

</span><span class="c1"># Combine multiple Maybe values</span><span class="w">
</span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="0175788454-5">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k" data-group-id="0175788454-6">fn</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="k" data-group-id="0175788454-6">end</span><span class="w"> </span><span class="k" data-group-id="0175788454-5">end</span><span class="w">

</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0175788454-7">(</span><span class="n">add</span><span class="p" data-group-id="0175788454-7">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="0175788454-8">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0175788454-9">(</span><span class="mi">3</span><span class="p" data-group-id="0175788454-9">)</span><span class="p" data-group-id="0175788454-8">)</span><span class="w">          </span><span class="c1"># just(fn y -&gt; 3 + y end)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="0175788454-10">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0175788454-11">(</span><span class="mi">4</span><span class="p" data-group-id="0175788454-11">)</span><span class="p" data-group-id="0175788454-10">)</span><span class="w">          </span><span class="c1"># just(7)</span><span class="w">

</span><span class="c1"># If any value is nothing, result is nothing</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0175788454-12">(</span><span class="n">add</span><span class="p" data-group-id="0175788454-12">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="0175788454-13">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="0175788454-14">(</span><span class="p" data-group-id="0175788454-14">)</span><span class="p" data-group-id="0175788454-13">)</span><span class="w">        </span><span class="c1"># nothing()</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="0175788454-15">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="0175788454-16">(</span><span class="mi">4</span><span class="p" data-group-id="0175788454-16">)</span><span class="p" data-group-id="0175788454-15">)</span><span class="w">          </span><span class="c1"># nothing()</span></code></pre><p><strong>Use <code class="inline">ap</code> when:</strong></p><ul><li>You want to apply a function to multiple Maybe values</li><li>You need all values to be present for the operation to succeed</li><li>You're implementing applicative patterns</li></ul><h2 id="folding-maybe-values" class="section-heading">
  <a href="#folding-maybe-values" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Folding Maybe Values</span>
</h2>
<p><strong>Core Concept</strong>: Both <code class="inline">Just</code> and <code class="inline">Nothing</code> implement the <a href="Funx.Foldable.html"><code class="inline">Funx.Foldable</code></a> protocol, providing <code class="inline">fold_l/3</code> for catamorphism (breaking down data structures).</p><h3 id="fold_l-3-functional-case-analysis" class="section-heading">
  <a href="#fold_l-3-functional-case-analysis" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">fold_l/3</code> - Functional Case Analysis</span>
</h3>
<p>The fundamental operation for handling Maybe values without pattern matching:</p><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Foldable</span><span class="w">

</span><span class="c1"># fold_l(maybe_value, just_function, nothing_function)</span><span class="w">
</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fold_l</span><span class="p" data-group-id="4700288965-1">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w"> 
  </span><span class="k" data-group-id="4700288965-2">fn</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Found: </span><span class="si" data-group-id="4700288965-3">#{</span><span class="n">value</span><span class="si" data-group-id="4700288965-3">}</span><span class="s">&quot;</span><span class="w"> </span><span class="k" data-group-id="4700288965-2">end</span><span class="p">,</span><span class="w">  </span><span class="c1"># Just case</span><span class="w">
  </span><span class="k" data-group-id="4700288965-4">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Not found&quot;</span><span class="w"> </span><span class="k" data-group-id="4700288965-4">end</span><span class="w">               </span><span class="c1"># Nothing case</span><span class="w">
</span><span class="p" data-group-id="4700288965-1">)</span><span class="w">

</span><span class="c1"># Examples</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="4700288965-5">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="4700288965-6">(</span><span class="mi">42</span><span class="p" data-group-id="4700288965-6">)</span><span class="p">,</span><span class="w"> 
  </span><span class="k" data-group-id="4700288965-7">fn</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k" data-group-id="4700288965-7">end</span><span class="p">,</span><span class="w">    </span><span class="c1"># Runs this: 84</span><span class="w">
  </span><span class="k" data-group-id="4700288965-8">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="4700288965-8">end</span><span class="w">                   </span><span class="c1"># Never runs</span><span class="w">
</span><span class="p" data-group-id="4700288965-5">)</span><span class="w">

</span><span class="n">fold_l</span><span class="p" data-group-id="4700288965-9">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="4700288965-10">(</span><span class="p" data-group-id="4700288965-10">)</span><span class="p">,</span><span class="w"> 
  </span><span class="k" data-group-id="4700288965-11">fn</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k" data-group-id="4700288965-11">end</span><span class="p">,</span><span class="w">    </span><span class="c1"># Never runs</span><span class="w">
  </span><span class="k" data-group-id="4700288965-12">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;No value&quot;</span><span class="w"> </span><span class="k" data-group-id="4700288965-12">end</span><span class="w">          </span><span class="c1"># Runs this: &quot;No value&quot;</span><span class="w">
</span><span class="p" data-group-id="4700288965-9">)</span></code></pre><p><strong>Use <code class="inline">fold_l</code> when:</strong></p><ul><li>You need to convert Maybe to a different type</li><li>You want functional case analysis without pattern matching</li><li>You're implementing higher-level combinators</li><li>You need to handle both present and absent cases</li></ul><h3 id="folding-vs-pattern-matching" class="section-heading">
  <a href="#folding-vs-pattern-matching" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Folding vs Pattern Matching</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Imperative pattern matching</span><span class="w">
</span><span class="k">case</span><span class="w"> </span><span class="n">maybe_value</span><span class="w"> </span><span class="k" data-group-id="2222742275-1">do</span><span class="w">
  </span><span class="p" data-group-id="2222742275-2">%</span><span class="nc" data-group-id="2222742275-2">Just</span><span class="p" data-group-id="2222742275-2">{</span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="2222742275-2">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Found: </span><span class="si" data-group-id="2222742275-3">#{</span><span class="n">value</span><span class="si" data-group-id="2222742275-3">}</span><span class="s">&quot;</span><span class="w">
  </span><span class="p" data-group-id="2222742275-4">%</span><span class="nc" data-group-id="2222742275-4">Nothing</span><span class="p" data-group-id="2222742275-4">{</span><span class="p" data-group-id="2222742275-4">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Not found&quot;</span><span class="w">
</span><span class="k" data-group-id="2222742275-1">end</span><span class="w">

</span><span class="c1"># ✅ Functional folding</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="2222742275-5">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="2222742275-6">fn</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Found: </span><span class="si" data-group-id="2222742275-7">#{</span><span class="n">value</span><span class="si" data-group-id="2222742275-7">}</span><span class="s">&quot;</span><span class="w"> </span><span class="k" data-group-id="2222742275-6">end</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="2222742275-8">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Not found&quot;</span><span class="w"> </span><span class="k" data-group-id="2222742275-8">end</span><span class="w">
</span><span class="p" data-group-id="2222742275-5">)</span></code></pre><h3 id="advanced-folding-patterns" class="section-heading">
  <a href="#advanced-folding-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Advanced Folding Patterns</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Extract value with default</span><span class="w">
</span><span class="n">get_or_default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="7111674110-1">fn</span><span class="w"> </span><span class="n">maybe</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="7111674110-2">(</span><span class="n">maybe</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="7111674110-3">fn</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k" data-group-id="7111674110-3">end</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="7111674110-4">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="k" data-group-id="7111674110-4">end</span><span class="w">
  </span><span class="p" data-group-id="7111674110-2">)</span><span class="w">
</span><span class="k" data-group-id="7111674110-1">end</span><span class="w">

</span><span class="c1"># Convert Maybe to result tuple</span><span class="w">
</span><span class="n">to_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="7111674110-5">fn</span><span class="w"> </span><span class="n">maybe</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="7111674110-6">(</span><span class="n">maybe</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="7111674110-7">fn</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="7111674110-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="7111674110-8">}</span><span class="w"> </span><span class="k" data-group-id="7111674110-7">end</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="7111674110-9">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="7111674110-10">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_found</span><span class="p" data-group-id="7111674110-10">}</span><span class="w"> </span><span class="k" data-group-id="7111674110-9">end</span><span class="w">
  </span><span class="p" data-group-id="7111674110-6">)</span><span class="w">
</span><span class="k" data-group-id="7111674110-5">end</span><span class="w">

</span><span class="c1"># Conditional processing</span><span class="w">
</span><span class="n">process_if_present</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="7111674110-11">fn</span><span class="w"> </span><span class="n">maybe</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="7111674110-12">(</span><span class="n">maybe</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="7111674110-13">fn</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">expensive_operation</span><span class="p" data-group-id="7111674110-14">(</span><span class="n">value</span><span class="p" data-group-id="7111674110-14">)</span><span class="w"> </span><span class="k" data-group-id="7111674110-13">end</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="7111674110-15">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="ss">:skipped</span><span class="w"> </span><span class="k" data-group-id="7111674110-15">end</span><span class="w">
  </span><span class="p" data-group-id="7111674110-12">)</span><span class="w">
</span><span class="k" data-group-id="7111674110-11">end</span></code></pre><h3 id="flattening-nested-maybe-values-with-bind" class="section-heading">
  <a href="#flattening-nested-maybe-values-with-bind" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Flattening Nested Maybe Values with <code class="inline">bind</code></span>
</h3>
<p>Since there's no <code class="inline">join/1</code> function, use <code class="inline">bind/2</code> with the identity function to flatten nested Maybe values:</p><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Monad</span><span class="w">

</span><span class="c1"># Flatten nested Maybe using bind</span><span class="w">
</span><span class="n">nested</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="9369806038-1">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="9369806038-2">(</span><span class="mi">42</span><span class="p" data-group-id="9369806038-2">)</span><span class="p" data-group-id="9369806038-1">)</span><span class="w">
</span><span class="n">bind</span><span class="p" data-group-id="9369806038-3">(</span><span class="n">nested</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="9369806038-4">fn</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="k" data-group-id="9369806038-4">end</span><span class="p" data-group-id="9369806038-3">)</span><span class="w">    </span><span class="c1"># just(42)</span><span class="w">

</span><span class="c1"># Nothing in outer - stays nothing</span><span class="w">
</span><span class="n">outer_nothing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="9369806038-5">(</span><span class="p" data-group-id="9369806038-5">)</span><span class="w">
</span><span class="n">bind</span><span class="p" data-group-id="9369806038-6">(</span><span class="n">outer_nothing</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="9369806038-7">fn</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="k" data-group-id="9369806038-7">end</span><span class="p" data-group-id="9369806038-6">)</span><span class="w">    </span><span class="c1"># nothing()</span><span class="w">

</span><span class="c1"># Nothing in inner - becomes nothing  </span><span class="w">
</span><span class="n">inner_nothing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="9369806038-8">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="9369806038-9">(</span><span class="p" data-group-id="9369806038-9">)</span><span class="p" data-group-id="9369806038-8">)</span><span class="w">
</span><span class="n">bind</span><span class="p" data-group-id="9369806038-10">(</span><span class="n">inner_nothing</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="9369806038-11">fn</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="k" data-group-id="9369806038-11">end</span><span class="p" data-group-id="9369806038-10">)</span><span class="w">    </span><span class="c1"># nothing()</span></code></pre><p><strong>Use this pattern when:</strong></p><ul><li>You have nested Maybe values that need flattening</li><li>You're implementing monadic operations manually</li><li>You're working with higher-order Maybe computations</li></ul><h2 id="functional-error-handling" class="section-heading">
  <a href="#functional-error-handling" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Functional Error Handling</span>
</h2>
<p><strong>Important</strong>: Maybe values are structs <code class="inline">%Just{value: ...}</code> or <code class="inline">%Nothing{}</code>, not tagged tuples. Pattern matching must respect this shape.</p><p>Maybe values are best handled with functional folding:</p><pre><code class="makeup elixir" translate="no"><span class="n">fold_l</span><span class="p" data-group-id="2367436848-1">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="2367436848-2">fn</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Found: </span><span class="si" data-group-id="2367436848-3">#{</span><span class="n">value</span><span class="si" data-group-id="2367436848-3">}</span><span class="s">&quot;</span><span class="w"> </span><span class="k" data-group-id="2367436848-2">end</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="2367436848-4">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Not found&quot;</span><span class="w"> </span><span class="k" data-group-id="2367436848-4">end</span><span class="w">
</span><span class="p" data-group-id="2367436848-1">)</span></code></pre><p><strong>Common patterns:</strong></p><pre><code class="makeup elixir" translate="no"><span class="c1"># Extract with default</span><span class="w">
</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fold_l</span><span class="p" data-group-id="6064527188-1">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="6064527188-2">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="k" data-group-id="6064527188-2">end</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="6064527188-3">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Guest&quot;</span><span class="w"> </span><span class="k" data-group-id="6064527188-3">end</span><span class="w">
</span><span class="p" data-group-id="6064527188-1">)</span><span class="w">

</span><span class="c1"># Process only if present</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="6064527188-4">(</span><span class="n">maybe_config</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="6064527188-5">fn</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">apply_config</span><span class="p" data-group-id="6064527188-6">(</span><span class="n">config</span><span class="p" data-group-id="6064527188-6">)</span><span class="w"> </span><span class="k" data-group-id="6064527188-5">end</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="6064527188-7">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="ss">:ok</span><span class="w"> </span><span class="k" data-group-id="6064527188-7">end</span><span class="w">
</span><span class="p" data-group-id="6064527188-4">)</span></code></pre><h2 id="refinement" class="section-heading">
  <a href="#refinement" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Refinement</span>
</h2>
<h3 id="just-1-and-nothing-1-type-checks" class="section-heading">
  <a href="#just-1-and-nothing-1-type-checks" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">just?/1</code> and <code class="inline">nothing?/1</code> - Type Checks</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">just?</span><span class="p" data-group-id="8572924694-1">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="8572924694-2">(</span><span class="mi">42</span><span class="p" data-group-id="8572924694-2">)</span><span class="p" data-group-id="8572924694-1">)</span><span class="w">      </span><span class="c1"># true</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just?</span><span class="p" data-group-id="8572924694-3">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="8572924694-4">(</span><span class="p" data-group-id="8572924694-4">)</span><span class="p" data-group-id="8572924694-3">)</span><span class="w">     </span><span class="c1"># false</span><span class="w">

</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing?</span><span class="p" data-group-id="8572924694-5">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="8572924694-6">(</span><span class="p" data-group-id="8572924694-6">)</span><span class="p" data-group-id="8572924694-5">)</span><span class="w">  </span><span class="c1"># true</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing?</span><span class="p" data-group-id="8572924694-7">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="8572924694-8">(</span><span class="mi">42</span><span class="p" data-group-id="8572924694-8">)</span><span class="p" data-group-id="8572924694-7">)</span><span class="w">   </span><span class="c1"># false</span></code></pre><h2 id="fallback-and-extraction" class="section-heading">
  <a href="#fallback-and-extraction" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fallback and Extraction</span>
</h2>
<h3 id="get_or_else-2-extract-value-with-default" class="section-heading">
  <a href="#get_or_else-2-extract-value-with-default" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">get_or_else/2</code> - Extract Value with Default</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5254857954-1">(</span><span class="mi">42</span><span class="p" data-group-id="5254857954-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">get_or_else</span><span class="p" data-group-id="5254857954-2">(</span><span class="mi">0</span><span class="p" data-group-id="5254857954-2">)</span><span class="w">        </span><span class="c1"># 42</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="5254857954-3">(</span><span class="p" data-group-id="5254857954-3">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">get_or_else</span><span class="p" data-group-id="5254857954-4">(</span><span class="mi">0</span><span class="p" data-group-id="5254857954-4">)</span><span class="w">       </span><span class="c1"># 0</span></code></pre><h3 id="or_else-2-fallback-on-nothing" class="section-heading">
  <a href="#or_else-2-fallback-on-nothing" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">or_else/2</code> - Fallback on Nothing</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5078313522-1">(</span><span class="mi">42</span><span class="p" data-group-id="5078313522-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">or_else</span><span class="p" data-group-id="5078313522-2">(</span><span class="k" data-group-id="5078313522-3">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5078313522-4">(</span><span class="mi">0</span><span class="p" data-group-id="5078313522-4">)</span><span class="w"> </span><span class="k" data-group-id="5078313522-3">end</span><span class="p" data-group-id="5078313522-2">)</span><span class="w">     </span><span class="c1"># just(42)</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="5078313522-5">(</span><span class="p" data-group-id="5078313522-5">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">or_else</span><span class="p" data-group-id="5078313522-6">(</span><span class="k" data-group-id="5078313522-7">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5078313522-8">(</span><span class="mi">0</span><span class="p" data-group-id="5078313522-8">)</span><span class="w"> </span><span class="k" data-group-id="5078313522-7">end</span><span class="p" data-group-id="5078313522-6">)</span><span class="w">    </span><span class="c1"># just(0)</span></code></pre><h3 id="combining-two-maybe-values-with-ap-2" class="section-heading">
  <a href="#combining-two-maybe-values-with-ap-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Combining Two Maybe Values with <code class="inline">ap/2</code></span>
</h3>
<p>Use the applicative pattern with <code class="inline">ap/2</code> to combine two Maybe values with a binary function:</p><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Monad</span><span class="w">

</span><span class="c1"># Combine two Maybe values using ap</span><span class="w">
</span><span class="n">add_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-1">(</span><span class="o">&amp;</span><span class="o">+</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="5512458299-1">)</span><span class="w">
</span><span class="n">ap</span><span class="p" data-group-id="5512458299-2">(</span><span class="n">add_fn</span><span class="p">,</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-3">(</span><span class="mi">3</span><span class="p" data-group-id="5512458299-3">)</span><span class="p" data-group-id="5512458299-2">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="5512458299-4">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-5">(</span><span class="mi">4</span><span class="p" data-group-id="5512458299-5">)</span><span class="p" data-group-id="5512458299-4">)</span><span class="w">     </span><span class="c1"># just(7)</span><span class="w">
</span><span class="n">ap</span><span class="p" data-group-id="5512458299-6">(</span><span class="n">add_fn</span><span class="p">,</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-7">(</span><span class="mi">3</span><span class="p" data-group-id="5512458299-7">)</span><span class="p" data-group-id="5512458299-6">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="5512458299-8">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="5512458299-9">(</span><span class="p" data-group-id="5512458299-9">)</span><span class="p" data-group-id="5512458299-8">)</span><span class="w">   </span><span class="c1"># nothing()</span><span class="w">
</span><span class="n">ap</span><span class="p" data-group-id="5512458299-10">(</span><span class="n">add_fn</span><span class="p">,</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="5512458299-11">(</span><span class="p" data-group-id="5512458299-11">)</span><span class="p" data-group-id="5512458299-10">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="5512458299-12">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-13">(</span><span class="mi">4</span><span class="p" data-group-id="5512458299-13">)</span><span class="p" data-group-id="5512458299-12">)</span><span class="w">   </span><span class="c1"># nothing()</span><span class="w">

</span><span class="c1"># More concise with helper function</span><span class="w">
</span><span class="n">combine_maybe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="5512458299-14">fn</span><span class="w"> </span><span class="n">ma</span><span class="p">,</span><span class="w"> </span><span class="n">mb</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-15">(</span><span class="n">f</span><span class="p" data-group-id="5512458299-15">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="5512458299-16">(</span><span class="n">ma</span><span class="p" data-group-id="5512458299-16">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="5512458299-17">(</span><span class="n">mb</span><span class="p" data-group-id="5512458299-17">)</span><span class="w">
</span><span class="k" data-group-id="5512458299-14">end</span><span class="w">

</span><span class="n">combine_maybe</span><span class="o">.</span><span class="p" data-group-id="5512458299-18">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-19">(</span><span class="mi">3</span><span class="p" data-group-id="5512458299-19">)</span><span class="p">,</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-20">(</span><span class="mi">4</span><span class="p" data-group-id="5512458299-20">)</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="o">+</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="5512458299-18">)</span><span class="w">         </span><span class="c1"># just(7)</span><span class="w">
</span><span class="n">combine_maybe</span><span class="o">.</span><span class="p" data-group-id="5512458299-21">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-22">(</span><span class="mi">3</span><span class="p" data-group-id="5512458299-22">)</span><span class="p">,</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="5512458299-23">(</span><span class="p" data-group-id="5512458299-23">)</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="o">+</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="5512458299-21">)</span><span class="w">       </span><span class="c1"># nothing()</span><span class="w">

</span><span class="c1"># String concatenation</span><span class="w">
</span><span class="n">combine_maybe</span><span class="o">.</span><span class="p" data-group-id="5512458299-24">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-25">(</span><span class="s">&quot;Hello, &quot;</span><span class="p" data-group-id="5512458299-25">)</span><span class="p">,</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-26">(</span><span class="s">&quot;World!&quot;</span><span class="p" data-group-id="5512458299-26">)</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="o">&lt;&gt;</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="5512458299-24">)</span><span class="w">  </span><span class="c1"># just(&quot;Hello, World!&quot;)</span><span class="w">

</span><span class="c1"># Working with structs</span><span class="w">
</span><span class="n">combine_maybe</span><span class="o">.</span><span class="p" data-group-id="5512458299-27">(</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-28">(</span><span class="p" data-group-id="5512458299-29">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="5512458299-29">}</span><span class="p" data-group-id="5512458299-28">)</span><span class="p">,</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5512458299-30">(</span><span class="p" data-group-id="5512458299-31">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p" data-group-id="5512458299-31">}</span><span class="p" data-group-id="5512458299-30">)</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="5512458299-32">fn</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">age_info</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">merge</span><span class="p" data-group-id="5512458299-33">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">age_info</span><span class="p" data-group-id="5512458299-33">)</span><span class="w"> </span><span class="k" data-group-id="5512458299-32">end</span><span class="w">
</span><span class="p" data-group-id="5512458299-27">)</span><span class="w">  </span><span class="c1"># just(%{name: &quot;Alice&quot;, age: 30})</span></code></pre><p><strong>Use this pattern when:</strong></p><ul><li>You need to combine exactly two Maybe values with a binary function</li><li>You want applicative-style combination that fails fast on first Nothing</li><li>You're implementing patterns similar to liftA2 from other functional languages</li></ul><h2 id="common-patterns" class="section-heading">
  <a href="#common-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Common Patterns</span>
</h2>
<h3 id="safe-navigation" class="section-heading">
  <a href="#safe-navigation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Safe Navigation</span>
</h3>
<p>Instead of nested null checks:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Imperative style with null checks</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">get_user_city</span><span class="p" data-group-id="8673932925-1">(</span><span class="n">user_id</span><span class="p" data-group-id="8673932925-1">)</span><span class="w"> </span><span class="k" data-group-id="8673932925-2">do</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="8673932925-3">(</span><span class="n">find_user</span><span class="p" data-group-id="8673932925-4">(</span><span class="n">user_id</span><span class="p" data-group-id="8673932925-4">)</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="8673932925-5">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="n">fold_l</span><span class="p" data-group-id="8673932925-6">(</span><span class="n">get_address</span><span class="p" data-group-id="8673932925-7">(</span><span class="n">user</span><span class="p" data-group-id="8673932925-7">)</span><span class="p">,</span><span class="w">
        </span><span class="k" data-group-id="8673932925-8">fn</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">address</span><span class="o">.</span><span class="n">city</span><span class="w"> </span><span class="k" data-group-id="8673932925-8">end</span><span class="p">,</span><span class="w">
        </span><span class="k" data-group-id="8673932925-9">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">nil</span><span class="w"> </span><span class="k" data-group-id="8673932925-9">end</span><span class="w">
      </span><span class="p" data-group-id="8673932925-6">)</span><span class="w">
    </span><span class="k" data-group-id="8673932925-5">end</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="8673932925-10">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">nil</span><span class="w"> </span><span class="k" data-group-id="8673932925-10">end</span><span class="w">
  </span><span class="p" data-group-id="8673932925-3">)</span><span class="w">
</span><span class="k" data-group-id="8673932925-2">end</span><span class="w">

</span><span class="c1"># Functional style with Maybe</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">get_user_city</span><span class="p" data-group-id="8673932925-11">(</span><span class="n">user_id</span><span class="p" data-group-id="8673932925-11">)</span><span class="w"> </span><span class="k" data-group-id="8673932925-12">do</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="8673932925-13">(</span><span class="n">user_id</span><span class="p" data-group-id="8673932925-13">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="8673932925-14">(</span><span class="o">&amp;</span><span class="n">find_user_maybe</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="8673932925-14">)</span><span class="w">     </span><span class="c1"># Returns Maybe User</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="8673932925-15">(</span><span class="o">&amp;</span><span class="n">get_address_maybe</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="8673932925-15">)</span><span class="w">   </span><span class="c1"># Returns Maybe Address  </span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="8673932925-16">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">city</span><span class="p" data-group-id="8673932925-16">)</span><span class="w">               </span><span class="c1"># Extract city if present</span><span class="w">
</span><span class="k" data-group-id="8673932925-12">end</span></code></pre><h3 id="optional-field-processing" class="section-heading">
  <a href="#optional-field-processing" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Optional Field Processing</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Process optional email field</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">send_welcome_email</span><span class="p" data-group-id="8076262668-1">(</span><span class="n">user</span><span class="p" data-group-id="8076262668-1">)</span><span class="w"> </span><span class="k" data-group-id="8076262668-2">do</span><span class="w">
  </span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">from_nil</span><span class="p" data-group-id="8076262668-3">(</span><span class="p" data-group-id="8076262668-3">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="8076262668-4">(</span><span class="o">&amp;</span><span class="n">normalize_email</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="8076262668-4">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="8076262668-5">(</span><span class="o">&amp;</span><span class="n">validate_email</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="8076262668-5">)</span><span class="w">      </span><span class="c1"># Returns Maybe valid_email</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="8076262668-6">(</span><span class="o">&amp;</span><span class="n">send_email</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="8076262668-6">)</span><span class="w">           </span><span class="c1"># Send if valid</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">lift_maybe</span><span class="p" data-group-id="8076262668-7">(</span><span class="s">&quot;No valid email&quot;</span><span class="p" data-group-id="8076262668-7">)</span><span class="w">
</span><span class="k" data-group-id="8076262668-2">end</span></code></pre><h3 id="collecting-optional-values" class="section-heading">
  <a href="#collecting-optional-values" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Collecting Optional Values</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Gather optional settings</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">load_user_preferences</span><span class="p" data-group-id="6372665772-1">(</span><span class="n">user_id</span><span class="p" data-group-id="6372665772-1">)</span><span class="w"> </span><span class="k" data-group-id="6372665772-2">do</span><span class="w">
  </span><span class="n">preferences</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6372665772-3">[</span><span class="w">
    </span><span class="n">get_theme_preference</span><span class="p" data-group-id="6372665772-4">(</span><span class="n">user_id</span><span class="p" data-group-id="6372665772-4">)</span><span class="p">,</span><span class="w">      </span><span class="c1"># Maybe String</span><span class="w">
    </span><span class="n">get_language_preference</span><span class="p" data-group-id="6372665772-5">(</span><span class="n">user_id</span><span class="p" data-group-id="6372665772-5">)</span><span class="p">,</span><span class="w">   </span><span class="c1"># Maybe String  </span><span class="w">
    </span><span class="n">get_timezone_preference</span><span class="p" data-group-id="6372665772-6">(</span><span class="n">user_id</span><span class="p" data-group-id="6372665772-6">)</span><span class="w">    </span><span class="c1"># Maybe String</span><span class="w">
  </span><span class="p" data-group-id="6372665772-3">]</span><span class="w">
  
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">sequence</span><span class="p" data-group-id="6372665772-7">(</span><span class="n">preferences</span><span class="p" data-group-id="6372665772-7">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="6372665772-8">(</span><span class="k" data-group-id="6372665772-9">fn</span><span class="w"> </span><span class="p" data-group-id="6372665772-10">[</span><span class="n">theme</span><span class="p">,</span><span class="w"> </span><span class="n">lang</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="p" data-group-id="6372665772-10">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> 
    </span><span class="p" data-group-id="6372665772-11">%{</span><span class="ss">theme</span><span class="p">:</span><span class="w"> </span><span class="n">theme</span><span class="p">,</span><span class="w"> </span><span class="ss">language</span><span class="p">:</span><span class="w"> </span><span class="n">lang</span><span class="p">,</span><span class="w"> </span><span class="ss">timezone</span><span class="p">:</span><span class="w"> </span><span class="n">tz</span><span class="p" data-group-id="6372665772-11">}</span><span class="w">
  </span><span class="k" data-group-id="6372665772-9">end</span><span class="p" data-group-id="6372665772-8">)</span><span class="w">
</span><span class="k" data-group-id="6372665772-2">end</span></code></pre><h2 id="integration-with-other-modules" class="section-heading">
  <a href="#integration-with-other-modules" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Integration with Other Modules</span>
</h2>
<h3 id="with-funx-utils" class="section-heading">
  <a href="#with-funx-utils" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">With Funx.Utils</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Curry functions for Maybe operations</span><span class="w">
</span><span class="n">find_by_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Utils</span><span class="o">.</span><span class="n">curry</span><span class="p" data-group-id="1443354379-1">(</span><span class="o">&amp;</span><span class="n">find_user</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="1443354379-1">)</span><span class="w">
</span><span class="n">user_finder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">find_by_id</span><span class="o">.</span><span class="p" data-group-id="1443354379-2">(</span><span class="mi">42</span><span class="p" data-group-id="1443354379-2">)</span><span class="w">

</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="1443354379-3">(</span><span class="n">database</span><span class="p" data-group-id="1443354379-3">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="1443354379-4">(</span><span class="n">user_finder</span><span class="p" data-group-id="1443354379-4">)</span><span class="w">

</span><span class="c1"># Compose Maybe-returning functions</span><span class="w">
</span><span class="n">compose_maybe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Utils</span><span class="o">.</span><span class="n">compose</span><span class="p" data-group-id="1443354379-5">(</span><span class="p" data-group-id="1443354379-6">[</span><span class="w">
  </span><span class="o">&amp;</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">from_nil</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="o">&amp;</span><span class="n">get_user_profile</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">  </span><span class="c1"># Returns Maybe</span><span class="w">
  </span><span class="o">&amp;</span><span class="n">format_display_name</span><span class="o">/</span><span class="mi">1</span><span class="w">
</span><span class="p" data-group-id="1443354379-6">]</span><span class="p" data-group-id="1443354379-5">)</span></code></pre><h3 id="with-predicate-logic" class="section-heading">
  <a href="#with-predicate-logic" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">With Predicate Logic</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Convert predicates to Maybe values</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">predicate_to_maybe</span><span class="p" data-group-id="1679626595-1">(</span><span class="n">predicate</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="1679626595-1">)</span><span class="w"> </span><span class="k" data-group-id="1679626595-2">do</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="n">predicate</span><span class="o">.</span><span class="p" data-group-id="1679626595-3">(</span><span class="n">value</span><span class="p" data-group-id="1679626595-3">)</span><span class="w"> </span><span class="k" data-group-id="1679626595-4">do</span><span class="w">
    </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="1679626595-5">(</span><span class="n">value</span><span class="p" data-group-id="1679626595-5">)</span><span class="w">
  </span><span class="k" data-group-id="1679626595-4">else</span><span class="w">
    </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="1679626595-6">(</span><span class="p" data-group-id="1679626595-6">)</span><span class="w">
  </span><span class="k" data-group-id="1679626595-4">end</span><span class="w">
</span><span class="k" data-group-id="1679626595-2">end</span><span class="w">

</span><span class="c1"># Use with validation</span><span class="w">
</span><span class="n">is_adult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="1679626595-7">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="n">age</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="k" data-group-id="1679626595-7">end</span><span class="w">

</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="1679626595-8">(</span><span class="n">user</span><span class="p" data-group-id="1679626595-8">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="1679626595-9">(</span><span class="k" data-group-id="1679626595-10">fn</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">predicate_to_maybe</span><span class="p" data-group-id="1679626595-11">(</span><span class="n">is_adult</span><span class="p">,</span><span class="w"> </span><span class="n">u</span><span class="p" data-group-id="1679626595-11">)</span><span class="w"> </span><span class="k" data-group-id="1679626595-10">end</span><span class="p" data-group-id="1679626595-9">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="1679626595-12">(</span><span class="o">&amp;</span><span class="n">process_adult_user</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="1679626595-12">)</span></code></pre><h2 id="conversions-between-types" class="section-heading">
  <a href="#conversions-between-types" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Conversions Between Types</span>
</h2>
<h3 id="conversion-to-either" class="section-heading">
  <a href="#conversion-to-either" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Conversion to Either</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Convert Maybe to Either with error context using the built-in function</span><span class="w">
</span><span class="nc">Either</span><span class="o">.</span><span class="n">lift_maybe</span><span class="p" data-group-id="6048869515-1">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Error message&quot;</span><span class="p" data-group-id="6048869515-1">)</span><span class="w">

</span><span class="c1"># Usage in validation pipeline</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6048869515-2">(</span><span class="n">user_input</span><span class="p" data-group-id="6048869515-2">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="6048869515-3">(</span><span class="o">&amp;</span><span class="n">parse_user_id</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="6048869515-3">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">maybe_to_either</span><span class="p" data-group-id="6048869515-4">(</span><span class="s">&quot;Invalid user ID&quot;</span><span class="p" data-group-id="6048869515-4">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">bind</span><span class="p" data-group-id="6048869515-5">(</span><span class="o">&amp;</span><span class="n">detailed_validation</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="6048869515-5">)</span></code></pre><h2 id="list-operations" class="section-heading">
  <a href="#list-operations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">List Operations</span>
</h2>
<h3 id="concat-1-extract-all-just-values" class="section-heading">
  <a href="#concat-1-extract-all-just-values" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">concat/1</code> - Extract All Just Values</span>
</h3>
<p>Removes all Nothing values and unwraps Just values from a list:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">concat</span><span class="p" data-group-id="5034585079-1">(</span><span class="p" data-group-id="5034585079-2">[</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5034585079-3">(</span><span class="mi">1</span><span class="p" data-group-id="5034585079-3">)</span><span class="p">,</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="5034585079-4">(</span><span class="p" data-group-id="5034585079-4">)</span><span class="p">,</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5034585079-5">(</span><span class="mi">3</span><span class="p" data-group-id="5034585079-5">)</span><span class="p">,</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="5034585079-6">(</span><span class="p" data-group-id="5034585079-6">)</span><span class="w">
</span><span class="p" data-group-id="5034585079-2">]</span><span class="p" data-group-id="5034585079-1">)</span><span class="w">                              </span><span class="c1"># [1, 3]</span></code></pre><h3 id="concat_map-2-apply-function-and-collect-just-results" class="section-heading">
  <a href="#concat_map-2-apply-function-and-collect-just-results" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">concat_map/2</code> - Apply Function and Collect Just Results</span>
</h3>
<h3 id="traverse-2-apply-kleisli-to-list-all-must-succeed" class="section-heading">
  <a href="#traverse-2-apply-kleisli-to-list-all-must-succeed" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">traverse/2</code> - Apply Kleisli to List (All Must Succeed)</span>
</h3>
<p>Applies a Kleisli function to each element, requiring all operations to succeed:</p><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Monad</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Foldable</span><span class="w">

</span><span class="c1"># Kleisli function: String -&gt; Maybe Integer</span><span class="w">
</span><span class="n">parse_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="8825662147-1">fn</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="nc">Integer</span><span class="o">.</span><span class="n">parse</span><span class="p" data-group-id="8825662147-2">(</span><span class="n">str</span><span class="p" data-group-id="8825662147-2">)</span><span class="w"> </span><span class="k" data-group-id="8825662147-3">do</span><span class="w">
    </span><span class="p" data-group-id="8825662147-4">{</span><span class="n">num</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p" data-group-id="8825662147-4">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="8825662147-5">(</span><span class="n">num</span><span class="p" data-group-id="8825662147-5">)</span><span class="w">
    </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="8825662147-6">(</span><span class="p" data-group-id="8825662147-6">)</span><span class="w">
  </span><span class="k" data-group-id="8825662147-3">end</span><span class="w">
</span><span class="k" data-group-id="8825662147-1">end</span><span class="w">

</span><span class="c1"># All succeed - get Maybe list</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">traverse</span><span class="p" data-group-id="8825662147-7">(</span><span class="p" data-group-id="8825662147-8">[</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p" data-group-id="8825662147-8">]</span><span class="p">,</span><span class="w"> </span><span class="n">parse_number</span><span class="p" data-group-id="8825662147-7">)</span><span class="w">  </span><span class="c1"># just([1, 2, 3])</span><span class="w">

</span><span class="c1"># Any fail - get Nothing</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">traverse</span><span class="p" data-group-id="8825662147-9">(</span><span class="p" data-group-id="8825662147-10">[</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;invalid&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p" data-group-id="8825662147-10">]</span><span class="p">,</span><span class="w"> </span><span class="n">parse_number</span><span class="p" data-group-id="8825662147-9">)</span><span class="w">  </span><span class="c1"># nothing()</span></code></pre><p><strong>Use <code class="inline">traverse</code> when:</strong></p><ul><li>All operations must succeed for meaningful result</li><li>You need fail-fast behavior on lists</li><li>Converting <code class="inline">[a]</code> to <code class="inline">Maybe [b]</code> with validation</li></ul><h3 id="concat_map-2-apply-kleisli-to-list-collect-successes" class="section-heading">
  <a href="#concat_map-2-apply-kleisli-to-list-collect-successes" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">concat_map/2</code> - Apply Kleisli to List (Collect Successes)</span>
</h3>
<p>Applies a Kleisli function to each element, collecting only successful results:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Same Kleisli function as above</span><span class="w">
</span><span class="n">parse_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="3554350798-1">fn</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="nc">Integer</span><span class="o">.</span><span class="n">parse</span><span class="p" data-group-id="3554350798-2">(</span><span class="n">str</span><span class="p" data-group-id="3554350798-2">)</span><span class="w"> </span><span class="k" data-group-id="3554350798-3">do</span><span class="w">
    </span><span class="p" data-group-id="3554350798-4">{</span><span class="n">num</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p" data-group-id="3554350798-4">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="3554350798-5">(</span><span class="n">num</span><span class="p" data-group-id="3554350798-5">)</span><span class="w">
    </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="3554350798-6">(</span><span class="p" data-group-id="3554350798-6">)</span><span class="w">
  </span><span class="k" data-group-id="3554350798-3">end</span><span class="w">
</span><span class="k" data-group-id="3554350798-1">end</span><span class="w">

</span><span class="c1"># Collect only successes - get plain list</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">concat_map</span><span class="p" data-group-id="3554350798-7">(</span><span class="p" data-group-id="3554350798-8">[</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;invalid&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bad&quot;</span><span class="p" data-group-id="3554350798-8">]</span><span class="p">,</span><span class="w"> </span><span class="n">parse_number</span><span class="p" data-group-id="3554350798-7">)</span><span class="w">  </span><span class="c1"># [1, 3]</span><span class="w">

</span><span class="c1"># All succeed - get all results</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">concat_map</span><span class="p" data-group-id="3554350798-9">(</span><span class="p" data-group-id="3554350798-10">[</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p" data-group-id="3554350798-10">]</span><span class="p">,</span><span class="w"> </span><span class="n">parse_number</span><span class="p" data-group-id="3554350798-9">)</span><span class="w">  </span><span class="c1"># [1, 2, 3]</span><span class="w">

</span><span class="c1"># All fail - get empty list</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">concat_map</span><span class="p" data-group-id="3554350798-11">(</span><span class="p" data-group-id="3554350798-12">[</span><span class="s">&quot;bad&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;invalid&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;error&quot;</span><span class="p" data-group-id="3554350798-12">]</span><span class="p">,</span><span class="w"> </span><span class="n">parse_number</span><span class="p" data-group-id="3554350798-11">)</span><span class="w">  </span><span class="c1"># []</span></code></pre><p><strong>Use <code class="inline">concat_map</code> when:</strong></p><ul><li>Partial success is acceptable</li><li>You want to collect all valid results</li><li>You need resilient processing that continues on failure</li></ul><h3 id="sequence-1-convert-list-of-maybe-to-maybe-list" class="section-heading">
  <a href="#sequence-1-convert-list-of-maybe-to-maybe-list" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">sequence/1</code> - Convert List of Maybe to Maybe List</span>
</h3>
<p>Converts <code class="inline">[Maybe a]</code> to <code class="inline">Maybe [a]</code> - equivalent to <code class="inline">traverse</code> with identity function:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># All present - success</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">sequence</span><span class="p" data-group-id="9545843355-1">(</span><span class="p" data-group-id="9545843355-2">[</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="9545843355-3">(</span><span class="mi">1</span><span class="p" data-group-id="9545843355-3">)</span><span class="p">,</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="9545843355-4">(</span><span class="mi">2</span><span class="p" data-group-id="9545843355-4">)</span><span class="p">,</span><span class="w"> 
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="9545843355-5">(</span><span class="mi">3</span><span class="p" data-group-id="9545843355-5">)</span><span class="w">
</span><span class="p" data-group-id="9545843355-2">]</span><span class="p" data-group-id="9545843355-1">)</span><span class="w">                            </span><span class="c1"># just([1, 2, 3])</span><span class="w">

</span><span class="c1"># Any absent - failure  </span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">sequence</span><span class="p" data-group-id="9545843355-6">(</span><span class="p" data-group-id="9545843355-7">[</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="9545843355-8">(</span><span class="mi">1</span><span class="p" data-group-id="9545843355-8">)</span><span class="p">,</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="9545843355-9">(</span><span class="p" data-group-id="9545843355-9">)</span><span class="p">,</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="9545843355-10">(</span><span class="mi">3</span><span class="p" data-group-id="9545843355-10">)</span><span class="w">  
</span><span class="p" data-group-id="9545843355-7">]</span><span class="p" data-group-id="9545843355-6">)</span><span class="w">                            </span><span class="c1"># nothing()</span><span class="w">

</span><span class="c1"># Relationship to traverse  </span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">sequence</span><span class="p" data-group-id="9545843355-11">(</span><span class="n">maybe_list</span><span class="p" data-group-id="9545843355-11">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">traverse</span><span class="p" data-group-id="9545843355-12">(</span><span class="n">maybe_list</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="9545843355-13">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k" data-group-id="9545843355-13">end</span><span class="p" data-group-id="9545843355-12">)</span></code></pre><p><strong>Use <code class="inline">sequence</code> when:</strong></p><ul><li>You have a list of Maybe values from previous computations</li><li>You want all values to be present, or nothing at all</li><li>You're collecting results from multiple optional operations</li></ul><h3 id="list-operations-comparison" class="section-heading">
  <a href="#list-operations-comparison" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">List Operations Comparison</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="n">user_ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9156477695-1">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">999</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="9156477695-1">]</span><span class="w">  </span><span class="c1"># 999 is invalid ID</span><span class="w">

</span><span class="c1"># traverse: All must succeed or nothing</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">traverse</span><span class="p" data-group-id="9156477695-2">(</span><span class="n">user_ids</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">find_user</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="9156477695-2">)</span><span class="w">
</span><span class="c1"># nothing() - because user 999 doesn&#39;t exist</span><span class="w">

</span><span class="c1"># concat_map: Collect successes, ignore failures  </span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">concat_map</span><span class="p" data-group-id="9156477695-3">(</span><span class="n">user_ids</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">find_user</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="9156477695-3">)</span><span class="w">
</span><span class="c1"># [user1, user2, user4] - got the valid users</span><span class="w">

</span><span class="c1"># sequence: All existing values must be present</span><span class="w">
</span><span class="n">existing_maybes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9156477695-4">[</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="9156477695-5">(</span><span class="n">user1</span><span class="p" data-group-id="9156477695-5">)</span><span class="p">,</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="9156477695-6">(</span><span class="p" data-group-id="9156477695-6">)</span><span class="p">,</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="9156477695-7">(</span><span class="n">user3</span><span class="p" data-group-id="9156477695-7">)</span><span class="p" data-group-id="9156477695-4">]</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">sequence</span><span class="p" data-group-id="9156477695-8">(</span><span class="n">existing_maybes</span><span class="p" data-group-id="9156477695-8">)</span><span class="w">  </span><span class="c1"># nothing() - because one is Nothing</span></code></pre><h2 id="lifting" class="section-heading">
  <a href="#lifting" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Lifting</span>
</h2>
<h3 id="lift_predicate-2-convert-value-based-on-predicate" class="section-heading">
  <a href="#lift_predicate-2-convert-value-based-on-predicate" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">lift_predicate/2</code> - Convert Value Based on Predicate</span>
</h3>
<p>Converts a value to Just if it meets a predicate, otherwise Nothing:</p><pre><code class="makeup elixir" translate="no"><span class="n">validate_positive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">lift_predicate</span><span class="p" data-group-id="1620321597-1">(</span><span class="o">&amp;</span><span class="p" data-group-id="1620321597-2">(</span><span class="ni">&amp;1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="1620321597-2">)</span><span class="p" data-group-id="1620321597-1">)</span><span class="w">

</span><span class="n">validate_positive</span><span class="o">.</span><span class="p" data-group-id="1620321597-3">(</span><span class="mi">5</span><span class="p" data-group-id="1620321597-3">)</span><span class="w">   </span><span class="c1"># just(5)</span><span class="w">
</span><span class="n">validate_positive</span><span class="o">.</span><span class="p" data-group-id="1620321597-4">(</span><span class="o">-</span><span class="mi">1</span><span class="p" data-group-id="1620321597-4">)</span><span class="w">  </span><span class="c1"># nothing()</span></code></pre><h3 id="lift_either-1-convert-either-to-maybe" class="section-heading">
  <a href="#lift_either-1-convert-either-to-maybe" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">lift_either/1</code> - Convert Either to Maybe</span>
</h3>
<p>Converts an Either to Maybe, discarding Left error information:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">lift_either</span><span class="p" data-group-id="0897923235-1">(</span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="p" data-group-id="0897923235-2">(</span><span class="mi">42</span><span class="p" data-group-id="0897923235-2">)</span><span class="p" data-group-id="0897923235-1">)</span><span class="w">    </span><span class="c1"># just(42)</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">lift_either</span><span class="p" data-group-id="0897923235-3">(</span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="0897923235-4">(</span><span class="s">&quot;error&quot;</span><span class="p" data-group-id="0897923235-4">)</span><span class="p" data-group-id="0897923235-3">)</span><span class="w"> </span><span class="c1"># nothing()</span></code></pre><h3 id="lift_identity-1-convert-identity-to-maybe" class="section-heading">
  <a href="#lift_identity-1-convert-identity-to-maybe" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">lift_identity/1</code> - Convert Identity to Maybe</span>
</h3>
<p>Converts an Identity monad to Maybe:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">lift_identity</span><span class="p" data-group-id="5082077945-1">(</span><span class="nc">Identity</span><span class="o">.</span><span class="n">pure</span><span class="p" data-group-id="5082077945-2">(</span><span class="mi">42</span><span class="p" data-group-id="5082077945-2">)</span><span class="p" data-group-id="5082077945-1">)</span><span class="w">  </span><span class="c1"># just(42)</span></code></pre><h3 id="lift_eq-1-and-lift_ord-1-lift-comparison-functions" class="section-heading">
  <a href="#lift_eq-1-and-lift_ord-1-lift-comparison-functions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">lift_eq/1</code> and <code class="inline">lift_ord/1</code> - Lift Comparison Functions</span>
</h3>
<p>Lifts comparison functions for use in Maybe context:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Lift equality for Maybe values</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">lift_eq</span><span class="p" data-group-id="0311060070-1">(</span><span class="o">&amp;</span><span class="o">==</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="0311060070-1">)</span><span class="w">

</span><span class="c1"># Lift ordering for Maybe values  </span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">lift_ord</span><span class="p" data-group-id="0311060070-2">(</span><span class="o">&amp;</span><span class="n">compare</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="0311060070-2">)</span></code></pre><h2 id="elixir-interoperability" class="section-heading">
  <a href="#elixir-interoperability" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Elixir Interoperability</span>
</h2>
<h3 id="from_nil-1-convert-nil-to-maybe" class="section-heading">
  <a href="#from_nil-1-convert-nil-to-maybe" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">from_nil/1</code> - Convert Nil to Maybe</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">from_nil</span><span class="p" data-group-id="0072699658-1">(</span><span class="mi">42</span><span class="p" data-group-id="0072699658-1">)</span><span class="w">      </span><span class="c1"># just(42)</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">from_nil</span><span class="p" data-group-id="0072699658-2">(</span><span class="no">nil</span><span class="p" data-group-id="0072699658-2">)</span><span class="w">     </span><span class="c1"># nothing()</span></code></pre><h3 id="to_nil-1-convert-maybe-to-nil" class="section-heading">
  <a href="#to_nil-1-convert-maybe-to-nil" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">to_nil/1</code> - Convert Maybe to Nil</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">to_nil</span><span class="p" data-group-id="4839297012-1">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="4839297012-2">(</span><span class="mi">42</span><span class="p" data-group-id="4839297012-2">)</span><span class="p" data-group-id="4839297012-1">)</span><span class="w">    </span><span class="c1"># 42</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">to_nil</span><span class="p" data-group-id="4839297012-3">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="4839297012-4">(</span><span class="p" data-group-id="4839297012-4">)</span><span class="p" data-group-id="4839297012-3">)</span><span class="w">   </span><span class="c1"># nil</span></code></pre><h3 id="from_result-1-convert-result-tuple-to-maybe" class="section-heading">
  <a href="#from_result-1-convert-result-tuple-to-maybe" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">from_result/1</code> - Convert Result Tuple to Maybe</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">from_result</span><span class="p" data-group-id="7826752221-1">(</span><span class="p" data-group-id="7826752221-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">42</span><span class="p" data-group-id="7826752221-2">}</span><span class="p" data-group-id="7826752221-1">)</span><span class="w">        </span><span class="c1"># just(42)</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">from_result</span><span class="p" data-group-id="7826752221-3">(</span><span class="p" data-group-id="7826752221-4">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fail&quot;</span><span class="p" data-group-id="7826752221-4">}</span><span class="p" data-group-id="7826752221-3">)</span><span class="w"> </span><span class="c1"># nothing()</span></code></pre><h3 id="to_result-1-convert-maybe-to-result-tuple" class="section-heading">
  <a href="#to_result-1-convert-maybe-to-result-tuple" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">to_result/1</code> - Convert Maybe to Result Tuple</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">to_result</span><span class="p" data-group-id="8206665853-1">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="8206665853-2">(</span><span class="mi">42</span><span class="p" data-group-id="8206665853-2">)</span><span class="p" data-group-id="8206665853-1">)</span><span class="w">    </span><span class="c1"># {:ok, 42}</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">to_result</span><span class="p" data-group-id="8206665853-3">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="8206665853-4">(</span><span class="p" data-group-id="8206665853-4">)</span><span class="p" data-group-id="8206665853-3">)</span><span class="w">   </span><span class="c1"># {:error, nil}</span></code></pre><h3 id="from_try-1-safe-function-execution" class="section-heading">
  <a href="#from_try-1-safe-function-execution" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">from_try/1</code> - Safe Function Execution</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Run function safely, returning Nothing on exception</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">from_try</span><span class="p" data-group-id="1300445643-1">(</span><span class="k" data-group-id="1300445643-2">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">42</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="1300445643-2">end</span><span class="p" data-group-id="1300445643-1">)</span><span class="w">  </span><span class="c1"># nothing()</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">from_try</span><span class="p" data-group-id="1300445643-3">(</span><span class="k" data-group-id="1300445643-4">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">42</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k" data-group-id="1300445643-4">end</span><span class="p" data-group-id="1300445643-3">)</span><span class="w">  </span><span class="c1"># just(21.0)</span></code></pre><h3 id="to_try-2-unwrap-or-raise-with-custom-error" class="section-heading">
  <a href="#to_try-2-unwrap-or-raise-with-custom-error" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">to_try!/2</code> - Unwrap or Raise with Custom Error</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="nc">Maybe</span><span class="o">.</span><span class="n">to_try!</span><span class="p" data-group-id="6251491331-1">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6251491331-2">(</span><span class="mi">42</span><span class="p" data-group-id="6251491331-2">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;No value&quot;</span><span class="p" data-group-id="6251491331-1">)</span><span class="w">     </span><span class="c1"># 42</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">to_try!</span><span class="p" data-group-id="6251491331-3">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="6251491331-4">(</span><span class="p" data-group-id="6251491331-4">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;No value&quot;</span><span class="p" data-group-id="6251491331-3">)</span><span class="w">   </span><span class="c1"># raises RuntimeError: &quot;No value&quot;</span></code></pre><h2 id="testing-strategies" class="section-heading">
  <a href="#testing-strategies" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Testing Strategies</span>
</h2>
<h3 id="property-based-testing" class="section-heading">
  <a href="#property-based-testing" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Property-Based Testing</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MaybePropertyTest</span><span class="w"> </span><span class="k" data-group-id="4183214902-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">ExUnit.Case</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">StreamData</span><span class="w">

  </span><span class="n">property</span><span class="w"> </span><span class="s">&quot;map preserves just structure&quot;</span><span class="w"> </span><span class="k" data-group-id="4183214902-2">do</span><span class="w">
    </span><span class="n">check</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">term</span><span class="p" data-group-id="4183214902-3">(</span><span class="p" data-group-id="4183214902-3">)</span><span class="p">,</span><span class="w">
              </span><span class="n">f</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">StreamData</span><span class="o">.</span><span class="n">constant</span><span class="p" data-group-id="4183214902-4">(</span><span class="k" data-group-id="4183214902-5">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k" data-group-id="4183214902-5">end</span><span class="p" data-group-id="4183214902-4">)</span><span class="w"> </span><span class="k" data-group-id="4183214902-6">do</span><span class="w">
      </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="4183214902-7">(</span><span class="n">value</span><span class="p" data-group-id="4183214902-7">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Monad</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="4183214902-8">(</span><span class="n">f</span><span class="p" data-group-id="4183214902-8">)</span><span class="w">
      </span><span class="n">assert</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just?</span><span class="p" data-group-id="4183214902-9">(</span><span class="n">result</span><span class="p" data-group-id="4183214902-9">)</span><span class="w">
    </span><span class="k" data-group-id="4183214902-6">end</span><span class="w">
  </span><span class="k" data-group-id="4183214902-2">end</span><span class="w">

  </span><span class="n">property</span><span class="w"> </span><span class="s">&quot;map on nothing returns nothing&quot;</span><span class="w"> </span><span class="k" data-group-id="4183214902-10">do</span><span class="w">
    </span><span class="n">check</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">StreamData</span><span class="o">.</span><span class="n">constant</span><span class="p" data-group-id="4183214902-11">(</span><span class="k" data-group-id="4183214902-12">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k" data-group-id="4183214902-12">end</span><span class="p" data-group-id="4183214902-11">)</span><span class="w"> </span><span class="k" data-group-id="4183214902-13">do</span><span class="w">
      </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="4183214902-14">(</span><span class="p" data-group-id="4183214902-14">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Monad</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="4183214902-15">(</span><span class="n">f</span><span class="p" data-group-id="4183214902-15">)</span><span class="w">
      </span><span class="n">assert</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="4183214902-16">(</span><span class="p" data-group-id="4183214902-16">)</span><span class="w">
    </span><span class="k" data-group-id="4183214902-13">end</span><span class="w">
  </span><span class="k" data-group-id="4183214902-10">end</span><span class="w">

  </span><span class="n">property</span><span class="w"> </span><span class="s">&quot;bind with just applies function&quot;</span><span class="w"> </span><span class="k" data-group-id="4183214902-17">do</span><span class="w">
    </span><span class="n">check</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">integer</span><span class="p" data-group-id="4183214902-18">(</span><span class="p" data-group-id="4183214902-18">)</span><span class="p">,</span><span class="w">
              </span><span class="n">result_value</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">integer</span><span class="p" data-group-id="4183214902-19">(</span><span class="p" data-group-id="4183214902-19">)</span><span class="w"> </span><span class="k" data-group-id="4183214902-20">do</span><span class="w">
      </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="4183214902-21">fn</span><span class="w"> </span><span class="c">_x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="4183214902-22">(</span><span class="n">result_value</span><span class="p" data-group-id="4183214902-22">)</span><span class="w"> </span><span class="k" data-group-id="4183214902-21">end</span><span class="w">
      </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="4183214902-23">(</span><span class="n">value</span><span class="p" data-group-id="4183214902-23">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Monad</span><span class="o">.</span><span class="n">bind</span><span class="p" data-group-id="4183214902-24">(</span><span class="n">f</span><span class="p" data-group-id="4183214902-24">)</span><span class="w">
      </span><span class="n">assert</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="4183214902-25">(</span><span class="n">result_value</span><span class="p" data-group-id="4183214902-25">)</span><span class="w">
    </span><span class="k" data-group-id="4183214902-20">end</span><span class="w">
  </span><span class="k" data-group-id="4183214902-17">end</span><span class="w">
</span><span class="k" data-group-id="4183214902-1">end</span></code></pre><h3 id="unit-testing-common-patterns" class="section-heading">
  <a href="#unit-testing-common-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Unit Testing Common Patterns</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MaybeTest</span><span class="w"> </span><span class="k" data-group-id="6554154035-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">ExUnit.Case</span><span class="w">
  </span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Monad</span><span class="w">

  </span><span class="n">test</span><span class="w"> </span><span class="s">&quot;chaining operations with bind&quot;</span><span class="w"> </span><span class="k" data-group-id="6554154035-2">do</span><span class="w">
    </span><span class="c1"># Successful chain</span><span class="w">
    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-3">(</span><span class="mi">5</span><span class="p" data-group-id="6554154035-3">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="6554154035-4">(</span><span class="k" data-group-id="6554154035-5">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-6">(</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="6554154035-6">)</span><span class="w"> </span><span class="k" data-group-id="6554154035-5">end</span><span class="p" data-group-id="6554154035-4">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="6554154035-7">(</span><span class="k" data-group-id="6554154035-8">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-9">(</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="6554154035-9">)</span><span class="w"> </span><span class="k" data-group-id="6554154035-8">end</span><span class="p" data-group-id="6554154035-7">)</span><span class="w">
    
    </span><span class="n">assert</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-10">(</span><span class="mi">11</span><span class="p" data-group-id="6554154035-10">)</span><span class="w">
    
    </span><span class="c1"># Chain breaks on nothing</span><span class="w">
    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-11">(</span><span class="mi">5</span><span class="p" data-group-id="6554154035-11">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="6554154035-12">(</span><span class="k" data-group-id="6554154035-13">fn</span><span class="w"> </span><span class="c">_x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="6554154035-14">(</span><span class="p" data-group-id="6554154035-14">)</span><span class="w"> </span><span class="k" data-group-id="6554154035-13">end</span><span class="p" data-group-id="6554154035-12">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="6554154035-15">(</span><span class="k" data-group-id="6554154035-16">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-17">(</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="6554154035-17">)</span><span class="w"> </span><span class="k" data-group-id="6554154035-16">end</span><span class="p" data-group-id="6554154035-15">)</span><span class="w">  </span><span class="c1"># Never executed</span><span class="w">
    
    </span><span class="n">assert</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="6554154035-18">(</span><span class="p" data-group-id="6554154035-18">)</span><span class="w">
  </span><span class="k" data-group-id="6554154035-2">end</span><span class="w">

  </span><span class="n">test</span><span class="w"> </span><span class="s">&quot;combining values with ap&quot;</span><span class="w"> </span><span class="k" data-group-id="6554154035-19">do</span><span class="w">
    </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="6554154035-20">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k" data-group-id="6554154035-21">fn</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="k" data-group-id="6554154035-21">end</span><span class="w"> </span><span class="k" data-group-id="6554154035-20">end</span><span class="w">
    
    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-22">(</span><span class="n">add</span><span class="p" data-group-id="6554154035-22">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="6554154035-23">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-24">(</span><span class="mi">10</span><span class="p" data-group-id="6554154035-24">)</span><span class="p" data-group-id="6554154035-23">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="6554154035-25">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-26">(</span><span class="mi">5</span><span class="p" data-group-id="6554154035-26">)</span><span class="p" data-group-id="6554154035-25">)</span><span class="w">
    
    </span><span class="n">assert</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-27">(</span><span class="mi">15</span><span class="p" data-group-id="6554154035-27">)</span><span class="w">
    
    </span><span class="c1"># Fails if any value is nothing</span><span class="w">
    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-28">(</span><span class="n">add</span><span class="p" data-group-id="6554154035-28">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="6554154035-29">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="6554154035-30">(</span><span class="p" data-group-id="6554154035-30">)</span><span class="p" data-group-id="6554154035-29">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ap</span><span class="p" data-group-id="6554154035-31">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-32">(</span><span class="mi">5</span><span class="p" data-group-id="6554154035-32">)</span><span class="p" data-group-id="6554154035-31">)</span><span class="w">
    
    </span><span class="n">assert</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="6554154035-33">(</span><span class="p" data-group-id="6554154035-33">)</span><span class="w">
  </span><span class="k" data-group-id="6554154035-19">end</span><span class="w">

  </span><span class="n">test</span><span class="w"> </span><span class="s">&quot;sequence converts list of Maybe to Maybe list&quot;</span><span class="w"> </span><span class="k" data-group-id="6554154035-34">do</span><span class="w">
    </span><span class="c1"># All present</span><span class="w">
    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">sequence</span><span class="p" data-group-id="6554154035-35">(</span><span class="p" data-group-id="6554154035-36">[</span><span class="w">
      </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-37">(</span><span class="mi">1</span><span class="p" data-group-id="6554154035-37">)</span><span class="p">,</span><span class="w">
      </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-38">(</span><span class="mi">2</span><span class="p" data-group-id="6554154035-38">)</span><span class="p">,</span><span class="w">
      </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-39">(</span><span class="mi">3</span><span class="p" data-group-id="6554154035-39">)</span><span class="w">
    </span><span class="p" data-group-id="6554154035-36">]</span><span class="p" data-group-id="6554154035-35">)</span><span class="w">
    </span><span class="n">assert</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-40">(</span><span class="p" data-group-id="6554154035-41">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="6554154035-41">]</span><span class="p" data-group-id="6554154035-40">)</span><span class="w">
    
    </span><span class="c1"># Any absent</span><span class="w">
    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">sequence</span><span class="p" data-group-id="6554154035-42">(</span><span class="p" data-group-id="6554154035-43">[</span><span class="w">
      </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-44">(</span><span class="mi">1</span><span class="p" data-group-id="6554154035-44">)</span><span class="p">,</span><span class="w">
      </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="6554154035-45">(</span><span class="p" data-group-id="6554154035-45">)</span><span class="p">,</span><span class="w">
      </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="6554154035-46">(</span><span class="mi">3</span><span class="p" data-group-id="6554154035-46">)</span><span class="w">
    </span><span class="p" data-group-id="6554154035-43">]</span><span class="p" data-group-id="6554154035-42">)</span><span class="w">
    </span><span class="n">assert</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="6554154035-47">(</span><span class="p" data-group-id="6554154035-47">)</span><span class="w">
  </span><span class="k" data-group-id="6554154035-34">end</span><span class="w">
</span><span class="k" data-group-id="6554154035-1">end</span></code></pre><h2 id="performance-considerations" class="section-heading">
  <a href="#performance-considerations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Performance Considerations</span>
</h2>
<h3 id="lazy-evaluation" class="section-heading">
  <a href="#lazy-evaluation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Lazy Evaluation</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Operations on nothing are essentially no-ops</span><span class="w">
</span><span class="c1"># This makes Maybe chains very efficient when they short-circuit early</span><span class="w">

</span><span class="n">expensive_computation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="2010734740-1">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="c1"># This never runs if we start with nothing</span><span class="w">
  </span><span class="nc">Process</span><span class="o">.</span><span class="n">sleep</span><span class="p" data-group-id="2010734740-2">(</span><span class="mi">1000</span><span class="p" data-group-id="2010734740-2">)</span><span class="w">
  </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="k" data-group-id="2010734740-1">end</span><span class="w">

</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="2010734740-3">(</span><span class="p" data-group-id="2010734740-3">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="2010734740-4">(</span><span class="n">expensive_computation</span><span class="p" data-group-id="2010734740-4">)</span><span class="w">    </span><span class="c1"># Returns immediately</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="2010734740-5">(</span><span class="k" data-group-id="2010734740-6">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="2010734740-7">(</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="2010734740-7">)</span><span class="w"> </span><span class="k" data-group-id="2010734740-6">end</span><span class="p" data-group-id="2010734740-5">)</span><span class="w">
</span><span class="c1"># Result: nothing(), computed instantly</span></code></pre><h3 id="memory-usage" class="section-heading">
  <a href="#memory-usage" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Memory Usage</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Maybe uses minimal memory overhead</span><span class="w">
</span><span class="c1"># just(value) stores the value plus a small wrapper</span><span class="w">
</span><span class="c1"># nothing() is a singleton, shared across all nothing instances</span><span class="w">

</span><span class="c1"># Efficient for optional fields</span><span class="w">
</span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="8621456951-1">%{</span><span class="w">
  </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">email</span><span class="p">:</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="8621456951-2">(</span><span class="s">&quot;alice@example.com&quot;</span><span class="p" data-group-id="8621456951-2">)</span><span class="p">,</span><span class="w">  </span><span class="c1"># Small overhead</span><span class="w">
  </span><span class="ss">phone</span><span class="p">:</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="8621456951-3">(</span><span class="p" data-group-id="8621456951-3">)</span><span class="w">                   </span><span class="c1"># Shared singleton</span><span class="w">
</span><span class="p" data-group-id="8621456951-1">}</span></code></pre><h2 id="troubleshooting-common-issues" class="section-heading">
  <a href="#troubleshooting-common-issues" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Troubleshooting Common Issues</span>
</h2>
<h3 id="issue-nested-maybe-values" class="section-heading">
  <a href="#issue-nested-maybe-values" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Issue: Nested Maybe Values</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Problem: Manual nesting creates Maybe Maybe a</span><span class="w">
</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="7671256592-1">(</span><span class="n">user_id</span><span class="p" data-group-id="7671256592-1">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="7671256592-2">(</span><span class="o">&amp;</span><span class="n">find_user</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="7671256592-2">)</span><span class="w">  </span><span class="c1"># find_user returns Maybe User</span><span class="w">
</span><span class="c1"># Result: Maybe (Maybe User) - nested!</span><span class="w">

</span><span class="c1"># ✅ Solution: Use bind for functions that return Maybe</span><span class="w">
</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="7671256592-3">(</span><span class="n">user_id</span><span class="p" data-group-id="7671256592-3">)</span><span class="w"> 
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="7671256592-4">(</span><span class="o">&amp;</span><span class="n">find_user</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="7671256592-4">)</span><span class="w">  </span><span class="c1"># Automatically flattens to Maybe User</span></code></pre><h3 id="issue-mixing-maybe-with-nil" class="section-heading">
  <a href="#issue-mixing-maybe-with-nil" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Issue: Mixing Maybe with Nil</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Problem: Inconsistent nil/Maybe usage</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">process_data</span><span class="p" data-group-id="1731058248-1">(</span><span class="n">data</span><span class="p" data-group-id="1731058248-1">)</span><span class="w"> </span><span class="k" data-group-id="1731058248-2">do</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="1731058248-3">(</span><span class="n">get_user</span><span class="p" data-group-id="1731058248-4">(</span><span class="n">data</span><span class="p" data-group-id="1731058248-4">)</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="1731058248-5">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="1731058248-6">(</span><span class="n">user</span><span class="p" data-group-id="1731058248-6">)</span><span class="w"> </span><span class="k" data-group-id="1731058248-5">end</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="1731058248-7">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="1731058248-8">(</span><span class="p" data-group-id="1731058248-8">)</span><span class="w"> </span><span class="k" data-group-id="1731058248-7">end</span><span class="w">
  </span><span class="p" data-group-id="1731058248-3">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="1731058248-9">(</span><span class="o">&amp;</span><span class="n">transform_user</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="1731058248-9">)</span><span class="w">
</span><span class="k" data-group-id="1731058248-2">end</span><span class="w">

</span><span class="c1"># ✅ Solution: Convert early, stay in Maybe context</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">process_data</span><span class="p" data-group-id="1731058248-10">(</span><span class="n">data</span><span class="p" data-group-id="1731058248-10">)</span><span class="w"> </span><span class="k" data-group-id="1731058248-11">do</span><span class="w">
  </span><span class="n">get_user</span><span class="p" data-group-id="1731058248-12">(</span><span class="n">data</span><span class="p" data-group-id="1731058248-12">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">from_nil</span><span class="p" data-group-id="1731058248-13">(</span><span class="p" data-group-id="1731058248-13">)</span><span class="w">      </span><span class="c1"># Convert nil -&gt; Maybe early</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="1731058248-14">(</span><span class="o">&amp;</span><span class="n">transform_user</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="1731058248-14">)</span><span class="w">
</span><span class="k" data-group-id="1731058248-11">end</span></code></pre><h3 id="issue-pattern-matching-confusion" class="section-heading">
  <a href="#issue-pattern-matching-confusion" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Issue: Pattern Matching Confusion</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Problem: Imperative pattern matching instead of functional folding</span><span class="w">
</span><span class="k">case</span><span class="w"> </span><span class="n">maybe_user</span><span class="w"> </span><span class="k" data-group-id="9221722432-1">do</span><span class="w">
  </span><span class="p" data-group-id="9221722432-2">%</span><span class="nc" data-group-id="9221722432-2">Just</span><span class="p" data-group-id="9221722432-2">{</span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">user</span><span class="p" data-group-id="9221722432-2">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">process_user</span><span class="p" data-group-id="9221722432-3">(</span><span class="n">user</span><span class="p" data-group-id="9221722432-3">)</span><span class="w">
  </span><span class="p" data-group-id="9221722432-4">%</span><span class="nc" data-group-id="9221722432-4">Nothing</span><span class="p" data-group-id="9221722432-4">{</span><span class="p" data-group-id="9221722432-4">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">handle_missing</span><span class="p" data-group-id="9221722432-5">(</span><span class="p" data-group-id="9221722432-5">)</span><span class="w">
</span><span class="k" data-group-id="9221722432-1">end</span><span class="w">

</span><span class="c1"># ✅ Solution: Use functional folding</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="9221722432-6">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="9221722432-7">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">process_user</span><span class="p" data-group-id="9221722432-8">(</span><span class="n">user</span><span class="p" data-group-id="9221722432-8">)</span><span class="w"> </span><span class="k" data-group-id="9221722432-7">end</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="9221722432-9">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">handle_missing</span><span class="p" data-group-id="9221722432-10">(</span><span class="p" data-group-id="9221722432-10">)</span><span class="w"> </span><span class="k" data-group-id="9221722432-9">end</span><span class="w">
</span><span class="p" data-group-id="9221722432-6">)</span></code></pre><h3 id="issue-over-using-pattern-matching" class="section-heading">
  <a href="#issue-over-using-pattern-matching" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Issue: Over-using Pattern Matching</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Problem: Manual unwrapping defeats the purpose</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="8389479231-1">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="8389479231-2">fn</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> 
    </span><span class="n">new_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transform</span><span class="p" data-group-id="8389479231-3">(</span><span class="n">value</span><span class="p" data-group-id="8389479231-3">)</span><span class="w">
    </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="8389479231-4">(</span><span class="n">new_value</span><span class="p" data-group-id="8389479231-4">)</span><span class="w">
  </span><span class="k" data-group-id="8389479231-2">end</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="8389479231-5">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="8389479231-6">(</span><span class="p" data-group-id="8389479231-6">)</span><span class="w"> </span><span class="k" data-group-id="8389479231-5">end</span><span class="w">
</span><span class="p" data-group-id="8389479231-1">)</span><span class="w">

</span><span class="c1"># ✅ Solution: Use map to stay in Maybe context</span><span class="w">
</span><span class="n">maybe_value</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="8389479231-7">(</span><span class="o">&amp;</span><span class="n">transform</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="8389479231-7">)</span></code></pre><h2 id="when-not-to-use-maybe" class="section-heading">
  <a href="#when-not-to-use-maybe" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">When Not to Use Maybe</span>
</h2>
<h3 id="use-either-instead-when" class="section-heading">
  <a href="#use-either-instead-when" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Use Either Instead When</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Maybe loses error context</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">validate_email</span><span class="p" data-group-id="4131794756-1">(</span><span class="n">email</span><span class="p" data-group-id="4131794756-1">)</span><span class="w"> </span><span class="k" data-group-id="4131794756-2">do</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="n">valid_email_format?</span><span class="p" data-group-id="4131794756-3">(</span><span class="n">email</span><span class="p" data-group-id="4131794756-3">)</span><span class="w"> </span><span class="k" data-group-id="4131794756-4">do</span><span class="w">
    </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="4131794756-5">(</span><span class="n">email</span><span class="p" data-group-id="4131794756-5">)</span><span class="w">
  </span><span class="k" data-group-id="4131794756-4">else</span><span class="w">
    </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="4131794756-6">(</span><span class="p" data-group-id="4131794756-6">)</span><span class="w">  </span><span class="c1"># Lost: why did validation fail?</span><span class="w">
  </span><span class="k" data-group-id="4131794756-4">end</span><span class="w">
</span><span class="k" data-group-id="4131794756-2">end</span><span class="w">

</span><span class="c1"># ✅ Either preserves error context  </span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">validate_email</span><span class="p" data-group-id="4131794756-7">(</span><span class="n">email</span><span class="p" data-group-id="4131794756-7">)</span><span class="w"> </span><span class="k" data-group-id="4131794756-8">do</span><span class="w">
  </span><span class="k">cond</span><span class="w"> </span><span class="k" data-group-id="4131794756-9">do</span><span class="w">
    </span><span class="nc">String</span><span class="o">.</span><span class="n">length</span><span class="p" data-group-id="4131794756-10">(</span><span class="n">email</span><span class="p" data-group-id="4131794756-10">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="4131794756-11">(</span><span class="s">&quot;Email cannot be empty&quot;</span><span class="p" data-group-id="4131794756-11">)</span><span class="w">
    </span><span class="ow">not</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">contains?</span><span class="p" data-group-id="4131794756-12">(</span><span class="n">email</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;@&quot;</span><span class="p" data-group-id="4131794756-12">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="4131794756-13">(</span><span class="s">&quot;Email must contain @&quot;</span><span class="p" data-group-id="4131794756-13">)</span><span class="w">
    </span><span class="ow">not</span><span class="w"> </span><span class="n">valid_domain?</span><span class="p" data-group-id="4131794756-14">(</span><span class="n">email</span><span class="p" data-group-id="4131794756-14">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="4131794756-15">(</span><span class="s">&quot;Invalid email domain&quot;</span><span class="p" data-group-id="4131794756-15">)</span><span class="w">
    </span><span class="no">true</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="p" data-group-id="4131794756-16">(</span><span class="n">email</span><span class="p" data-group-id="4131794756-16">)</span><span class="w">
  </span><span class="k" data-group-id="4131794756-9">end</span><span class="w">
</span><span class="k" data-group-id="4131794756-8">end</span></code></pre><h3 id="use-plain-values-when" class="section-heading">
  <a href="#use-plain-values-when" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Use Plain Values When</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Maybe overhead for always-present values</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">calculate_tax</span><span class="p" data-group-id="8224384939-1">(</span><span class="n">amount</span><span class="p" data-group-id="8224384939-1">)</span><span class="w"> </span><span class="k" data-group-id="8224384939-2">do</span><span class="w">
  </span><span class="c1"># Tax rate is always known, no need for Maybe</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="8224384939-3">(</span><span class="n">amount</span><span class="p" data-group-id="8224384939-3">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="8224384939-4">(</span><span class="k" data-group-id="8224384939-5">fn</span><span class="w"> </span><span class="n">amt</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">amt</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.1</span><span class="w"> </span><span class="k" data-group-id="8224384939-5">end</span><span class="p" data-group-id="8224384939-4">)</span><span class="w">
</span><span class="k" data-group-id="8224384939-2">end</span><span class="w">

</span><span class="c1"># ✅ Plain calculation for guaranteed values</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">calculate_tax</span><span class="p" data-group-id="8224384939-6">(</span><span class="n">amount</span><span class="p" data-group-id="8224384939-6">)</span><span class="w"> </span><span class="k" data-group-id="8224384939-7">do</span><span class="w">
  </span><span class="n">amount</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.1</span><span class="w">
</span><span class="k" data-group-id="8224384939-7">end</span></code></pre><h2 id="summary" class="section-heading">
  <a href="#summary" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Summary</span>
</h2>
<p>Maybe provides null-safe computation for optional values:</p><p><strong>Core Operations:</strong></p><ul><li><code class="inline">just/1</code>: Wrap present values</li><li><code class="inline">nothing/0</code>: Represent absence  </li><li><code class="inline">map/2</code>: Transform present values, skip absent</li><li><code class="inline">bind/2</code>: Chain Maybe-returning operations with automatic flattening</li><li><code class="inline">ap/2</code>: Apply functions across multiple Maybe values</li><li><code class="inline">sequence/1</code>: Convert <code class="inline">[Maybe a]</code> to <code class="inline">Maybe [a]</code></li></ul><p><strong>Key Patterns:</strong></p><ul><li>Chain dependent lookups with <code class="inline">bind/2</code></li><li>Transform values with <code class="inline">map/2</code></li><li>Combine multiple optional values with <code class="inline">ap/2</code></li><li>Collect all-or-nothing results with <code class="inline">sequence/1</code></li><li>Pattern match for final handling</li></ul><p><strong>Mathematical Properties:</strong></p><ul><li><strong>Functor</strong>: <code class="inline">map</code> preserves structure</li><li><strong>Applicative</strong>: <code class="inline">ap</code> applies functions in context</li><li><strong>Monad</strong>: <code class="inline">bind</code> enables dependent sequencing with flattening</li></ul><p>Remember: Maybe represents &quot;optional&quot; - use it when absence is a valid state that should be handled gracefully, without needing specific error information.</p>
</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="monad-identity-usage-rules.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Funx.Monad.Identity Usage Rules
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="monad-either-usage-rules.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Funx.Monad.Either Usage Rules
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/funx/0.1.4" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/funx/0.1.4">Hex Preview</a>

              (<a href="https://preview.hex.pm/preview/funx/0.1.4/show/lib/monad/maybe/usage-rules.md">current file</a>)

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="funx.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.34.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.34.2">
    <meta name="project" content="funx v0.3.0">


    <title>Funx.Optics.Lens â€” funx v0.3.0</title>
    <link rel="stylesheet" href="dist/html-elixir-F2VRIOKR.css" />


      <link rel="canonical" href="https://hexdocs.pm/funx/Funx.Optics.Lens.html" />

    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-5C020EFA.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-YIPIRHGU.js"></script>

  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
funx
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.3.0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of funx</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">Funx.Optics.Lens</span> 
    <small class="app-vsn" translate="no">(funx v0.3.0)</small>

  </h1>


    <section id="moduledoc">
<p>The <a href="Funx.Optics.Lens.html"><code class="inline">Funx.Optics.Lens</code></a> module provides a lawful total optic for focusing on a part of a data structure.</p><p>A lens is <strong>total</strong>: it assumes the focus always exists within the valid domain. This is a contract
enforced at runtime by raising <a href="https://hexdocs.pm/elixir/KeyError.html"><code class="inline">KeyError</code></a> when violated. If the focus might not exist, use a prism instead.</p><p>Both <code class="inline">view!</code> and <code class="inline">set!</code> enforce totality symmetrically for all data types (maps, structs, etc.). If either
operation can succeed when the focus is missing, you no longer have a lens.</p><h3 id="module-constructors" class="section-heading">
  <a href="#module-constructors" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Constructors</span>
</h3>
<ul><li><a href="#key/1"><code class="inline">key/1</code></a>: Focuses on a single key in a map or struct.</li><li><a href="#path/1"><code class="inline">path/1</code></a>: Focuses on nested keys by composing <a href="#key/1"><code class="inline">key/1</code></a> lenses.</li><li><a href="#make/2"><code class="inline">make/2</code></a>: Creates a custom lens from viewer and updater functions.</li></ul><h3 id="module-core-operations" class="section-heading">
  <a href="#module-core-operations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Core Operations</span>
</h3>
<ul><li><a href="#view!/2"><code class="inline">view!/2</code></a>: Extracts the focused part (raises <a href="https://hexdocs.pm/elixir/KeyError.html"><code class="inline">KeyError</code></a> if missing).</li><li><a href="#set!/3"><code class="inline">set!/3</code></a>: Updates the focused part (raises <a href="https://hexdocs.pm/elixir/KeyError.html"><code class="inline">KeyError</code></a> if missing).</li><li><a href="#over!/3"><code class="inline">over!/3</code></a>: Applies a function to the focused part (raises <a href="https://hexdocs.pm/elixir/KeyError.html"><code class="inline">KeyError</code></a> if missing).</li></ul><h3 id="module-safe-operations" class="section-heading">
  <a href="#module-safe-operations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Safe Operations</span>
</h3>
<ul><li><a href="#view/3"><code class="inline">view/3</code></a>: Safe version of <a href="#view!/2"><code class="inline">view!/2</code></a> (returns <code class="inline">Either</code> or tuple).</li><li><a href="#set/4"><code class="inline">set/4</code></a>: Safe version of <a href="#set!/3"><code class="inline">set!/3</code></a> (returns <code class="inline">Either</code> or tuple).</li><li><a href="#over/4"><code class="inline">over/4</code></a>: Safe version of <a href="#over!/3"><code class="inline">over!/3</code></a> (returns <code class="inline">Either</code> or tuple).</li></ul><p><strong>Error handling modes:</strong></p><p>Safe operations accept an optional <code class="inline">:as</code> parameter:</p><ul><li><code class="inline">:either</code> (default): Returns <code class="inline">Right(value)</code> or <code class="inline">Left(exception)</code>.</li><li><code class="inline">:tuple</code>: Returns <code class="inline">{:ok, value}</code> or <code class="inline">{:error, exception}</code>.</li><li><code class="inline">:raise</code>: Behaves like the <code class="inline">!</code> version, raising exceptions directly.</li></ul><p>Safe operations use <code class="inline">Either.from_try/1</code> internally, which catches <strong>all exceptions</strong>,
not just <a href="https://hexdocs.pm/elixir/KeyError.html"><code class="inline">KeyError</code></a>.</p><h3 id="module-composition" class="section-heading">
  <a href="#module-composition" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Composition</span>
</h3>
<ul><li><a href="#compose/2"><code class="inline">compose/2</code></a>: Composes two lenses sequentially (outer then inner).</li><li><a href="#compose/1"><code class="inline">compose/1</code></a>: Composes a list of lenses into a single lens.</li></ul><p>Lenses compose naturally. Composing two lenses yields a new lens that focuses through
both layers sequentially.</p><h2 id="module-monoid-structure" class="section-heading">
  <a href="#module-monoid-structure" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Monoid Structure</span>
</h2>
<p>Lenses form a monoid under composition <strong>for a fixed outer type <code class="inline">s</code></strong>.</p><p>The monoid structure is provided via <a href="Funx.Monoid.Optics.LensCompose.html"><code class="inline">Funx.Monoid.Optics.LensCompose</code></a>, which wraps lenses
for use with generic monoid operations:</p><ul><li><strong>Identity</strong>: <code class="inline">make(fn s -&gt; s end, fn _s, a -&gt; a end)</code> - the identity lens</li><li><strong>Operation</strong>: <a href="#compose/2"><code class="inline">compose/2</code></a> - sequential composition</li></ul><p>You can use <a href="#compose/1"><code class="inline">compose/1</code></a> to compose multiple lenses sequentially, or work directly
with <a href="Funx.Monoid.Optics.LensCompose.html"><code class="inline">Funx.Monoid.Optics.LensCompose</code></a> for more control.</p><h2 id="module-examples" class="section-heading">
  <a href="#module-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="5475754635-1">(</span><span class="ss">:age</span><span class="p" data-group-id="5475754635-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="5475754635-2">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p" data-group-id="5475754635-2">}</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="5475754635-3">(</span><span class="n">lens</span><span class="p" data-group-id="5475754635-3">)</span><span class="w">
</span><span class="mi">40</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="5475754635-4">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p" data-group-id="5475754635-4">}</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">set!</span><span class="p" data-group-id="5475754635-5">(</span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p" data-group-id="5475754635-5">)</span><span class="w">
</span><span class="p" data-group-id="5475754635-6">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p" data-group-id="5475754635-6">}</span></code></pre><p>Composing lenses for nested access:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">outer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="8329797079-1">(</span><span class="ss">:profile</span><span class="p" data-group-id="8329797079-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">inner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="8329797079-2">(</span><span class="ss">:score</span><span class="p" data-group-id="8329797079-2">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">compose</span><span class="p" data-group-id="8329797079-3">(</span><span class="n">outer</span><span class="p">,</span><span class="w"> </span><span class="n">inner</span><span class="p" data-group-id="8329797079-3">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="8329797079-4">%{</span><span class="ss">profile</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8329797079-5">%{</span><span class="ss">score</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p" data-group-id="8329797079-5">}</span><span class="p" data-group-id="8329797079-4">}</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="8329797079-6">(</span><span class="n">lens</span><span class="p" data-group-id="8329797079-6">)</span><span class="w">
</span><span class="mi">12</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="8329797079-7">%{</span><span class="ss">profile</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8329797079-8">%{</span><span class="ss">score</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p" data-group-id="8329797079-8">}</span><span class="p" data-group-id="8329797079-7">}</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">set!</span><span class="p" data-group-id="8329797079-9">(</span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="mi">99</span><span class="p" data-group-id="8329797079-9">)</span><span class="w">
</span><span class="p" data-group-id="8329797079-10">%{</span><span class="ss">profile</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8329797079-11">%{</span><span class="ss">score</span><span class="p">:</span><span class="w"> </span><span class="mi">99</span><span class="p" data-group-id="8329797079-11">}</span><span class="p" data-group-id="8329797079-10">}</span></code></pre><p>Deeply nested composition with <a href="#compose/1"><code class="inline">compose/1</code></a>:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">compose</span><span class="p" data-group-id="4072517065-1">(</span><span class="p" data-group-id="4072517065-2">[</span><span class="nc">Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="4072517065-3">(</span><span class="ss">:stats</span><span class="p" data-group-id="4072517065-3">)</span><span class="p">,</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="4072517065-4">(</span><span class="ss">:wins</span><span class="p" data-group-id="4072517065-4">)</span><span class="p" data-group-id="4072517065-2">]</span><span class="p" data-group-id="4072517065-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="4072517065-5">%{</span><span class="ss">stats</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4072517065-6">%{</span><span class="ss">wins</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p" data-group-id="4072517065-6">}</span><span class="p" data-group-id="4072517065-5">}</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="4072517065-7">(</span><span class="n">lens</span><span class="p" data-group-id="4072517065-7">)</span><span class="w">
</span><span class="mi">7</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="4072517065-8">%{</span><span class="ss">stats</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4072517065-9">%{</span><span class="ss">wins</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p" data-group-id="4072517065-9">}</span><span class="p" data-group-id="4072517065-8">}</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">set!</span><span class="p" data-group-id="4072517065-10">(</span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p" data-group-id="4072517065-10">)</span><span class="w">
</span><span class="p" data-group-id="4072517065-11">%{</span><span class="ss">stats</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4072517065-12">%{</span><span class="ss">wins</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p" data-group-id="4072517065-12">}</span><span class="p" data-group-id="4072517065-11">}</span></code></pre>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:t/0" data-no-tooltip translate="no">t()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:t/2" data-no-tooltip translate="no">t(s, a)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:updater/2" data-no-tooltip translate="no">updater(s, a)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:viewer/2" data-no-tooltip translate="no">viewer(s, a)</a>

      </div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#compose/1" data-no-tooltip translate="no">compose(lenses)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#compose/2" data-no-tooltip translate="no">compose(outer, inner)</a>

      </div>

        <div class="summary-synopsis"><p>Composes lenses into a single lens using sequential composition.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#key/1" data-no-tooltip translate="no">key(k)</a>

      </div>

        <div class="summary-synopsis"><p>Builds a lawful lens focusing on a single key in a map or struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#make/2" data-no-tooltip translate="no">make(viewer, updater)</a>

      </div>

        <div class="summary-synopsis"><p>Creates a custom lens from viewer and updater functions.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#over/4" data-no-tooltip translate="no">over(s, lens, f, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Safe version of <a href="#over!/3"><code class="inline">over!/3</code></a> that returns an <code class="inline">Either</code> or tuple instead of raising.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#over!/3" data-no-tooltip translate="no">over!(s, lens, f)</a>

      </div>

        <div class="summary-synopsis"><p>Updates the focused part of a structure by applying a function to it.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#path/1" data-no-tooltip translate="no">path(keys)</a>

      </div>

        <div class="summary-synopsis"><p>Builds a lawful lens for nested map access by composing <a href="#key/1"><code class="inline">key/1</code></a> lenses.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set/4" data-no-tooltip translate="no">set(s, lens, a, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Safe version of <a href="#set!/3"><code class="inline">set!/3</code></a> that returns an <code class="inline">Either</code> or tuple instead of raising.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set!/3" data-no-tooltip translate="no">set!(s, lens, a)</a>

      </div>

        <div class="summary-synopsis"><p>Updates the focused part of a structure by setting it to a new value.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#view/3" data-no-tooltip translate="no">view(s, lens, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Safe version of <a href="#view!/2"><code class="inline">view!/2</code></a> that returns an <code class="inline">Either</code> or tuple instead of raising.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#view!/2" data-no-tooltip translate="no">view!(s, lens)</a>

      </div>

        <div class="summary-synopsis"><p>Extracts the focused part of a structure using a lens.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:t/0">

  <div class="detail-header">
    <a href="#t:t/0" class="detail-link" data-no-tooltip title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">t()</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L104" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> t() :: <a href="#t:t/2">t</a>(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>())</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:t/2">

  <div class="detail-header">
    <a href="#t:t/2" class="detail-link" data-no-tooltip title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">t(s, a)</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L99" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> t(s, a) :: %Funx.Optics.Lens{update: <a href="#t:updater/2">updater</a>(s, a), view: <a href="#t:viewer/2">viewer</a>(s, a)}</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:updater/2">

  <div class="detail-header">
    <a href="#t:updater/2" class="detail-link" data-no-tooltip title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">updater(s, a)</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L97" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> updater(s, a) :: (s, a -&gt; s)</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:viewer/2">

  <div class="detail-header">
    <a href="#t:viewer/2" class="detail-link" data-no-tooltip title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">viewer(s, a)</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L96" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> viewer(s, a) :: (s -&gt; a)</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="compose/1">

  <div class="detail-header">
    <a href="#compose/1" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">compose(lenses)</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L500" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> compose([<a href="#t:t/0">t</a>()]) :: <a href="#t:t/0">t</a>()</pre>

      </div>


  </section>
</section>
<section class="detail" id="compose/2">

  <div class="detail-header">
    <a href="#compose/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">compose(outer, inner)</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L495" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> compose(<a href="#t:t/2">t</a>(s, i), <a href="#t:t/2">t</a>(i, a)) :: <a href="#t:t/2">t</a>(s, a) when s: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(), i: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(), a: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Composes lenses into a single lens using sequential composition.</p><p>This delegates to the monoid append operation, which contains the
canonical composition logic.</p><h2 id="compose/2-binary-composition" class="section-heading">
  <a href="#compose/2-binary-composition" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Binary composition</span>
</h2>
<p>Composes two lenses. The outer lens focuses first, then the inner lens
focuses within the result.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">outer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2728422299-1">(</span><span class="ss">:profile</span><span class="p" data-group-id="2728422299-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">inner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2728422299-2">(</span><span class="ss">:age</span><span class="p" data-group-id="2728422299-2">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">compose</span><span class="p" data-group-id="2728422299-3">(</span><span class="n">outer</span><span class="p">,</span><span class="w"> </span><span class="n">inner</span><span class="p" data-group-id="2728422299-3">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="2728422299-4">%{</span><span class="ss">profile</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2728422299-5">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p" data-group-id="2728422299-5">}</span><span class="p" data-group-id="2728422299-4">}</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="2728422299-6">(</span><span class="n">lens</span><span class="p" data-group-id="2728422299-6">)</span><span class="w">
</span><span class="mi">30</span></code></pre><h2 id="compose/2-list-composition" class="section-heading">
  <a href="#compose/2-list-composition" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">List composition</span>
</h2>
<p>Composes a list of lenses into a single lens using sequential composition.</p><p><strong>Sequential semantics:</strong></p><ul><li>On <code class="inline">view!</code>: Applies each lens's viewer in sequence (function composition)</li><li>On <code class="inline">set!</code>: Updates through each lens in reverse order to maintain structure</li></ul><p>This is sequential focusing through nested structures.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">lenses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5012164913-1">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="5012164913-2">(</span><span class="ss">:user</span><span class="p" data-group-id="5012164913-2">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="5012164913-3">(</span><span class="ss">:profile</span><span class="p" data-group-id="5012164913-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="5012164913-4">(</span><span class="ss">:age</span><span class="p" data-group-id="5012164913-4">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="5012164913-1">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">compose</span><span class="p" data-group-id="5012164913-5">(</span><span class="n">lenses</span><span class="p" data-group-id="5012164913-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="5012164913-6">%{</span><span class="ss">user</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5012164913-7">%{</span><span class="ss">profile</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5012164913-8">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p" data-group-id="5012164913-8">}</span><span class="p" data-group-id="5012164913-7">}</span><span class="p" data-group-id="5012164913-6">}</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="5012164913-9">(</span><span class="n">lens</span><span class="p" data-group-id="5012164913-9">)</span><span class="w">
</span><span class="mi">25</span></code></pre>
  </section>
</section>
<section class="detail" id="key/1">

  <div class="detail-header">
    <a href="#key/1" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">key(k)</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L151" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> key(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()) :: <a href="#t:t/2">t</a>(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>())</pre>

      </div>

<p>Builds a lawful lens focusing on a single key in a map or struct.</p><h2 id="key/1-contract" class="section-heading">
  <a href="#key/1-contract" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Contract</span>
</h2>
<p>The key <strong>must exist</strong> in the structure. When used with <code class="inline">view!</code> and <code class="inline">set!</code>,
this lens uses <a href="https://hexdocs.pm/elixir/Map.html#fetch!/2"><code class="inline">Map.fetch!/2</code></a> and <a href="https://hexdocs.pm/elixir/Map.html#replace!/3"><code class="inline">Map.replace!/3</code></a>, raising <a href="https://hexdocs.pm/elixir/KeyError.html"><code class="inline">KeyError</code></a> if
the key is missing. This symmetric enforcement ensures all three lens laws hold.</p><p><strong>If the key might not exist, use a prism instead.</strong></p><h2 id="key/1-type-note" class="section-heading">
  <a href="#key/1-type-note" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Type Note</span>
</h2>
<p>The return type <code class="inline">t(map(), term())</code> uses Elixir's <code class="inline">map()</code> type, which includes
both plain maps and structs (since structs are maps with a <code class="inline">__struct__</code> key).</p><h2 id="key/1-examples" class="section-heading">
  <a href="#key/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2611162062-1">(</span><span class="ss">:name</span><span class="p" data-group-id="2611162062-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="2611162062-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="2611162062-2">}</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="2611162062-3">(</span><span class="n">lens</span><span class="p" data-group-id="2611162062-3">)</span><span class="w">
</span><span class="s">&quot;Alice&quot;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="2611162062-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="2611162062-4">}</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">set!</span><span class="p" data-group-id="2611162062-5">(</span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p" data-group-id="2611162062-5">)</span><span class="w">
</span><span class="p" data-group-id="2611162062-6">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p" data-group-id="2611162062-6">}</span></code></pre><p>Works with string keys:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="5817636926-1">(</span><span class="s">&quot;count&quot;</span><span class="p" data-group-id="5817636926-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="5817636926-2">%{</span><span class="s">&quot;count&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="5817636926-2">}</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="5817636926-3">(</span><span class="n">lens</span><span class="p" data-group-id="5817636926-3">)</span><span class="w">
</span><span class="mi">5</span></code></pre><p>With structs (preserves type):</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="kd">defstruct</span><span class="w"> </span><span class="p" data-group-id="3453567707-1">[</span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="ss">:age</span><span class="p" data-group-id="3453567707-1">]</span><span class="w">
</span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="3453567707-2">(</span><span class="ss">:name</span><span class="p" data-group-id="3453567707-2">)</span><span class="w">
</span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3453567707-3">%</span><span class="nc" data-group-id="3453567707-3">User</span><span class="p" data-group-id="3453567707-3">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p" data-group-id="3453567707-3">}</span><span class="w">
</span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="3453567707-4">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p" data-group-id="3453567707-4">)</span><span class="w"> </span><span class="c1">#=&gt; &quot;Alice&quot;</span><span class="w">
</span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">set!</span><span class="p" data-group-id="3453567707-5">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p" data-group-id="3453567707-5">)</span><span class="w"> </span><span class="c1">#=&gt; %User{name: &quot;Bob&quot;, age: 30}</span></code></pre>
  </section>
</section>
<section class="detail" id="make/2">

  <div class="detail-header">
    <a href="#make/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">make(viewer, updater)</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L210" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> make(<a href="#t:viewer/2">viewer</a>(s, a), <a href="#t:updater/2">updater</a>(s, a)) :: <a href="#t:t/2">t</a>(s, a) when s: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(), a: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Creates a custom lens from viewer and updater functions.</p><p>The viewer extracts the focused part from the structure. The updater
takes the structure and a new value, returning an updated structure.</p><p>Both functions must maintain the lens laws for the result to be lawful.</p><h2 id="make/2-examples" class="section-heading">
  <a href="#make/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="c1"># A lens that views and updates the length of a string</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">make</span><span class="p" data-group-id="1542505017-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="k" data-group-id="1542505017-2">fn</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">length</span><span class="p" data-group-id="1542505017-3">(</span><span class="n">s</span><span class="p" data-group-id="1542505017-3">)</span><span class="w"> </span><span class="k" data-group-id="1542505017-2">end</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="k" data-group-id="1542505017-4">fn</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">duplicate</span><span class="p" data-group-id="1542505017-5">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">div</span><span class="p" data-group-id="1542505017-6">(</span><span class="n">len</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">length</span><span class="p" data-group-id="1542505017-7">(</span><span class="n">s</span><span class="p" data-group-id="1542505017-7">)</span><span class="p" data-group-id="1542505017-6">)</span><span class="p" data-group-id="1542505017-5">)</span><span class="w"> </span><span class="k" data-group-id="1542505017-4">end</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="1542505017-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="1542505017-8">(</span><span class="s">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p" data-group-id="1542505017-8">)</span><span class="w">
</span><span class="mi">5</span></code></pre>
  </section>
</section>
<section class="detail" id="over/4">

    <span id="over/3"></span>

  <div class="detail-header">
    <a href="#over/4" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">over(s, lens, f, opts \\ [])</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L436" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> over(s, <a href="#t:t/2">t</a>(s, a), (a -&gt; a), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">keyword</a>()) ::
  <a href="Funx.Monad.Either.html#t:t/2">Funx.Monad.Either.t</a>(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>(), s) | {:ok, s} | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()} | s
when s: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(), a: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Safe version of <a href="#over!/3"><code class="inline">over!/3</code></a> that returns an <code class="inline">Either</code> or tuple instead of raising.</p><p>See the &quot;Safe Operations&quot; section in the module documentation for details
about error handling modes and what exceptions are caught.</p><h2 id="over/4-examples" class="section-heading">
  <a href="#over/4-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="0019479908-1">(</span><span class="ss">:age</span><span class="p" data-group-id="0019479908-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">over</span><span class="p" data-group-id="0019479908-2">(</span><span class="p" data-group-id="0019479908-3">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p" data-group-id="0019479908-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0019479908-4">fn</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k" data-group-id="0019479908-4">end</span><span class="p" data-group-id="0019479908-2">)</span><span class="w">
</span><span class="p" data-group-id="0019479908-5">%</span><span class="nc" data-group-id="0019479908-5">Funx.Monad.Either.Right</span><span class="p" data-group-id="0019479908-5">{</span><span class="ss">right</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0019479908-6">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">31</span><span class="p" data-group-id="0019479908-6">}</span><span class="p" data-group-id="0019479908-5">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="0019479908-7">(</span><span class="ss">:age</span><span class="p" data-group-id="0019479908-7">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">over</span><span class="p" data-group-id="0019479908-8">(</span><span class="p" data-group-id="0019479908-9">%{</span><span class="p" data-group-id="0019479908-9">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0019479908-10">fn</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k" data-group-id="0019479908-10">end</span><span class="p" data-group-id="0019479908-8">)</span><span class="w">
</span><span class="p" data-group-id="0019479908-11">%</span><span class="nc" data-group-id="0019479908-11">Funx.Monad.Either.Left</span><span class="p" data-group-id="0019479908-11">{</span><span class="ss">left</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0019479908-12">%</span><span class="nc" data-group-id="0019479908-12">KeyError</span><span class="p" data-group-id="0019479908-12">{</span><span class="ss">key</span><span class="p">:</span><span class="w"> </span><span class="ss">:age</span><span class="p">,</span><span class="w"> </span><span class="ss">term</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0019479908-13">%{</span><span class="p" data-group-id="0019479908-13">}</span><span class="p" data-group-id="0019479908-12">}</span><span class="p" data-group-id="0019479908-11">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="0019479908-14">(</span><span class="ss">:score</span><span class="p" data-group-id="0019479908-14">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">over</span><span class="p" data-group-id="0019479908-15">(</span><span class="p" data-group-id="0019479908-16">%{</span><span class="ss">score</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="0019479908-16">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0019479908-17">fn</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k" data-group-id="0019479908-17">end</span><span class="p">,</span><span class="w"> </span><span class="ss">as</span><span class="p">:</span><span class="w"> </span><span class="ss">:tuple</span><span class="p" data-group-id="0019479908-15">)</span><span class="w">
</span><span class="p" data-group-id="0019479908-18">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0019479908-19">%{</span><span class="ss">score</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="0019479908-19">}</span><span class="p" data-group-id="0019479908-18">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="0019479908-20">(</span><span class="ss">:value</span><span class="p" data-group-id="0019479908-20">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">over</span><span class="p" data-group-id="0019479908-21">(</span><span class="p" data-group-id="0019479908-22">%{</span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="0019479908-22">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0019479908-23">fn</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k" data-group-id="0019479908-23">end</span><span class="p">,</span><span class="w"> </span><span class="ss">as</span><span class="p">:</span><span class="w"> </span><span class="ss">:raise</span><span class="p" data-group-id="0019479908-21">)</span><span class="w">
</span><span class="p" data-group-id="0019479908-24">%{</span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p" data-group-id="0019479908-24">}</span></code></pre>
  </section>
</section>
<section class="detail" id="over!/3">

  <div class="detail-header">
    <a href="#over!/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">over!(s, lens, f)</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L316" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> over!(s, <a href="#t:t/2">t</a>(s, a), (a -&gt; a)) :: s when s: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(), a: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Updates the focused part of a structure by applying a function to it.</p><p>This is the derived transformation operation for a lens. It is implemented
as:</p><ul><li><a href="#view!/2"><code class="inline">view!/2</code></a> to extract the focused part</li><li>Application of the given function</li><li><a href="#set!/3"><code class="inline">set!/3</code></a> to write the result back</li></ul><p>Because lenses are <strong>total</strong>, <a href="#over!/3"><code class="inline">over!/3</code></a> is also total. If the focus does not
exist, a <a href="https://hexdocs.pm/elixir/KeyError.html"><code class="inline">KeyError</code></a> is raised by <a href="#view!/2"><code class="inline">view!/2</code></a> or <a href="#set!/3"><code class="inline">set!/3</code></a>.</p><p>Only the focused part is changed. All other structure and data is preserved.</p><h2 id="over!/3-examples" class="section-heading">
  <a href="#over!/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="5128846240-1">(</span><span class="ss">:age</span><span class="p" data-group-id="5128846240-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5128846240-2">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p" data-group-id="5128846240-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">over!</span><span class="p" data-group-id="5128846240-3">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="5128846240-4">fn</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k" data-group-id="5128846240-4">end</span><span class="p" data-group-id="5128846240-3">)</span><span class="w">
</span><span class="p" data-group-id="5128846240-5">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">41</span><span class="p" data-group-id="5128846240-5">}</span></code></pre><p>Works through composed lenses:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">outer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="7564852416-1">(</span><span class="ss">:profile</span><span class="p" data-group-id="7564852416-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">inner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="7564852416-2">(</span><span class="ss">:score</span><span class="p" data-group-id="7564852416-2">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">compose</span><span class="p" data-group-id="7564852416-3">(</span><span class="n">outer</span><span class="p">,</span><span class="w"> </span><span class="n">inner</span><span class="p" data-group-id="7564852416-3">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7564852416-4">%{</span><span class="ss">profile</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7564852416-5">%{</span><span class="ss">score</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="7564852416-5">}</span><span class="p" data-group-id="7564852416-4">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">over!</span><span class="p" data-group-id="7564852416-6">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7564852416-7">fn</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k" data-group-id="7564852416-7">end</span><span class="p" data-group-id="7564852416-6">)</span><span class="w">
</span><span class="p" data-group-id="7564852416-8">%{</span><span class="ss">profile</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7564852416-9">%{</span><span class="ss">score</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="7564852416-9">}</span><span class="p" data-group-id="7564852416-8">}</span></code></pre><p>Works through <a href="#path/1"><code class="inline">path/1</code></a>:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">path</span><span class="p" data-group-id="9259858038-1">(</span><span class="p" data-group-id="9259858038-2">[</span><span class="ss">:stats</span><span class="p">,</span><span class="w"> </span><span class="ss">:wins</span><span class="p" data-group-id="9259858038-2">]</span><span class="p" data-group-id="9259858038-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9259858038-3">%{</span><span class="ss">stats</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9259858038-4">%{</span><span class="ss">wins</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="9259858038-4">}</span><span class="p" data-group-id="9259858038-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">over!</span><span class="p" data-group-id="9259858038-5">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="9259858038-6">fn</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="k" data-group-id="9259858038-6">end</span><span class="p" data-group-id="9259858038-5">)</span><span class="w">
</span><span class="p" data-group-id="9259858038-7">%{</span><span class="ss">stats</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9259858038-8">%{</span><span class="ss">wins</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p" data-group-id="9259858038-8">}</span><span class="p" data-group-id="9259858038-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="path/1">

  <div class="detail-header">
    <a href="#path/1" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">path(keys)</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L186" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> path([<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()]) :: <a href="#t:t/2">t</a>(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>())</pre>

      </div>

<p>Builds a lawful lens for nested map access by composing <a href="#key/1"><code class="inline">key/1</code></a> lenses.</p><p>This is equivalent to <code class="inline">compose(Enum.map(keys, &amp;key/1))</code> and enforces totality
at every level - raising <a href="https://hexdocs.pm/elixir/KeyError.html"><code class="inline">KeyError</code></a> when used with <code class="inline">view!</code> or <code class="inline">set!</code> if any
intermediate key is missing.</p><h2 id="path/1-type-note" class="section-heading">
  <a href="#path/1-type-note" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Type Note</span>
</h2>
<p>The return type <code class="inline">t(map(), term())</code> uses Elixir's <code class="inline">map()</code> type, which includes
both plain maps and structs (since structs are maps with a <code class="inline">__struct__</code> key).</p><h2 id="path/1-examples" class="section-heading">
  <a href="#path/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">path</span><span class="p" data-group-id="6772863352-1">(</span><span class="p" data-group-id="6772863352-2">[</span><span class="ss">:user</span><span class="p">,</span><span class="w"> </span><span class="ss">:profile</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="6772863352-2">]</span><span class="p" data-group-id="6772863352-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6772863352-3">%{</span><span class="ss">user</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6772863352-4">%{</span><span class="ss">profile</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6772863352-5">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="6772863352-5">}</span><span class="p" data-group-id="6772863352-4">}</span><span class="p" data-group-id="6772863352-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="6772863352-6">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p" data-group-id="6772863352-6">)</span><span class="w">
</span><span class="s">&quot;Alice&quot;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">set!</span><span class="p" data-group-id="6772863352-7">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p" data-group-id="6772863352-7">)</span><span class="w">
</span><span class="p" data-group-id="6772863352-8">%{</span><span class="ss">user</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6772863352-9">%{</span><span class="ss">profile</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6772863352-10">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p" data-group-id="6772863352-10">}</span><span class="p" data-group-id="6772863352-9">}</span><span class="p" data-group-id="6772863352-8">}</span></code></pre><p>Raises on missing keys when accessed:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">path</span><span class="p" data-group-id="9743288669-1">(</span><span class="p" data-group-id="9743288669-2">[</span><span class="ss">:user</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="9743288669-2">]</span><span class="p" data-group-id="9743288669-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="9743288669-3">(</span><span class="p" data-group-id="9743288669-4">%{</span><span class="p" data-group-id="9743288669-4">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p" data-group-id="9743288669-3">)</span><span class="w">
</span><span class="gt">** (KeyError) key :user not found in: %{}</span></code></pre>
  </section>
</section>
<section class="detail" id="set/4">

    <span id="set/3"></span>

  <div class="detail-header">
    <a href="#set/4" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set(s, lens, a, opts \\ [])</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L394" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> set(s, <a href="#t:t/2">t</a>(s, a), a, <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">keyword</a>()) ::
  <a href="Funx.Monad.Either.html#t:t/2">Funx.Monad.Either.t</a>(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>(), s) | {:ok, s} | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()} | s
when s: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(), a: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Safe version of <a href="#set!/3"><code class="inline">set!/3</code></a> that returns an <code class="inline">Either</code> or tuple instead of raising.</p><p>See the &quot;Safe Operations&quot; section in the module documentation for details
about error handling modes and what exceptions are caught.</p><h2 id="set/4-examples" class="section-heading">
  <a href="#set/4-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2983285898-1">(</span><span class="ss">:age</span><span class="p" data-group-id="2983285898-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">set</span><span class="p" data-group-id="2983285898-2">(</span><span class="p" data-group-id="2983285898-3">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p" data-group-id="2983285898-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="mi">31</span><span class="p" data-group-id="2983285898-2">)</span><span class="w">
</span><span class="p" data-group-id="2983285898-4">%</span><span class="nc" data-group-id="2983285898-4">Funx.Monad.Either.Right</span><span class="p" data-group-id="2983285898-4">{</span><span class="ss">right</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2983285898-5">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">31</span><span class="p" data-group-id="2983285898-5">}</span><span class="p" data-group-id="2983285898-4">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2983285898-6">(</span><span class="ss">:age</span><span class="p" data-group-id="2983285898-6">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">set</span><span class="p" data-group-id="2983285898-7">(</span><span class="p" data-group-id="2983285898-8">%{</span><span class="p" data-group-id="2983285898-8">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="mi">31</span><span class="p" data-group-id="2983285898-7">)</span><span class="w">
</span><span class="p" data-group-id="2983285898-9">%</span><span class="nc" data-group-id="2983285898-9">Funx.Monad.Either.Left</span><span class="p" data-group-id="2983285898-9">{</span><span class="ss">left</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2983285898-10">%</span><span class="nc" data-group-id="2983285898-10">KeyError</span><span class="p" data-group-id="2983285898-10">{</span><span class="ss">key</span><span class="p">:</span><span class="w"> </span><span class="ss">:age</span><span class="p">,</span><span class="w"> </span><span class="ss">term</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2983285898-11">%{</span><span class="p" data-group-id="2983285898-11">}</span><span class="p" data-group-id="2983285898-10">}</span><span class="p" data-group-id="2983285898-9">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2983285898-12">(</span><span class="ss">:count</span><span class="p" data-group-id="2983285898-12">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">set</span><span class="p" data-group-id="2983285898-13">(</span><span class="p" data-group-id="2983285898-14">%{</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="2983285898-14">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">as</span><span class="p">:</span><span class="w"> </span><span class="ss">:tuple</span><span class="p" data-group-id="2983285898-13">)</span><span class="w">
</span><span class="p" data-group-id="2983285898-15">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2983285898-16">%{</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="2983285898-16">}</span><span class="p" data-group-id="2983285898-15">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2983285898-17">(</span><span class="ss">:name</span><span class="p" data-group-id="2983285898-17">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">set</span><span class="p" data-group-id="2983285898-18">(</span><span class="p" data-group-id="2983285898-19">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="2983285898-19">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">as</span><span class="p">:</span><span class="w"> </span><span class="ss">:raise</span><span class="p" data-group-id="2983285898-18">)</span><span class="w">
</span><span class="p" data-group-id="2983285898-20">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p" data-group-id="2983285898-20">}</span></code></pre>
  </section>
</section>
<section class="detail" id="set!/3">

  <div class="detail-header">
    <a href="#set!/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set!(s, lens, a)</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L271" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> set!(s, <a href="#t:t/2">t</a>(s, a), a) :: s when s: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(), a: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Updates the focused part of a structure by setting it to a new value.</p><p>Raises <a href="https://hexdocs.pm/elixir/KeyError.html"><code class="inline">KeyError</code></a> if the focus does not exist. The entire structure is
returned with only the focused part changed. All other fields and nested
structures are preserved. Struct types are maintained.</p><p>For non-raising behavior, use <a href="#set/4"><code class="inline">set/4</code></a> instead.</p><h2 id="set!/3-examples" class="section-heading">
  <a href="#set!/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="7864552353-1">(</span><span class="ss">:age</span><span class="p" data-group-id="7864552353-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">set!</span><span class="p" data-group-id="7864552353-2">(</span><span class="p" data-group-id="7864552353-3">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="7864552353-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="mi">31</span><span class="p" data-group-id="7864552353-2">)</span><span class="w">
</span><span class="p" data-group-id="7864552353-4">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="7864552353-4">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="7864552353-5">(</span><span class="ss">:age</span><span class="p" data-group-id="7864552353-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">set!</span><span class="p" data-group-id="7864552353-6">(</span><span class="p" data-group-id="7864552353-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="7864552353-7">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="mi">31</span><span class="p" data-group-id="7864552353-6">)</span><span class="w">
</span><span class="gt">** (KeyError) key :age not found in: %{name: &quot;Alice&quot;}</span></code></pre>
  </section>
</section>
<section class="detail" id="view/3">

    <span id="view/2"></span>

  <div class="detail-header">
    <a href="#view/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">view(s, lens, opts \\ [])</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L352" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> view(s, <a href="#t:t/2">t</a>(s, a), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">keyword</a>()) ::
  <a href="Funx.Monad.Either.html#t:t/2">Funx.Monad.Either.t</a>(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>(), a) | {:ok, a} | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()} | a
when s: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(), a: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Safe version of <a href="#view!/2"><code class="inline">view!/2</code></a> that returns an <code class="inline">Either</code> or tuple instead of raising.</p><p>See the &quot;Safe Operations&quot; section in the module documentation for details
about error handling modes and what exceptions are caught.</p><h2 id="view/3-examples" class="section-heading">
  <a href="#view/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2849501945-1">(</span><span class="ss">:name</span><span class="p" data-group-id="2849501945-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view</span><span class="p" data-group-id="2849501945-2">(</span><span class="p" data-group-id="2849501945-3">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="2849501945-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p" data-group-id="2849501945-2">)</span><span class="w">
</span><span class="p" data-group-id="2849501945-4">%</span><span class="nc" data-group-id="2849501945-4">Funx.Monad.Either.Right</span><span class="p" data-group-id="2849501945-4">{</span><span class="ss">right</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="2849501945-4">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2849501945-5">(</span><span class="ss">:name</span><span class="p" data-group-id="2849501945-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view</span><span class="p" data-group-id="2849501945-6">(</span><span class="p" data-group-id="2849501945-7">%{</span><span class="p" data-group-id="2849501945-7">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p" data-group-id="2849501945-6">)</span><span class="w">
</span><span class="p" data-group-id="2849501945-8">%</span><span class="nc" data-group-id="2849501945-8">Funx.Monad.Either.Left</span><span class="p" data-group-id="2849501945-8">{</span><span class="ss">left</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2849501945-9">%</span><span class="nc" data-group-id="2849501945-9">KeyError</span><span class="p" data-group-id="2849501945-9">{</span><span class="ss">key</span><span class="p">:</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="ss">term</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2849501945-10">%{</span><span class="p" data-group-id="2849501945-10">}</span><span class="p" data-group-id="2849501945-9">}</span><span class="p" data-group-id="2849501945-8">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2849501945-11">(</span><span class="ss">:age</span><span class="p" data-group-id="2849501945-11">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view</span><span class="p" data-group-id="2849501945-12">(</span><span class="p" data-group-id="2849501945-13">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p" data-group-id="2849501945-13">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="ss">as</span><span class="p">:</span><span class="w"> </span><span class="ss">:tuple</span><span class="p" data-group-id="2849501945-12">)</span><span class="w">
</span><span class="p" data-group-id="2849501945-14">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p" data-group-id="2849501945-14">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2849501945-15">(</span><span class="ss">:age</span><span class="p" data-group-id="2849501945-15">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view</span><span class="p" data-group-id="2849501945-16">(</span><span class="p" data-group-id="2849501945-17">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p" data-group-id="2849501945-17">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p">,</span><span class="w"> </span><span class="ss">as</span><span class="p">:</span><span class="w"> </span><span class="ss">:raise</span><span class="p" data-group-id="2849501945-16">)</span><span class="w">
</span><span class="mi">30</span></code></pre>
  </section>
</section>
<section class="detail" id="view!/2">

  <div class="detail-header">
    <a href="#view!/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">view!(s, lens)</h1>

      <a href="https://github.com/JKWA/funx/blob/v0.3.0/lib/optics/lens.ex#L246" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> view!(s, <a href="#t:t/2">t</a>(s, a)) :: a when s: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(), a: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Extracts the focused part of a structure using a lens.</p><p>Raises <a href="https://hexdocs.pm/elixir/KeyError.html"><code class="inline">KeyError</code></a> if the focus does not exist (e.g., missing map key).
For non-raising behavior, use <a href="#view/3"><code class="inline">view/3</code></a> instead.</p><h2 id="view!/2-examples" class="section-heading">
  <a href="#view!/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2484886259-1">(</span><span class="ss">:name</span><span class="p" data-group-id="2484886259-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="2484886259-2">(</span><span class="p" data-group-id="2484886259-3">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="2484886259-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p" data-group-id="2484886259-2">)</span><span class="w">
</span><span class="s">&quot;Alice&quot;</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">lens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="2484886259-4">(</span><span class="ss">:name</span><span class="p" data-group-id="2484886259-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Funx.Optics.Lens</span><span class="o">.</span><span class="n">view!</span><span class="p" data-group-id="2484886259-5">(</span><span class="p" data-group-id="2484886259-6">%{</span><span class="p" data-group-id="2484886259-6">}</span><span class="p">,</span><span class="w"> </span><span class="n">lens</span><span class="p" data-group-id="2484886259-5">)</span><span class="w">
</span><span class="gt">** (KeyError) key :name not found in: %{}</span></code></pre>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/funx/0.3.0" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/funx/0.3.0">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="funx.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.34.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.34.2">
    <meta name="project" content="funx v0.1.5">


    <title>Funx.Errors.ValidationError Usage Rules â€” funx v0.1.5</title>
    <link rel="stylesheet" href="dist/html-elixir-F2VRIOKR.css" />


      <link rel="canonical" href="https://hexdocs.pm/funx/errors-validation-error-usage-rules.html" />

    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-6F2C41C4.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-YIPIRHGU.js"></script>

  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
funx
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.1.5
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of funx</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/JKWA/funx/blob/v0.1.5/lib/errors/validation_error/usage-rules.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>


    <span><code class="inline">Funx.Errors.ValidationError</code> Usage Rules</span>
  </h1>

<h2 id="core-concepts" class="section-heading">
  <a href="#core-concepts" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Core Concepts</span>
</h2>
<p><strong>Domain Validation</strong>: User-facing validation errors with structured messages</p><ul><li>Wraps one or more validation failure messages</li><li>Used with <code class="inline">Either.Left</code> to represent validation failures</li><li>Composable and mergeable for comprehensive error collection</li></ul><p><strong>Either Integration</strong>: Primary use in Either-based validation chains</p><ul><li><code class="inline">ValidationError</code> as Left value in <code class="inline">Either.Left</code> </li><li>Integrates with <code class="inline">Either.validate/2</code> for comprehensive validation</li><li>Use <code class="inline">map_left</code> to wrap errors in ValidationError struct</li></ul><p><strong>Appendable Composition</strong>: Combine multiple validation errors</p><ul><li><code class="inline">merge/2</code> - combines two ValidationError structs</li><li><code class="inline">Appendable</code> protocol - enables automatic error accumulation</li><li><code class="inline">empty/0</code> - provides identity for composition</li></ul><h2 id="quick-patterns" class="section-heading">
  <a href="#quick-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Quick Patterns</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.Errors.ValidationError</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Monad</span><span class="p">,</span><span class="w"> </span><span class="ss">only</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3231291240-1">[</span><span class="ss">map</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">bind</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="3231291240-1">]</span><span class="w">

</span><span class="c1"># Single validator returning ValidationError</span><span class="w">
</span><span class="n">validate_positive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="3231291240-2">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="3231291240-3">do</span><span class="w">
    </span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="p" data-group-id="3231291240-4">(</span><span class="n">x</span><span class="p" data-group-id="3231291240-4">)</span><span class="w">
  </span><span class="k" data-group-id="3231291240-3">else</span><span class="w">
    </span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="3231291240-5">(</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="3231291240-6">(</span><span class="s">&quot;Value must be positive: </span><span class="si" data-group-id="3231291240-7">#{</span><span class="n">x</span><span class="si" data-group-id="3231291240-7">}</span><span class="s">&quot;</span><span class="p" data-group-id="3231291240-6">)</span><span class="p" data-group-id="3231291240-5">)</span><span class="w">
  </span><span class="k" data-group-id="3231291240-3">end</span><span class="w">
</span><span class="k" data-group-id="3231291240-2">end</span><span class="w">

</span><span class="c1"># PREFERRED: Use Either.validate/2 for comprehensive validation</span><span class="w">
</span><span class="n">validators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3231291240-8">[</span><span class="w">
  </span><span class="k" data-group-id="3231291240-9">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">lift_predicate</span><span class="p" data-group-id="3231291240-10">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="3231291240-11">(</span><span class="ni">&amp;1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="3231291240-11">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Must be positive&quot;</span><span class="p" data-group-id="3231291240-10">)</span><span class="w">
           </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">map_left</span><span class="p" data-group-id="3231291240-12">(</span><span class="o">&amp;</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="3231291240-12">)</span><span class="w"> </span><span class="k" data-group-id="3231291240-9">end</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="3231291240-13">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">lift_predicate</span><span class="p" data-group-id="3231291240-14">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="3231291240-15">(</span><span class="n">rem</span><span class="p" data-group-id="3231291240-16">(</span><span class="ni">&amp;1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="3231291240-16">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="3231291240-15">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Must be even&quot;</span><span class="p" data-group-id="3231291240-14">)</span><span class="w"> 
           </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">map_left</span><span class="p" data-group-id="3231291240-17">(</span><span class="o">&amp;</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="3231291240-17">)</span><span class="w"> </span><span class="k" data-group-id="3231291240-13">end</span><span class="w">
</span><span class="p" data-group-id="3231291240-8">]</span><span class="w">

</span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="3231291240-18">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">validators</span><span class="p" data-group-id="3231291240-18">)</span><span class="w">
</span><span class="c1"># Left(ValidationError{errors: [&quot;Must be positive&quot;, &quot;Must be even&quot;]})</span><span class="w">

</span><span class="c1"># Form validation with comprehensive errors</span><span class="w">
</span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="3231291240-19">(</span><span class="n">form_data</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3231291240-20">[</span><span class="w">
  </span><span class="o">&amp;</span><span class="n">validate_name_field</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="o">&amp;</span><span class="n">validate_email_field</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> 
  </span><span class="o">&amp;</span><span class="n">validate_age_field</span><span class="o">/</span><span class="mi">1</span><span class="w">
</span><span class="p" data-group-id="3231291240-20">]</span><span class="p" data-group-id="3231291240-19">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">map_left</span><span class="p" data-group-id="3231291240-21">(</span><span class="o">&amp;</span><span class="n">format_validation_response</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="3231291240-21">)</span></code></pre><h2 id="key-rules" class="section-heading">
  <a href="#key-rules" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Key Rules</span>
</h2>
<ul><li><strong>Always wrap in Either.Left</strong> for validation failures - never use bare ValidationError</li><li><strong>Use list format for errors</strong> - <code class="inline">[&quot;error1&quot;, &quot;error2&quot;]</code> not single strings</li><li><strong>Prefer Either.validate/2</strong> over manual error accumulation</li><li><strong>Use map_left to wrap</strong> regular error messages in ValidationError struct</li><li><strong>Implement Exception</strong> behavior when validation must halt execution</li><li><strong>Merge compatible</strong> - use <code class="inline">merge/2</code> to combine multiple ValidationError instances</li></ul><h2 id="when-to-use" class="section-heading">
  <a href="#when-to-use" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">When to Use</span>
</h2>
<ul><li>Form validation with multiple field errors</li><li>Domain validation that collects all problems</li><li>API validation responses that need comprehensive error lists</li><li>Business rule validation with structured error reporting</li><li>Validation chains where partial success isn't meaningful</li></ul><h2 id="anti-patterns" class="section-heading">
  <a href="#anti-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Anti-Patterns</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Don&#39;t use ValidationError directly without Either</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">validate_user</span><span class="p" data-group-id="7168498588-1">(</span><span class="n">user</span><span class="p" data-group-id="7168498588-1">)</span><span class="w"> </span><span class="k" data-group-id="7168498588-2">do</span><span class="w">
  </span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="7168498588-3">(</span><span class="s">&quot;Invalid user&quot;</span><span class="p" data-group-id="7168498588-3">)</span><span class="w">  </span><span class="c1"># No context!</span><span class="w">
</span><span class="k" data-group-id="7168498588-2">end</span><span class="w">

</span><span class="c1"># Don&#39;t mix ValidationError with simple strings in Left</span><span class="w">
</span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="7168498588-4">(</span><span class="s">&quot;simple error&quot;</span><span class="p" data-group-id="7168498588-4">)</span><span class="w">  </span><span class="c1"># Then later...</span><span class="w">
</span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="7168498588-5">(</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="7168498588-6">(</span><span class="s">&quot;structured error&quot;</span><span class="p" data-group-id="7168498588-6">)</span><span class="p" data-group-id="7168498588-5">)</span><span class="w">  </span><span class="c1"># Inconsistent!</span><span class="w">

</span><span class="c1"># Don&#39;t forget to accumulate errors</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">validate_fields</span><span class="p" data-group-id="7168498588-7">(</span><span class="n">data</span><span class="p" data-group-id="7168498588-7">)</span><span class="w"> </span><span class="k" data-group-id="7168498588-8">do</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="n">validate_name</span><span class="p" data-group-id="7168498588-9">(</span><span class="n">data</span><span class="o">.</span><span class="n">name</span><span class="p" data-group-id="7168498588-9">)</span><span class="w"> </span><span class="k" data-group-id="7168498588-10">do</span><span class="w">
    </span><span class="p" data-group-id="7168498588-11">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">name_error</span><span class="p" data-group-id="7168498588-11">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="7168498588-12">(</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="7168498588-13">(</span><span class="n">name_error</span><span class="p" data-group-id="7168498588-13">)</span><span class="p" data-group-id="7168498588-12">)</span><span class="w">
    </span><span class="p" data-group-id="7168498588-14">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="7168498588-14">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="k">case</span><span class="w"> </span><span class="n">validate_email</span><span class="p" data-group-id="7168498588-15">(</span><span class="n">data</span><span class="o">.</span><span class="n">email</span><span class="p" data-group-id="7168498588-15">)</span><span class="w"> </span><span class="k" data-group-id="7168498588-16">do</span><span class="w">  </span><span class="c1"># Lost name validation!</span><span class="w">
        </span><span class="p" data-group-id="7168498588-17">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">email_error</span><span class="p" data-group-id="7168498588-17">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="7168498588-18">(</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="7168498588-19">(</span><span class="n">email_error</span><span class="p" data-group-id="7168498588-19">)</span><span class="p" data-group-id="7168498588-18">)</span><span class="w">
        </span><span class="p" data-group-id="7168498588-20">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="7168498588-20">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="p" data-group-id="7168498588-21">(</span><span class="n">data</span><span class="p" data-group-id="7168498588-21">)</span><span class="w">
      </span><span class="k" data-group-id="7168498588-16">end</span><span class="w">
  </span><span class="k" data-group-id="7168498588-10">end</span><span class="w">
</span><span class="k" data-group-id="7168498588-8">end</span><span class="w">

</span><span class="c1"># Don&#39;t create ValidationError with single string when you need lists</span><span class="w">
</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="7168498588-22">(</span><span class="s">&quot;single error&quot;</span><span class="p" data-group-id="7168498588-22">)</span><span class="w">  </span><span class="c1"># Use list format for consistency</span></code></pre><h2 id="testing" class="section-heading">
  <a href="#testing" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Testing</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="n">test</span><span class="w"> </span><span class="s">&quot;validation error accumulation&quot;</span><span class="w"> </span><span class="k" data-group-id="6941572874-1">do</span><span class="w">
  </span><span class="n">validators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6941572874-2">[</span><span class="w">
    </span><span class="k" data-group-id="6941572874-3">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="p" data-group-id="6941572874-4">(</span><span class="n">x</span><span class="p" data-group-id="6941572874-4">)</span><span class="p">,</span><span class="w"> 
            </span><span class="ss">else</span><span class="p">:</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="6941572874-5">(</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="6941572874-6">(</span><span class="p" data-group-id="6941572874-7">[</span><span class="s">&quot;must be positive&quot;</span><span class="p" data-group-id="6941572874-7">]</span><span class="p" data-group-id="6941572874-6">)</span><span class="p" data-group-id="6941572874-5">)</span><span class="w"> </span><span class="k" data-group-id="6941572874-3">end</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="6941572874-8">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">rem</span><span class="p" data-group-id="6941572874-9">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="6941572874-9">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="p" data-group-id="6941572874-10">(</span><span class="n">x</span><span class="p" data-group-id="6941572874-10">)</span><span class="p">,</span><span class="w"> 
            </span><span class="ss">else</span><span class="p">:</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="6941572874-11">(</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="6941572874-12">(</span><span class="p" data-group-id="6941572874-13">[</span><span class="s">&quot;must be even&quot;</span><span class="p" data-group-id="6941572874-13">]</span><span class="p" data-group-id="6941572874-12">)</span><span class="p" data-group-id="6941572874-11">)</span><span class="w"> </span><span class="k" data-group-id="6941572874-8">end</span><span class="w">
  </span><span class="p" data-group-id="6941572874-2">]</span><span class="w">
  
  </span><span class="k">case</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="6941572874-14">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">validators</span><span class="p" data-group-id="6941572874-14">)</span><span class="w"> </span><span class="k" data-group-id="6941572874-15">do</span><span class="w">
    </span><span class="p" data-group-id="6941572874-16">%</span><span class="nc" data-group-id="6941572874-16">Left</span><span class="p" data-group-id="6941572874-16">{</span><span class="ss">left</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6941572874-17">%</span><span class="nc" data-group-id="6941572874-17">ValidationError</span><span class="p" data-group-id="6941572874-17">{</span><span class="ss">errors</span><span class="p">:</span><span class="w"> </span><span class="n">errors</span><span class="p" data-group-id="6941572874-17">}</span><span class="p" data-group-id="6941572874-16">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="n">assert</span><span class="w"> </span><span class="s">&quot;must be positive&quot;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">errors</span><span class="w">
      </span><span class="n">assert</span><span class="w"> </span><span class="s">&quot;must be even&quot;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">errors</span><span class="w">
      </span><span class="n">assert</span><span class="w"> </span><span class="n">length</span><span class="p" data-group-id="6941572874-18">(</span><span class="n">errors</span><span class="p" data-group-id="6941572874-18">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">flunk</span><span class="p" data-group-id="6941572874-19">(</span><span class="s">&quot;Expected validation errors&quot;</span><span class="p" data-group-id="6941572874-19">)</span><span class="w">
  </span><span class="k" data-group-id="6941572874-15">end</span><span class="w">
</span><span class="k" data-group-id="6941572874-1">end</span><span class="w">

</span><span class="n">test</span><span class="w"> </span><span class="s">&quot;ValidationError composition&quot;</span><span class="w"> </span><span class="k" data-group-id="6941572874-20">do</span><span class="w">
  </span><span class="n">ve1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="6941572874-21">(</span><span class="p" data-group-id="6941572874-22">[</span><span class="s">&quot;error 1&quot;</span><span class="p" data-group-id="6941572874-22">]</span><span class="p" data-group-id="6941572874-21">)</span><span class="w">
  </span><span class="n">ve2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="6941572874-23">(</span><span class="p" data-group-id="6941572874-24">[</span><span class="s">&quot;error 2&quot;</span><span class="p" data-group-id="6941572874-24">]</span><span class="p" data-group-id="6941572874-23">)</span><span class="w"> 
  
  </span><span class="n">merged</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">merge</span><span class="p" data-group-id="6941572874-25">(</span><span class="n">ve1</span><span class="p">,</span><span class="w"> </span><span class="n">ve2</span><span class="p" data-group-id="6941572874-25">)</span><span class="w">
  </span><span class="n">assert</span><span class="w"> </span><span class="n">merged</span><span class="o">.</span><span class="n">errors</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p" data-group-id="6941572874-26">[</span><span class="s">&quot;error 1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;error 2&quot;</span><span class="p" data-group-id="6941572874-26">]</span><span class="w">
</span><span class="k" data-group-id="6941572874-20">end</span><span class="w">

</span><span class="n">test</span><span class="w"> </span><span class="s">&quot;Exception behavior&quot;</span><span class="w"> </span><span class="k" data-group-id="6941572874-27">do</span><span class="w">
  </span><span class="n">assert_raise</span><span class="w"> </span><span class="nc">ValidationError</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;must be positive&quot;</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="6941572874-28">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="k">raise</span><span class="w"> </span><span class="nc">ValidationError</span><span class="p">,</span><span class="w"> </span><span class="ss">errors</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6941572874-29">[</span><span class="s">&quot;must be positive&quot;</span><span class="p" data-group-id="6941572874-29">]</span><span class="w">
  </span><span class="k" data-group-id="6941572874-28">end</span><span class="w">
</span><span class="k" data-group-id="6941572874-27">end</span></code></pre><h2 id="core-functions" class="section-heading">
  <a href="#core-functions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Core Functions</span>
</h2>
<h3 id="construction-functions" class="section-heading">
  <a href="#construction-functions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Construction Functions</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Create from list of error messages</span><span class="w">
</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="8616299248-1">(</span><span class="p" data-group-id="8616299248-2">[</span><span class="s">&quot;must be positive&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;must be even&quot;</span><span class="p" data-group-id="8616299248-2">]</span><span class="p" data-group-id="8616299248-1">)</span><span class="w">

</span><span class="c1"># Create from single error message  </span><span class="w">
</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="8616299248-3">(</span><span class="s">&quot;must be positive&quot;</span><span class="p" data-group-id="8616299248-3">)</span><span class="w">
</span><span class="c1"># Result: %ValidationError{errors: [&quot;must be positive&quot;]}</span><span class="w">

</span><span class="c1"># Empty validation error (identity for composition)</span><span class="w">
</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">empty</span><span class="p" data-group-id="8616299248-4">(</span><span class="p" data-group-id="8616299248-4">)</span><span class="w">
</span><span class="c1"># Result: %ValidationError{errors: []}</span><span class="w">

</span><span class="c1"># Convert from tagged error tuple</span><span class="w">
</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">from_tagged</span><span class="p" data-group-id="8616299248-5">(</span><span class="p" data-group-id="8616299248-6">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8616299248-7">[</span><span class="s">&quot;field errors&quot;</span><span class="p" data-group-id="8616299248-7">]</span><span class="p" data-group-id="8616299248-6">}</span><span class="p" data-group-id="8616299248-5">)</span></code></pre><h3 id="composition-functions" class="section-heading">
  <a href="#composition-functions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Composition Functions</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Merge two ValidationError structs</span><span class="w">
</span><span class="n">ve1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="7318018243-1">(</span><span class="p" data-group-id="7318018243-2">[</span><span class="s">&quot;error 1&quot;</span><span class="p" data-group-id="7318018243-2">]</span><span class="p" data-group-id="7318018243-1">)</span><span class="w">
</span><span class="n">ve2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="7318018243-3">(</span><span class="p" data-group-id="7318018243-4">[</span><span class="s">&quot;error 2&quot;</span><span class="p" data-group-id="7318018243-4">]</span><span class="p" data-group-id="7318018243-3">)</span><span class="w">
</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">merge</span><span class="p" data-group-id="7318018243-5">(</span><span class="n">ve1</span><span class="p">,</span><span class="w"> </span><span class="n">ve2</span><span class="p" data-group-id="7318018243-5">)</span><span class="w">
</span><span class="c1"># Result: %ValidationError{errors: [&quot;error 1&quot;, &quot;error 2&quot;]}</span><span class="w">

</span><span class="c1"># Appendable protocol (automatic with Either.validate/2)</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Appendable</span><span class="w">
</span><span class="n">append</span><span class="p" data-group-id="7318018243-6">(</span><span class="n">ve1</span><span class="p">,</span><span class="w"> </span><span class="n">ve2</span><span class="p" data-group-id="7318018243-6">)</span><span class="w">  </span><span class="c1"># Same as merge/2</span></code></pre><h3 id="exception-functions" class="section-heading">
  <a href="#exception-functions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Exception Functions</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Raise as exception with error list</span><span class="w">
</span><span class="k">raise</span><span class="w"> </span><span class="nc">ValidationError</span><span class="p">,</span><span class="w"> </span><span class="ss">errors</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5037551016-1">[</span><span class="s">&quot;critical validation failure&quot;</span><span class="p" data-group-id="5037551016-1">]</span><span class="w">

</span><span class="c1"># Raise as exception with single message</span><span class="w">
</span><span class="k">raise</span><span class="w"> </span><span class="nc">ValidationError</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;critical validation failure&quot;</span><span class="w">  

</span><span class="c1"># Get exception message</span><span class="w">
</span><span class="nc">Exception</span><span class="o">.</span><span class="n">message</span><span class="p" data-group-id="5037551016-2">(</span><span class="p" data-group-id="5037551016-3">%</span><span class="nc" data-group-id="5037551016-3">ValidationError</span><span class="p" data-group-id="5037551016-3">{</span><span class="ss">errors</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5037551016-4">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p" data-group-id="5037551016-4">]</span><span class="p" data-group-id="5037551016-3">}</span><span class="p" data-group-id="5037551016-2">)</span><span class="w">
</span><span class="c1"># Result: &quot;a, b&quot;</span></code></pre><h2 id="integration-with-either" class="section-heading">
  <a href="#integration-with-either" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Integration with Either</span>
</h2>
<h3 id="validation-chains" class="section-heading">
  <a href="#validation-chains" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Validation Chains</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Sequential validation (fails on first error)</span><span class="w">
</span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="p" data-group-id="9859866266-1">(</span><span class="n">user_input</span><span class="p" data-group-id="9859866266-1">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="9859866266-2">(</span><span class="o">&amp;</span><span class="n">parse_user_data</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="9859866266-2">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="9859866266-3">(</span><span class="o">&amp;</span><span class="n">validate_business_rules</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="9859866266-3">)</span><span class="w">  </span><span class="c1"># Returns Either with ValidationError</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="9859866266-4">(</span><span class="o">&amp;</span><span class="n">save_to_database</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="9859866266-4">)</span><span class="w">

</span><span class="c1"># Comprehensive validation (collects all errors)  </span><span class="w">
</span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="9859866266-5">(</span><span class="n">user_data</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9859866266-6">[</span><span class="w">
  </span><span class="o">&amp;</span><span class="n">validate_name</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">     </span><span class="c1"># Each returns Either Left(ValidationError) or Right</span><span class="w">
  </span><span class="o">&amp;</span><span class="n">validate_email</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="o">&amp;</span><span class="n">validate_age</span><span class="o">/</span><span class="mi">1</span><span class="w">
</span><span class="p" data-group-id="9859866266-6">]</span><span class="p" data-group-id="9859866266-5">)</span></code></pre><h3 id="converting-simple-errors-to-validationerror" class="section-heading">
  <a href="#converting-simple-errors-to-validationerror" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Converting Simple Errors to ValidationError</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Wrap simple error messages</span><span class="w">
</span><span class="n">simple_validator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="5220510854-1">fn</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="n">valid?</span><span class="p" data-group-id="5220510854-2">(</span><span class="n">data</span><span class="p" data-group-id="5220510854-2">)</span><span class="w"> </span><span class="k" data-group-id="5220510854-3">do</span><span class="w">
    </span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="p" data-group-id="5220510854-4">(</span><span class="n">data</span><span class="p" data-group-id="5220510854-4">)</span><span class="w">
  </span><span class="k" data-group-id="5220510854-3">else</span><span class="w">
    </span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="5220510854-5">(</span><span class="s">&quot;Invalid data&quot;</span><span class="p" data-group-id="5220510854-5">)</span><span class="w">
  </span><span class="k" data-group-id="5220510854-3">end</span><span class="w">
</span><span class="k" data-group-id="5220510854-1">end</span><span class="w">

</span><span class="c1"># Convert to ValidationError format</span><span class="w">
</span><span class="n">enhanced_validator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="5220510854-6">fn</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="n">simple_validator</span><span class="o">.</span><span class="p" data-group-id="5220510854-7">(</span><span class="n">data</span><span class="p" data-group-id="5220510854-7">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">map_left</span><span class="p" data-group-id="5220510854-8">(</span><span class="o">&amp;</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="5220510854-8">)</span><span class="w">
</span><span class="k" data-group-id="5220510854-6">end</span><span class="w">

</span><span class="c1"># Or use lift_predicate with map_left</span><span class="w">
</span><span class="n">validate_positive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="5220510854-9">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="nc">Either</span><span class="o">.</span><span class="n">lift_predicate</span><span class="p" data-group-id="5220510854-10">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="5220510854-11">(</span><span class="ni">&amp;1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="5220510854-11">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Must be positive&quot;</span><span class="p" data-group-id="5220510854-10">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">map_left</span><span class="p" data-group-id="5220510854-12">(</span><span class="o">&amp;</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="5220510854-12">)</span><span class="w">
</span><span class="k" data-group-id="5220510854-9">end</span></code></pre><h3 id="form-validation-pattern" class="section-heading">
  <a href="#form-validation-pattern" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Form Validation Pattern</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">validate_registration_form</span><span class="p" data-group-id="3597333392-1">(</span><span class="n">form_data</span><span class="p" data-group-id="3597333392-1">)</span><span class="w"> </span><span class="k" data-group-id="3597333392-2">do</span><span class="w">
  </span><span class="n">validators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3597333392-3">[</span><span class="w">
    </span><span class="n">create_name_validator</span><span class="p" data-group-id="3597333392-4">(</span><span class="n">form_data</span><span class="p" data-group-id="3597333392-4">)</span><span class="p">,</span><span class="w">
    </span><span class="n">create_email_validator</span><span class="p" data-group-id="3597333392-5">(</span><span class="n">form_data</span><span class="p" data-group-id="3597333392-5">)</span><span class="p">,</span><span class="w"> 
    </span><span class="n">create_password_validator</span><span class="p" data-group-id="3597333392-6">(</span><span class="n">form_data</span><span class="p" data-group-id="3597333392-6">)</span><span class="w">
  </span><span class="p" data-group-id="3597333392-3">]</span><span class="w">
  
  </span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="3597333392-7">(</span><span class="n">form_data</span><span class="p">,</span><span class="w"> </span><span class="n">validators</span><span class="p" data-group-id="3597333392-7">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="k" data-group-id="3597333392-8">do</span><span class="w">
    </span><span class="p" data-group-id="3597333392-9">%</span><span class="nc" data-group-id="3597333392-9">Right</span><span class="p" data-group-id="3597333392-9">{</span><span class="ss">right</span><span class="p">:</span><span class="w"> </span><span class="n">validated_data</span><span class="p" data-group-id="3597333392-9">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> 
      </span><span class="p" data-group-id="3597333392-10">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">validated_data</span><span class="p" data-group-id="3597333392-10">}</span><span class="w">
    </span><span class="p" data-group-id="3597333392-11">%</span><span class="nc" data-group-id="3597333392-11">Left</span><span class="p" data-group-id="3597333392-11">{</span><span class="ss">left</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3597333392-12">%</span><span class="nc" data-group-id="3597333392-12">ValidationError</span><span class="p" data-group-id="3597333392-12">{</span><span class="ss">errors</span><span class="p">:</span><span class="w"> </span><span class="n">errors</span><span class="p" data-group-id="3597333392-12">}</span><span class="p" data-group-id="3597333392-11">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="p" data-group-id="3597333392-13">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3597333392-14">%{</span><span class="ss">validation_errors</span><span class="p">:</span><span class="w"> </span><span class="n">errors</span><span class="p" data-group-id="3597333392-14">}</span><span class="p" data-group-id="3597333392-13">}</span><span class="w">
  </span><span class="k" data-group-id="3597333392-8">end</span><span class="w">
</span><span class="k" data-group-id="3597333392-2">end</span><span class="w">

</span><span class="kd">defp</span><span class="w"> </span><span class="nf">create_name_validator</span><span class="p" data-group-id="3597333392-15">(</span><span class="n">form_data</span><span class="p" data-group-id="3597333392-15">)</span><span class="w"> </span><span class="k" data-group-id="3597333392-16">do</span><span class="w">
  </span><span class="k" data-group-id="3597333392-17">fn</span><span class="w"> </span><span class="c">_data</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">length</span><span class="p" data-group-id="3597333392-18">(</span><span class="n">form_data</span><span class="o">.</span><span class="n">name</span><span class="p" data-group-id="3597333392-18">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="3597333392-19">do</span><span class="w">
      </span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="p" data-group-id="3597333392-20">(</span><span class="n">form_data</span><span class="o">.</span><span class="n">name</span><span class="p" data-group-id="3597333392-20">)</span><span class="w">
    </span><span class="k" data-group-id="3597333392-19">else</span><span class="w">
      </span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="3597333392-21">(</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="3597333392-22">(</span><span class="p" data-group-id="3597333392-23">[</span><span class="s">&quot;Name is required&quot;</span><span class="p" data-group-id="3597333392-23">]</span><span class="p" data-group-id="3597333392-22">)</span><span class="p" data-group-id="3597333392-21">)</span><span class="w">
    </span><span class="k" data-group-id="3597333392-19">end</span><span class="w">
  </span><span class="k" data-group-id="3597333392-17">end</span><span class="w">
</span><span class="k" data-group-id="3597333392-16">end</span></code></pre><h2 id="protocol-implementations" class="section-heading">
  <a href="#protocol-implementations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Protocol Implementations</span>
</h2>
<h3 id="string-chars" class="section-heading">
  <a href="#string-chars" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">String.Chars</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="n">to_string</span><span class="p" data-group-id="9944431090-1">(</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="9944431090-2">(</span><span class="p" data-group-id="9944431090-3">[</span><span class="s">&quot;error 1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;error 2&quot;</span><span class="p" data-group-id="9944431090-3">]</span><span class="p" data-group-id="9944431090-2">)</span><span class="p" data-group-id="9944431090-1">)</span><span class="w">
</span><span class="c1"># Result: &quot;ValidationError(error 1, error 2)&quot;</span><span class="w">

</span><span class="n">to_string</span><span class="p" data-group-id="9944431090-4">(</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">empty</span><span class="p" data-group-id="9944431090-5">(</span><span class="p" data-group-id="9944431090-5">)</span><span class="p" data-group-id="9944431090-4">)</span><span class="w">
</span><span class="c1"># Result: &quot;ValidationError()&quot;</span></code></pre><h3 id="funx-eq-and-funx-ord" class="section-heading">
  <a href="#funx-eq-and-funx-ord" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Funx.Eq and Funx.Ord</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Comparison based on errors list</span><span class="w">
</span><span class="n">ve1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="7025678829-1">(</span><span class="p" data-group-id="7025678829-2">[</span><span class="s">&quot;a&quot;</span><span class="p" data-group-id="7025678829-2">]</span><span class="p" data-group-id="7025678829-1">)</span><span class="w">
</span><span class="n">ve2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="7025678829-3">(</span><span class="p" data-group-id="7025678829-4">[</span><span class="s">&quot;b&quot;</span><span class="p" data-group-id="7025678829-4">]</span><span class="p" data-group-id="7025678829-3">)</span><span class="w">

</span><span class="nc">Eq</span><span class="o">.</span><span class="n">eq?</span><span class="p" data-group-id="7025678829-5">(</span><span class="n">ve1</span><span class="p">,</span><span class="w"> </span><span class="n">ve1</span><span class="p" data-group-id="7025678829-5">)</span><span class="w">        </span><span class="c1"># true  </span><span class="w">
</span><span class="nc">Eq</span><span class="o">.</span><span class="n">eq?</span><span class="p" data-group-id="7025678829-6">(</span><span class="n">ve1</span><span class="p">,</span><span class="w"> </span><span class="n">ve2</span><span class="p" data-group-id="7025678829-6">)</span><span class="w">        </span><span class="c1"># false</span><span class="w">
</span><span class="nc">Ord</span><span class="o">.</span><span class="n">lt?</span><span class="p" data-group-id="7025678829-7">(</span><span class="n">ve1</span><span class="p">,</span><span class="w"> </span><span class="n">ve2</span><span class="p" data-group-id="7025678829-7">)</span><span class="w">       </span><span class="c1"># true (&quot;a&quot; &lt; &quot;b&quot;)</span></code></pre><h3 id="funx-appendable" class="section-heading">
  <a href="#funx-appendable" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Funx.Appendable</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Automatic composition in Either.validate/2</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Appendable</span><span class="w">

</span><span class="n">ve1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="8532781793-1">(</span><span class="p" data-group-id="8532781793-2">[</span><span class="s">&quot;error 1&quot;</span><span class="p" data-group-id="8532781793-2">]</span><span class="p" data-group-id="8532781793-1">)</span><span class="w">
</span><span class="n">ve2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="8532781793-3">(</span><span class="p" data-group-id="8532781793-4">[</span><span class="s">&quot;error 2&quot;</span><span class="p" data-group-id="8532781793-4">]</span><span class="p" data-group-id="8532781793-3">)</span><span class="w">

</span><span class="n">append</span><span class="p" data-group-id="8532781793-5">(</span><span class="n">ve1</span><span class="p">,</span><span class="w"> </span><span class="n">ve2</span><span class="p" data-group-id="8532781793-5">)</span><span class="w">
</span><span class="c1"># Result: %ValidationError{errors: [&quot;error 1&quot;, &quot;error 2&quot;]}</span></code></pre><h2 id="advanced-patterns" class="section-heading">
  <a href="#advanced-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Advanced Patterns</span>
</h2>
<h3 id="curried-validation-functions" class="section-heading">
  <a href="#curried-validation-functions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Curried Validation Functions</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Create reusable validators with currying</span><span class="w">
</span><span class="n">validate_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curry_r</span><span class="p" data-group-id="6882815703-1">(</span><span class="o">&amp;</span><span class="n">ensure_height</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="6882815703-1">)</span><span class="w">
</span><span class="n">validate_age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curry_r</span><span class="p" data-group-id="6882815703-2">(</span><span class="o">&amp;</span><span class="n">ensure_age</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="6882815703-2">)</span><span class="w">

</span><span class="c1"># Apply to specific context</span><span class="w">
</span><span class="n">patron</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="6882815703-3">(</span><span class="p" data-group-id="6882815703-4">[</span><span class="w">
  </span><span class="n">validate_height</span><span class="o">.</span><span class="p" data-group-id="6882815703-5">(</span><span class="n">ride</span><span class="p" data-group-id="6882815703-5">)</span><span class="p">,</span><span class="w">
  </span><span class="n">validate_age</span><span class="o">.</span><span class="p" data-group-id="6882815703-6">(</span><span class="n">ride</span><span class="p" data-group-id="6882815703-6">)</span><span class="w"> 
</span><span class="p" data-group-id="6882815703-4">]</span><span class="p" data-group-id="6882815703-3">)</span></code></pre><h3 id="fallback-validation-with-or_else" class="section-heading">
  <a href="#fallback-validation-with-or_else" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fallback Validation with or_else</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Try primary validation, fallback to secondary  </span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">ensure_vip_or_fast_pass</span><span class="p" data-group-id="8016861828-1">(</span><span class="n">patron</span><span class="p">,</span><span class="w"> </span><span class="n">ride</span><span class="p" data-group-id="8016861828-1">)</span><span class="w"> </span><span class="k" data-group-id="8016861828-2">do</span><span class="w">
  </span><span class="n">patron</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">lift_predicate</span><span class="p" data-group-id="8016861828-3">(</span><span class="o">&amp;</span><span class="nc">Patron</span><span class="o">.</span><span class="n">vip?</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span><span class="si" data-group-id="8016861828-4">#{</span><span class="nc">Patron</span><span class="o">.</span><span class="n">get_name</span><span class="p" data-group-id="8016861828-5">(</span><span class="n">patron</span><span class="p" data-group-id="8016861828-5">)</span><span class="si" data-group-id="8016861828-4">}</span><span class="s"> is not a VIP&quot;</span><span class="p" data-group-id="8016861828-3">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">map_left</span><span class="p" data-group-id="8016861828-6">(</span><span class="o">&amp;</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="8016861828-6">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">or_else</span><span class="p" data-group-id="8016861828-7">(</span><span class="k" data-group-id="8016861828-8">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ensure_fast_pass</span><span class="p" data-group-id="8016861828-9">(</span><span class="n">patron</span><span class="p">,</span><span class="w"> </span><span class="n">ride</span><span class="p" data-group-id="8016861828-9">)</span><span class="w"> </span><span class="k" data-group-id="8016861828-8">end</span><span class="p" data-group-id="8016861828-7">)</span><span class="w">
</span><span class="k" data-group-id="8016861828-2">end</span></code></pre><h3 id="sequential-vs-comprehensive-validation" class="section-heading">
  <a href="#sequential-vs-comprehensive-validation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Sequential vs Comprehensive Validation</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Sequential: stop on first failure (bind)</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">ensure_eligibility</span><span class="p" data-group-id="0921441713-1">(</span><span class="n">patron</span><span class="p">,</span><span class="w"> </span><span class="n">ride</span><span class="p" data-group-id="0921441713-1">)</span><span class="w"> </span><span class="k" data-group-id="0921441713-2">do</span><span class="w">
  </span><span class="n">validate_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curry_r</span><span class="p" data-group-id="0921441713-3">(</span><span class="o">&amp;</span><span class="n">ensure_height</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="0921441713-3">)</span><span class="w">
  
  </span><span class="n">patron</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ensure_age</span><span class="p" data-group-id="0921441713-4">(</span><span class="n">ride</span><span class="p" data-group-id="0921441713-4">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="0921441713-5">(</span><span class="n">validate_height</span><span class="o">.</span><span class="p" data-group-id="0921441713-6">(</span><span class="n">ride</span><span class="p" data-group-id="0921441713-6">)</span><span class="p" data-group-id="0921441713-5">)</span><span class="w">
</span><span class="k" data-group-id="0921441713-2">end</span><span class="w">

</span><span class="c1"># Comprehensive: collect all failures (validate)</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">validate_eligibility</span><span class="p" data-group-id="0921441713-7">(</span><span class="n">patron</span><span class="p">,</span><span class="w"> </span><span class="n">ride</span><span class="p" data-group-id="0921441713-7">)</span><span class="w"> </span><span class="k" data-group-id="0921441713-8">do</span><span class="w">
  </span><span class="n">validate_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curry_r</span><span class="p" data-group-id="0921441713-9">(</span><span class="o">&amp;</span><span class="n">ensure_height</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="0921441713-9">)</span><span class="w">
  </span><span class="n">validate_age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curry_r</span><span class="p" data-group-id="0921441713-10">(</span><span class="o">&amp;</span><span class="n">ensure_age</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="0921441713-10">)</span><span class="w">
  
  </span><span class="n">patron</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="0921441713-11">(</span><span class="p" data-group-id="0921441713-12">[</span><span class="w">
    </span><span class="n">validate_height</span><span class="o">.</span><span class="p" data-group-id="0921441713-13">(</span><span class="n">ride</span><span class="p" data-group-id="0921441713-13">)</span><span class="p">,</span><span class="w">
    </span><span class="n">validate_age</span><span class="o">.</span><span class="p" data-group-id="0921441713-14">(</span><span class="n">ride</span><span class="p" data-group-id="0921441713-14">)</span><span class="w">
  </span><span class="p" data-group-id="0921441713-12">]</span><span class="p" data-group-id="0921441713-11">)</span><span class="w">
</span><span class="k" data-group-id="0921441713-8">end</span></code></pre><h3 id="error-message-transformation" class="section-heading">
  <a href="#error-message-transformation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Error Message Transformation</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Transform detailed errors to user-friendly messages</span><span class="w">
</span><span class="n">validate_eligibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curry_r</span><span class="p" data-group-id="2973089477-1">(</span><span class="k" data-group-id="2973089477-2">fn</span><span class="w"> </span><span class="n">patron</span><span class="p">,</span><span class="w"> </span><span class="n">ride</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="n">validate_eligibility</span><span class="p" data-group-id="2973089477-3">(</span><span class="n">patron</span><span class="p">,</span><span class="w"> </span><span class="n">ride</span><span class="p" data-group-id="2973089477-3">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">map_left</span><span class="p" data-group-id="2973089477-4">(</span><span class="k" data-group-id="2973089477-5">fn</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> 
    </span><span class="s">&quot;</span><span class="si" data-group-id="2973089477-6">#{</span><span class="nc">Patron</span><span class="o">.</span><span class="n">get_name</span><span class="p" data-group-id="2973089477-7">(</span><span class="n">patron</span><span class="p" data-group-id="2973089477-7">)</span><span class="si" data-group-id="2973089477-6">}</span><span class="s"> is not eligible for this ride&quot;</span><span class="w">
  </span><span class="k" data-group-id="2973089477-5">end</span><span class="p" data-group-id="2973089477-4">)</span><span class="w">
</span><span class="k" data-group-id="2973089477-2">end</span><span class="p" data-group-id="2973089477-1">)</span><span class="w">

</span><span class="c1"># Select first error from comprehensive validation</span><span class="w">
</span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="2973089477-8">(</span><span class="n">patron</span><span class="p">,</span><span class="w"> </span><span class="n">validators</span><span class="p" data-group-id="2973089477-8">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">map_left</span><span class="p" data-group-id="2973089477-9">(</span><span class="k" data-group-id="2973089477-10">fn</span><span class="w"> </span><span class="p" data-group-id="2973089477-11">[</span><span class="n">first</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="2973089477-11">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="k" data-group-id="2973089477-10">end</span><span class="p" data-group-id="2973089477-9">)</span></code></pre><h3 id="list-validation-patterns" class="section-heading">
  <a href="#list-validation-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">List Validation Patterns</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Fail-fast list validation (traverse)</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">ensure_group_eligibility</span><span class="p" data-group-id="8018106160-1">(</span><span class="n">patrons</span><span class="p">,</span><span class="w"> </span><span class="n">ride</span><span class="p" data-group-id="8018106160-1">)</span><span class="w"> </span><span class="k" data-group-id="8018106160-2">do</span><span class="w">
  </span><span class="n">eligible_for_ride</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curry_r</span><span class="p" data-group-id="8018106160-3">(</span><span class="o">&amp;</span><span class="n">ensure_eligibility</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="8018106160-3">)</span><span class="w">
  
  </span><span class="nc">Either</span><span class="o">.</span><span class="n">traverse</span><span class="p" data-group-id="8018106160-4">(</span><span class="n">patrons</span><span class="p">,</span><span class="w"> </span><span class="n">eligible_for_ride</span><span class="o">.</span><span class="p" data-group-id="8018106160-5">(</span><span class="n">ride</span><span class="p" data-group-id="8018106160-5">)</span><span class="p" data-group-id="8018106160-4">)</span><span class="w">
</span><span class="k" data-group-id="8018106160-2">end</span><span class="w">

</span><span class="c1"># Comprehensive list validation (traverse_a)</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">validate_group_eligibility</span><span class="p" data-group-id="8018106160-6">(</span><span class="n">patrons</span><span class="p">,</span><span class="w"> </span><span class="n">ride</span><span class="p" data-group-id="8018106160-6">)</span><span class="w"> </span><span class="k" data-group-id="8018106160-7">do</span><span class="w">  
  </span><span class="n">validate_eligibility</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curry_r</span><span class="p" data-group-id="8018106160-8">(</span><span class="o">&amp;</span><span class="n">validate_eligibility</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="8018106160-8">)</span><span class="w">
  
  </span><span class="nc">Either</span><span class="o">.</span><span class="n">traverse_a</span><span class="p" data-group-id="8018106160-9">(</span><span class="n">patrons</span><span class="p">,</span><span class="w"> </span><span class="n">validate_eligibility</span><span class="o">.</span><span class="p" data-group-id="8018106160-10">(</span><span class="n">ride</span><span class="p" data-group-id="8018106160-10">)</span><span class="p" data-group-id="8018106160-9">)</span><span class="w">
</span><span class="k" data-group-id="8018106160-7">end</span></code></pre><h2 id="common-patterns" class="section-heading">
  <a href="#common-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Common Patterns</span>
</h2>
<h3 id="api-validation-response" class="section-heading">
  <a href="#api-validation-response" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">API Validation Response</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">validate_api_request</span><span class="p" data-group-id="6535678428-1">(</span><span class="n">request</span><span class="p" data-group-id="6535678428-1">)</span><span class="w"> </span><span class="k" data-group-id="6535678428-2">do</span><span class="w">
  </span><span class="n">validators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6535678428-3">[</span><span class="w">
    </span><span class="o">&amp;</span><span class="n">validate_authentication</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="o">&amp;</span><span class="n">validate_authorization</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="o">&amp;</span><span class="n">validate_request_format</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="o">&amp;</span><span class="n">validate_business_rules</span><span class="o">/</span><span class="mi">1</span><span class="w">
  </span><span class="p" data-group-id="6535678428-3">]</span><span class="w">
  
  </span><span class="k">case</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="6535678428-4">(</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">validators</span><span class="p" data-group-id="6535678428-4">)</span><span class="w"> </span><span class="k" data-group-id="6535678428-5">do</span><span class="w">
    </span><span class="p" data-group-id="6535678428-6">%</span><span class="nc" data-group-id="6535678428-6">Right</span><span class="p" data-group-id="6535678428-6">{</span><span class="ss">right</span><span class="p">:</span><span class="w"> </span><span class="n">valid_request</span><span class="p" data-group-id="6535678428-6">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="p" data-group-id="6535678428-7">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">valid_request</span><span class="p" data-group-id="6535678428-7">}</span><span class="w">
    </span><span class="p" data-group-id="6535678428-8">%</span><span class="nc" data-group-id="6535678428-8">Left</span><span class="p" data-group-id="6535678428-8">{</span><span class="ss">left</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6535678428-9">%</span><span class="nc" data-group-id="6535678428-9">ValidationError</span><span class="p" data-group-id="6535678428-9">{</span><span class="ss">errors</span><span class="p">:</span><span class="w"> </span><span class="n">errors</span><span class="p" data-group-id="6535678428-9">}</span><span class="p" data-group-id="6535678428-8">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="p" data-group-id="6535678428-10">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6535678428-11">%{</span><span class="w">
        </span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:validation_failed</span><span class="p">,</span><span class="w">
        </span><span class="ss">errors</span><span class="p">:</span><span class="w"> </span><span class="n">errors</span><span class="p">,</span><span class="w">
        </span><span class="ss">timestamp</span><span class="p">:</span><span class="w"> </span><span class="nc">DateTime</span><span class="o">.</span><span class="n">utc_now</span><span class="p" data-group-id="6535678428-12">(</span><span class="p" data-group-id="6535678428-12">)</span><span class="w">
      </span><span class="p" data-group-id="6535678428-11">}</span><span class="p" data-group-id="6535678428-10">}</span><span class="w">
  </span><span class="k" data-group-id="6535678428-5">end</span><span class="w">
</span><span class="k" data-group-id="6535678428-2">end</span></code></pre><h3 id="multi-step-validation" class="section-heading">
  <a href="#multi-step-validation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Multi-Step Validation</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">validate_user_registration</span><span class="p" data-group-id="0787244130-1">(</span><span class="n">data</span><span class="p" data-group-id="0787244130-1">)</span><span class="w"> </span><span class="k" data-group-id="0787244130-2">do</span><span class="w">
  </span><span class="c1"># Step 1: Format validation</span><span class="w">
  </span><span class="n">format_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="0787244130-3">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0787244130-4">[</span><span class="w">
    </span><span class="o">&amp;</span><span class="n">validate_email_format</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="o">&amp;</span><span class="n">validate_password_format</span><span class="o">/</span><span class="mi">1</span><span class="w">
  </span><span class="p" data-group-id="0787244130-4">]</span><span class="p" data-group-id="0787244130-3">)</span><span class="w">
  
  </span><span class="c1"># Step 2: Business rules validation (only if format is valid)</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="n">format_result</span><span class="w"> </span><span class="k" data-group-id="0787244130-5">do</span><span class="w">
    </span><span class="p" data-group-id="0787244130-6">%</span><span class="nc" data-group-id="0787244130-6">Right</span><span class="p" data-group-id="0787244130-6">{</span><span class="ss">right</span><span class="p">:</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="0787244130-6">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="0787244130-7">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0787244130-8">[</span><span class="w">
        </span><span class="o">&amp;</span><span class="n">validate_email_unique</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="o">&amp;</span><span class="n">validate_password_strength</span><span class="o">/</span><span class="mi">1</span><span class="w">
      </span><span class="p" data-group-id="0787244130-8">]</span><span class="p" data-group-id="0787244130-7">)</span><span class="w">
    </span><span class="n">error</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">error</span><span class="w">
  </span><span class="k" data-group-id="0787244130-5">end</span><span class="w">
</span><span class="k" data-group-id="0787244130-2">end</span></code></pre><h3 id="error-recovery" class="section-heading">
  <a href="#error-recovery" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Error Recovery</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">process_with_validation</span><span class="p" data-group-id="5374311991-1">(</span><span class="n">data</span><span class="p" data-group-id="5374311991-1">)</span><span class="w"> </span><span class="k" data-group-id="5374311991-2">do</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="n">validate_strict_rules</span><span class="p" data-group-id="5374311991-3">(</span><span class="n">data</span><span class="p" data-group-id="5374311991-3">)</span><span class="w"> </span><span class="k" data-group-id="5374311991-4">do</span><span class="w">
    </span><span class="p" data-group-id="5374311991-5">%</span><span class="nc" data-group-id="5374311991-5">Right</span><span class="p" data-group-id="5374311991-5">{</span><span class="ss">right</span><span class="p">:</span><span class="w"> </span><span class="n">valid_data</span><span class="p" data-group-id="5374311991-5">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> 
      </span><span class="p" data-group-id="5374311991-6">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">valid_data</span><span class="p" data-group-id="5374311991-6">}</span><span class="w">
    </span><span class="p" data-group-id="5374311991-7">%</span><span class="nc" data-group-id="5374311991-7">Left</span><span class="p" data-group-id="5374311991-7">{</span><span class="ss">left</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5374311991-8">%</span><span class="nc" data-group-id="5374311991-8">ValidationError</span><span class="p" data-group-id="5374311991-8">{</span><span class="ss">errors</span><span class="p">:</span><span class="w"> </span><span class="n">errors</span><span class="p" data-group-id="5374311991-8">}</span><span class="p" data-group-id="5374311991-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="c1"># Try lenient validation on failure</span><span class="w">
      </span><span class="k">if</span><span class="w"> </span><span class="n">recoverable_errors?</span><span class="p" data-group-id="5374311991-9">(</span><span class="n">errors</span><span class="p" data-group-id="5374311991-9">)</span><span class="w"> </span><span class="k" data-group-id="5374311991-10">do</span><span class="w">
        </span><span class="n">validate_lenient_rules</span><span class="p" data-group-id="5374311991-11">(</span><span class="n">data</span><span class="p" data-group-id="5374311991-11">)</span><span class="w">
      </span><span class="k" data-group-id="5374311991-10">else</span><span class="w">
        </span><span class="p" data-group-id="5374311991-12">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">errors</span><span class="p" data-group-id="5374311991-12">}</span><span class="w">
      </span><span class="k" data-group-id="5374311991-10">end</span><span class="w">
  </span><span class="k" data-group-id="5374311991-4">end</span><span class="w">
</span><span class="k" data-group-id="5374311991-2">end</span></code></pre><h2 id="performance-considerations" class="section-heading">
  <a href="#performance-considerations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Performance Considerations</span>
</h2>
<ul><li>ValidationError creation is lightweight (just list wrapping)</li><li>Error message concatenation happens lazily in <a href="https://hexdocs.pm/elixir/Exception.html#message/1"><code class="inline">Exception.message/1</code></a> </li><li><code class="inline">merge/2</code> uses simple list concatenation - efficient for typical error counts</li><li>Appendable protocol enables efficient accumulation in Either.validate/2</li><li>String formatting only happens when converting to string representation</li></ul><h2 id="best-practices" class="section-heading">
  <a href="#best-practices" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Best Practices</span>
</h2>
<ul><li>Use ValidationError for user-facing validation only</li><li>Always wrap in Either.Left, never return bare ValidationError</li><li>Prefer list format for errors even for single messages  </li><li>Use Either.validate/2 for comprehensive validation</li><li>Structure error messages consistently across your application</li><li>Include context in error messages (field names, values, constraints)</li><li>Test both successful validation and error accumulation paths</li><li>Consider internationalization when designing error messages</li></ul><h2 id="error-message-guidelines" class="section-heading">
  <a href="#error-message-guidelines" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Error Message Guidelines</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Good: Specific, actionable error messages</span><span class="w">
</span><span class="s">&quot;Email field is required&quot;</span><span class="w">
</span><span class="s">&quot;Password must be at least 8 characters&quot;</span><span class="w">
</span><span class="s">&quot;Age must be between 13 and 120&quot;</span><span class="w">

</span><span class="c1"># Avoid: Vague or technical error messages  </span><span class="w">
</span><span class="s">&quot;Invalid input&quot;</span><span class="w">
</span><span class="s">&quot;Validation failed&quot;</span><span class="w">  
</span><span class="s">&quot;Error in field processing&quot;</span><span class="w">

</span><span class="c1"># Good: Include context and constraints</span><span class="w">
</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="0354542795-1">(</span><span class="p" data-group-id="0354542795-2">[</span><span class="s">&quot;Username &#39;</span><span class="si" data-group-id="0354542795-3">#{</span><span class="n">username</span><span class="si" data-group-id="0354542795-3">}</span><span class="s">&#39; is already taken&quot;</span><span class="p" data-group-id="0354542795-2">]</span><span class="p" data-group-id="0354542795-1">)</span><span class="w">
</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="0354542795-4">(</span><span class="p" data-group-id="0354542795-5">[</span><span class="s">&quot;Price </span><span class="si" data-group-id="0354542795-6">#{</span><span class="n">price</span><span class="si" data-group-id="0354542795-6">}</span><span class="s"> must be greater than $0.00&quot;</span><span class="p" data-group-id="0354542795-5">]</span><span class="p" data-group-id="0354542795-4">)</span><span class="w">

</span><span class="c1"># Good: Use Either.lift_predicate for simple validation</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">validate_required_field</span><span class="p" data-group-id="0354542795-7">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">field_name</span><span class="p" data-group-id="0354542795-7">)</span><span class="w"> </span><span class="k" data-group-id="0354542795-8">do</span><span class="w">
  </span><span class="nc">Either</span><span class="o">.</span><span class="n">lift_predicate</span><span class="p" data-group-id="0354542795-9">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">present?</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span><span class="si" data-group-id="0354542795-10">#{</span><span class="n">field_name</span><span class="si" data-group-id="0354542795-10">}</span><span class="s"> is required&quot;</span><span class="p" data-group-id="0354542795-9">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">map_left</span><span class="p" data-group-id="0354542795-11">(</span><span class="o">&amp;</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="0354542795-11">)</span><span class="w">
</span><span class="k" data-group-id="0354542795-8">end</span></code></pre>
</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="eq-usage-rules.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          â† Previous Page
        </span>
        <span class="title">
Funx.Eq Usage Rules
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="foldable-usage-rules.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page â†’
        </span>
        <span class="title">
Funx.Foldable Usage Rules
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/funx/0.1.5" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/funx/0.1.5">Hex Preview</a>

              (<a href="https://preview.hex.pm/preview/funx/0.1.5/show/lib/errors/validation_error/usage-rules.md">current file</a>)

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="funx.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.34.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>

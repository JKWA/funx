<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.34.2">
    <meta name="project" content="funx v0.1.6">


    <title>Funx.Ord Usage Rules — funx v0.1.6</title>
    <link rel="stylesheet" href="dist/html-elixir-F2VRIOKR.css" />


      <link rel="canonical" href="https://hexdocs.pm/funx/ord-usage-rules.html" />

    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-4674174F.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-YIPIRHGU.js"></script>

  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
funx
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.1.6
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of funx</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/JKWA/funx/blob/v0.1.6/lib/ord/usage-rules.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>


    <span><code class="inline">Funx.Ord</code> Usage Rules</span>
  </h1>

<h2 id="core-concepts" class="section-heading">
  <a href="#core-concepts" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Core Concepts</span>
</h2>
<p><strong>Protocol + Custom Ord Pattern</strong>: Use both together for maximum flexibility</p><ul><li><strong>Protocol implementation</strong> = domain's default ordering (whatever makes business sense)</li><li><strong>Custom Ord injection</strong> = context-specific ordering when needed</li><li><strong>Key insight</strong>: Protocol provides sensible defaults, custom Ord provides flexibility</li></ul><p><strong>Contramap</strong>: Contravariant functor - transforms inputs before comparison</p><ul><li><code class="inline">contramap(&amp;String.length/1, Ord)</code> compares by string length only</li><li>Mathematical dual of <code class="inline">map</code> - transforms &quot;backwards&quot; through the data flow  </li><li>Key pattern: transform the input, not the comparison result</li></ul><p><strong>Utils Pattern</strong>: Inject custom Ord logic or default to protocol</p><ul><li><code class="inline">Ord.Utils.compare(a, b, custom_ord)</code> - uses custom_ord</li><li><code class="inline">Ord.Utils.compare(a, b)</code> - uses protocol dispatch</li></ul><p><strong>Monoid Composition</strong>: Combine ordering logic lexicographically</p><ul><li><code class="inline">append(ord1, ord2)</code> - combine two (ord1 then ord2)</li><li><code class="inline">concat([ord1, ord2, ord3])</code> - combine list (in sequence)</li></ul><h2 id="quick-patterns" class="section-heading">
  <a href="#quick-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Quick Patterns</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="c1"># STEP 1: Implement protocol for domain&#39;s default ordering</span><span class="w">
</span><span class="kd">defimpl</span><span class="w"> </span><span class="nc">Funx.Ord</span><span class="p">,</span><span class="w"> </span><span class="ss">for</span><span class="p">:</span><span class="w"> </span><span class="nc">User</span><span class="w"> </span><span class="k" data-group-id="8316981914-1">do</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">lt?</span><span class="p" data-group-id="8316981914-2">(</span><span class="p" data-group-id="8316981914-3">%</span><span class="nc" data-group-id="8316981914-3">User</span><span class="p" data-group-id="8316981914-3">{</span><span class="ss">joined_at</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="p" data-group-id="8316981914-3">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8316981914-4">%</span><span class="nc" data-group-id="8316981914-4">User</span><span class="p" data-group-id="8316981914-4">{</span><span class="ss">joined_at</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="8316981914-4">}</span><span class="p" data-group-id="8316981914-2">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Funx.Ord</span><span class="o">.</span><span class="n">lt?</span><span class="p" data-group-id="8316981914-5">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="8316981914-5">)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">le?</span><span class="p" data-group-id="8316981914-6">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="8316981914-6">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">lt?</span><span class="p" data-group-id="8316981914-7">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="8316981914-7">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">eq?</span><span class="p" data-group-id="8316981914-8">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="8316981914-8">)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">gt?</span><span class="p" data-group-id="8316981914-9">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="8316981914-9">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">le?</span><span class="p" data-group-id="8316981914-10">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="8316981914-10">)</span><span class="w">  
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">ge?</span><span class="p" data-group-id="8316981914-11">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="8316981914-11">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">lt?</span><span class="p" data-group-id="8316981914-12">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="8316981914-12">)</span><span class="w">
</span><span class="k" data-group-id="8316981914-1">end</span><span class="w">

</span><span class="c1"># STEP 2: Use protocol directly for default ordering</span><span class="w">
</span><span class="nc">Ord</span><span class="o">.</span><span class="n">lt?</span><span class="p" data-group-id="8316981914-13">(</span><span class="n">user1</span><span class="p">,</span><span class="w"> </span><span class="n">user2</span><span class="p" data-group-id="8316981914-13">)</span><span class="w">  </span><span class="c1"># Uses protocol (by joined_at)</span><span class="w">
</span><span class="nc">List</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="8316981914-14">(</span><span class="n">users</span><span class="p" data-group-id="8316981914-14">)</span><span class="w">       </span><span class="c1"># Uses protocol default</span><span class="w">

</span><span class="c1"># STEP 3: Inject custom Ord for specific contexts</span><span class="w">
</span><span class="n">by_age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="8316981914-15">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">age</span><span class="p" data-group-id="8316981914-15">)</span><span class="w">
</span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">compare</span><span class="p" data-group-id="8316981914-16">(</span><span class="n">user1</span><span class="p">,</span><span class="w"> </span><span class="n">user2</span><span class="p">,</span><span class="w"> </span><span class="n">by_age</span><span class="p" data-group-id="8316981914-16">)</span><span class="w">  </span><span class="c1"># Compare by age instead</span><span class="w">
</span><span class="nc">List</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="8316981914-17">(</span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="n">by_age</span><span class="p" data-group-id="8316981914-17">)</span><span class="w">                 </span><span class="c1"># Sort by age, not joined_at</span><span class="w">

</span><span class="c1"># Combine fields lexicographically</span><span class="w">
</span><span class="n">age_then_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">concat</span><span class="p" data-group-id="8316981914-18">(</span><span class="p" data-group-id="8316981914-19">[</span><span class="w">
  </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="8316981914-20">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">age</span><span class="p" data-group-id="8316981914-20">)</span><span class="p">,</span><span class="w">
  </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="8316981914-21">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">name</span><span class="p" data-group-id="8316981914-21">)</span><span class="w">
</span><span class="p" data-group-id="8316981914-19">]</span><span class="p" data-group-id="8316981914-18">)</span><span class="w">

</span><span class="c1"># Use with Funx.List</span><span class="w">
</span><span class="nc">Funx.List</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="8316981914-22">(</span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="n">by_age</span><span class="p" data-group-id="8316981914-22">)</span><span class="w">
</span><span class="nc">Funx.List</span><span class="o">.</span><span class="n">strict_sort</span><span class="p" data-group-id="8316981914-23">(</span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="n">age_then_name</span><span class="p" data-group-id="8316981914-23">)</span><span class="w">  </span><span class="c1"># removes duplicates</span></code></pre><h2 id="key-rules" class="section-heading">
  <a href="#key-rules" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Key Rules</span>
</h2>
<ul><li><strong>IMPLEMENT PROTOCOL</strong> for domain's default ordering (whatever makes business sense)</li><li><strong>USE CUSTOM ORD</strong> when you need different ordering for specific operations</li><li><strong>MUST implement all four</strong> <code class="inline">lt?/2</code>, <code class="inline">le?/2</code>, <code class="inline">gt?/2</code>, <code class="inline">ge?/2</code> (no optional defaults)</li><li><strong>Must define total order</strong>: antisymmetric, transitive, connex</li><li>Use <code class="inline">contramap/2</code> to transform inputs before comparison</li><li>Use monoid functions for composition: <code class="inline">append/2</code>, <code class="inline">concat/1</code>  </li><li>Pattern: Protocol for defaults, Utils injection for flexibility</li><li>Keep <code class="inline">Ord</code> and <code class="inline">Eq</code> consistent: <code class="inline">compare(a,b) == :eq &lt;=&gt; Eq.eq?(a,b)</code></li></ul><h2 id="when-to-use" class="section-heading">
  <a href="#when-to-use" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">When to Use</span>
</h2>
<ul><li><strong>Protocol implementation</strong>: When you need domain's default ordering (whatever makes business sense)</li><li><strong>Custom Ord injection</strong>: When you need different ordering for specific contexts</li><li>Custom sort with <a href="Funx.List.html#sort/2"><code class="inline">Funx.List.sort/2</code></a> (protocol default or custom)</li><li>Range operations (<code class="inline">min</code>, <code class="inline">max</code>, <code class="inline">clamp</code>, <code class="inline">between</code>)</li><li>Multi-field lexicographic sorting and complex ordering logic</li></ul><h2 id="anti-patterns" class="section-heading">
  <a href="#anti-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Anti-Patterns</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Don&#39;t use raw operators on structs</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="n">user1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">user2</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">...</span><span class="w">  </span><span class="c1"># May raise ArgumentError</span><span class="w">

</span><span class="c1"># ❌ Don&#39;t forget any comparison functions</span><span class="w">
</span><span class="kd">defimpl</span><span class="w"> </span><span class="nc">Funx.Ord</span><span class="p">,</span><span class="w"> </span><span class="ss">for</span><span class="p">:</span><span class="w"> </span><span class="nc">User</span><span class="w"> </span><span class="k" data-group-id="5876296797-1">do</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">lt?</span><span class="p" data-group-id="5876296797-2">(</span><span class="p" data-group-id="5876296797-3">%</span><span class="nc" data-group-id="5876296797-3">User</span><span class="p" data-group-id="5876296797-3">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">id1</span><span class="p" data-group-id="5876296797-3">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5876296797-4">%</span><span class="nc" data-group-id="5876296797-4">User</span><span class="p" data-group-id="5876296797-4">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">id2</span><span class="p" data-group-id="5876296797-4">}</span><span class="p" data-group-id="5876296797-2">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">id1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">id2</span><span class="w">
  </span><span class="c1"># Missing le?/2, gt?/2, ge?/2!</span><span class="w">
</span><span class="k" data-group-id="5876296797-1">end</span><span class="w">

</span><span class="c1"># ❌ Don&#39;t transform comparison result  </span><span class="w">
</span><span class="n">contramap</span><span class="p" data-group-id="5876296797-5">(</span><span class="k" data-group-id="5876296797-6">fn</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="k" data-group-id="5876296797-6">end</span><span class="p" data-group-id="5876296797-5">)</span><span class="w">  </span><span class="c1"># Wrong!</span><span class="w">

</span><span class="c1"># ❌ Don&#39;t mix protocols inconsistently</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">process</span><span class="p" data-group-id="5876296797-7">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="5876296797-7">)</span><span class="w"> </span><span class="k" data-group-id="5876296797-8">do</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k" data-group-id="5876296797-9">do</span><span class="w">  </span><span class="c1"># Raw operator</span><span class="w">
    </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">max</span><span class="p" data-group-id="5876296797-10">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="5876296797-10">)</span><span class="w">  </span><span class="c1"># Protocol-based</span><span class="w">
  </span><span class="k" data-group-id="5876296797-9">end</span><span class="w">
</span><span class="k" data-group-id="5876296797-8">end</span></code></pre><h2 id="testing" class="section-heading">
  <a href="#testing" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Testing</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="n">test</span><span class="w"> </span><span class="s">&quot;Ord laws hold&quot;</span><span class="w"> </span><span class="k" data-group-id="6758383535-1">do</span><span class="w">
  </span><span class="c1"># Antisymmetry: a &lt;= b and b &lt;= a implies a == b</span><span class="w">
  </span><span class="n">assert</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">le?</span><span class="p" data-group-id="6758383535-2">(</span><span class="n">user1</span><span class="p">,</span><span class="w"> </span><span class="n">user2</span><span class="p" data-group-id="6758383535-2">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">le?</span><span class="p" data-group-id="6758383535-3">(</span><span class="n">user2</span><span class="p">,</span><span class="w"> </span><span class="n">user1</span><span class="p" data-group-id="6758383535-3">)</span><span class="w"> 
    </span><span class="n">implies</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">compare</span><span class="p" data-group-id="6758383535-4">(</span><span class="n">user1</span><span class="p">,</span><span class="w"> </span><span class="n">user2</span><span class="p" data-group-id="6758383535-4">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">:eq</span><span class="w">
  
  </span><span class="c1"># Transitivity: a &lt;= b and b &lt;= c implies a &lt;= c</span><span class="w">
  </span><span class="n">assert</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">le?</span><span class="p" data-group-id="6758383535-5">(</span><span class="n">user1</span><span class="p">,</span><span class="w"> </span><span class="n">user2</span><span class="p" data-group-id="6758383535-5">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">le?</span><span class="p" data-group-id="6758383535-6">(</span><span class="n">user2</span><span class="p">,</span><span class="w"> </span><span class="n">user3</span><span class="p" data-group-id="6758383535-6">)</span><span class="w">
    </span><span class="n">implies</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">le?</span><span class="p" data-group-id="6758383535-7">(</span><span class="n">user1</span><span class="p">,</span><span class="w"> </span><span class="n">user3</span><span class="p" data-group-id="6758383535-7">)</span><span class="w">
  
  </span><span class="c1"># Connexity: either a &lt;= b or b &lt;= a</span><span class="w">
  </span><span class="n">assert</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">le?</span><span class="p" data-group-id="6758383535-8">(</span><span class="n">user1</span><span class="p">,</span><span class="w"> </span><span class="n">user2</span><span class="p" data-group-id="6758383535-8">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">le?</span><span class="p" data-group-id="6758383535-9">(</span><span class="n">user2</span><span class="p">,</span><span class="w"> </span><span class="n">user1</span><span class="p" data-group-id="6758383535-9">)</span><span class="w">
</span><span class="k" data-group-id="6758383535-1">end</span><span class="w">

</span><span class="n">test</span><span class="w"> </span><span class="s">&quot;contramap preserves Ord laws&quot;</span><span class="w"> </span><span class="k" data-group-id="6758383535-10">do</span><span class="w">
  </span><span class="n">by_age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="6758383535-11">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">age</span><span class="p" data-group-id="6758383535-11">)</span><span class="w">
  </span><span class="n">user1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6758383535-12">%</span><span class="nc" data-group-id="6758383535-12">User</span><span class="p" data-group-id="6758383535-12">{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="6758383535-12">}</span><span class="w">
  </span><span class="n">user2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6758383535-13">%</span><span class="nc" data-group-id="6758383535-13">User</span><span class="p" data-group-id="6758383535-13">{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p" data-group-id="6758383535-13">}</span><span class="w">
  
  </span><span class="c1"># Contramap projection maintains ordering laws</span><span class="w">
  </span><span class="n">assert</span><span class="w"> </span><span class="n">by_age</span><span class="o">.</span><span class="n">lt?</span><span class="o">.</span><span class="p" data-group-id="6758383535-14">(</span><span class="n">user1</span><span class="p">,</span><span class="w"> </span><span class="n">user2</span><span class="p" data-group-id="6758383535-14">)</span><span class="w">  </span><span class="c1"># 25 &lt; 30</span><span class="w">
  </span><span class="n">assert</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">by_age</span><span class="o">.</span><span class="n">lt?</span><span class="o">.</span><span class="p" data-group-id="6758383535-15">(</span><span class="n">user1</span><span class="p">,</span><span class="w"> </span><span class="n">user1</span><span class="p" data-group-id="6758383535-15">)</span><span class="w">  </span><span class="c1"># Anti-reflexive</span><span class="w">
</span><span class="k" data-group-id="6758383535-10">end</span><span class="w">

</span><span class="n">test</span><span class="w"> </span><span class="s">&quot;monoid composition laws&quot;</span><span class="w"> </span><span class="k" data-group-id="6758383535-16">do</span><span class="w">
  </span><span class="n">ord1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="6758383535-17">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">age</span><span class="p" data-group-id="6758383535-17">)</span><span class="w">
  </span><span class="n">ord2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="6758383535-18">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">name</span><span class="p" data-group-id="6758383535-18">)</span><span class="w">
  
  </span><span class="c1"># Lexicographic: age first, then name</span><span class="w">
  </span><span class="n">combined</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">append</span><span class="p" data-group-id="6758383535-19">(</span><span class="n">ord1</span><span class="p">,</span><span class="w"> </span><span class="n">ord2</span><span class="p" data-group-id="6758383535-19">)</span><span class="w">
  
  </span><span class="c1"># Same age, different names</span><span class="w">
  </span><span class="n">alice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6758383535-20">%</span><span class="nc" data-group-id="6758383535-20">User</span><span class="p" data-group-id="6758383535-20">{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="6758383535-20">}</span><span class="w">
  </span><span class="n">bob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6758383535-21">%</span><span class="nc" data-group-id="6758383535-21">User</span><span class="p" data-group-id="6758383535-21">{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p" data-group-id="6758383535-21">}</span><span class="w">
  </span><span class="n">assert</span><span class="w"> </span><span class="n">combined</span><span class="o">.</span><span class="n">lt?</span><span class="o">.</span><span class="p" data-group-id="6758383535-22">(</span><span class="n">alice</span><span class="p">,</span><span class="w"> </span><span class="n">bob</span><span class="p" data-group-id="6758383535-22">)</span><span class="w">  </span><span class="c1"># Alice &lt; Bob by name</span><span class="w">
</span><span class="k" data-group-id="6758383535-16">end</span></code></pre><h2 id="core-functions" class="section-heading">
  <a href="#core-functions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Core Functions</span>
</h2>
<h3 id="protocol-functions" class="section-heading">
  <a href="#protocol-functions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Protocol Functions</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Direct protocol calls</span><span class="w">
</span><span class="nc">Ord</span><span class="o">.</span><span class="n">lt?</span><span class="p" data-group-id="5730337094-1">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="5730337094-1">)</span><span class="w">    </span><span class="c1"># less than</span><span class="w">
</span><span class="nc">Ord</span><span class="o">.</span><span class="n">le?</span><span class="p" data-group-id="5730337094-2">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="5730337094-2">)</span><span class="w">    </span><span class="c1"># less than or equal  </span><span class="w">
</span><span class="nc">Ord</span><span class="o">.</span><span class="n">gt?</span><span class="p" data-group-id="5730337094-3">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="5730337094-3">)</span><span class="w">    </span><span class="c1"># greater than</span><span class="w">
</span><span class="nc">Ord</span><span class="o">.</span><span class="n">ge?</span><span class="p" data-group-id="5730337094-4">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="5730337094-4">)</span><span class="w">    </span><span class="c1"># greater than or equal</span><span class="w">

</span><span class="c1"># These delegate to implementations or fallback to Elixir operators</span><span class="w">
</span><span class="nc">Ord</span><span class="o">.</span><span class="n">lt?</span><span class="p" data-group-id="5730337094-5">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="5730337094-5">)</span><span class="w">              </span><span class="c1"># true (fallback)</span><span class="w">
</span><span class="nc">Ord</span><span class="o">.</span><span class="n">lt?</span><span class="p" data-group-id="5730337094-6">(</span><span class="n">user1</span><span class="p">,</span><span class="w"> </span><span class="n">user2</span><span class="p" data-group-id="5730337094-6">)</span><span class="w">       </span><span class="c1"># uses User implementation</span></code></pre><h3 id="utils-functions" class="section-heading">
  <a href="#utils-functions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Utils Functions</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Comparison and utilities</span><span class="w">
</span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">compare</span><span class="p" data-group-id="1306162936-1">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="1306162936-1">)</span><span class="w">           </span><span class="c1"># :lt | :eq | :gt</span><span class="w">
</span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">min</span><span class="p" data-group-id="1306162936-2">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="1306162936-2">)</span><span class="w">               </span><span class="c1"># minimum value</span><span class="w">
</span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">max</span><span class="p" data-group-id="1306162936-3">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="1306162936-3">)</span><span class="w">               </span><span class="c1"># maximum value</span><span class="w">
</span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">clamp</span><span class="p" data-group-id="1306162936-4">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="p" data-group-id="1306162936-4">)</span><span class="w">  </span><span class="c1"># bound value within range</span><span class="w">
</span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">between</span><span class="p" data-group-id="1306162936-5">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="p" data-group-id="1306162936-5">)</span><span class="w"> </span><span class="c1"># check if in range</span><span class="w">

</span><span class="c1"># For Enum.sort/2 compatibility  </span><span class="w">
</span><span class="n">comparator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">comparator</span><span class="p" data-group-id="1306162936-6">(</span><span class="n">custom_ord</span><span class="p" data-group-id="1306162936-6">)</span><span class="w">
</span><span class="nc">Enum</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="1306162936-7">(</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">comparator</span><span class="p" data-group-id="1306162936-7">)</span></code></pre><h3 id="transformation-functions" class="section-heading">
  <a href="#transformation-functions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Transformation Functions</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Transform inputs before comparison</span><span class="w">
</span><span class="n">by_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="6527232603-1">(</span><span class="o">&amp;</span><span class="nc">String</span><span class="o">.</span><span class="n">length</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="6527232603-1">)</span><span class="w">
</span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">max</span><span class="p" data-group-id="6527232603-2">(</span><span class="s">&quot;cat&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;zebra&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">by_length</span><span class="p" data-group-id="6527232603-2">)</span><span class="w">  </span><span class="c1"># &quot;zebra&quot; (longer)</span><span class="w">

</span><span class="c1"># Reverse ordering</span><span class="w">
</span><span class="n">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">reverse</span><span class="p" data-group-id="6527232603-3">(</span><span class="p" data-group-id="6527232603-3">)</span><span class="w">
</span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">min</span><span class="p" data-group-id="6527232603-4">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="n">desc</span><span class="p" data-group-id="6527232603-4">)</span><span class="w">  </span><span class="c1"># 7 (max in normal order)</span><span class="w">

</span><span class="c1"># Convert to equality</span><span class="w">
</span><span class="n">eq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">to_eq</span><span class="p" data-group-id="6527232603-5">(</span><span class="p" data-group-id="6527232603-5">)</span><span class="w">
</span><span class="n">eq</span><span class="o">.</span><span class="n">eq?</span><span class="o">.</span><span class="p" data-group-id="6527232603-6">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="6527232603-6">)</span><span class="w">  </span><span class="c1"># true (compare(5,5) == :eq)</span></code></pre><h3 id="composition-functions" class="section-heading">
  <a href="#composition-functions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Composition Functions</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Combine orderings lexicographically</span><span class="w">
</span><span class="n">age_then_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">append</span><span class="p" data-group-id="7764024245-1">(</span><span class="w">
  </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="7764024245-2">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">age</span><span class="p" data-group-id="7764024245-2">)</span><span class="p">,</span><span class="w">
  </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="7764024245-3">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">name</span><span class="p" data-group-id="7764024245-3">)</span><span class="w">
</span><span class="p" data-group-id="7764024245-1">)</span><span class="w">

</span><span class="c1"># Combine list of orderings</span><span class="w">
</span><span class="n">multi_sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">concat</span><span class="p" data-group-id="7764024245-4">(</span><span class="p" data-group-id="7764024245-5">[</span><span class="w">
  </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="7764024245-6">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">priority</span><span class="p" data-group-id="7764024245-6">)</span><span class="p">,</span><span class="w">
  </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="7764024245-7">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">created_at</span><span class="p" data-group-id="7764024245-7">)</span><span class="p">,</span><span class="w"> 
  </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="7764024245-8">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">id</span><span class="p" data-group-id="7764024245-8">)</span><span class="w">
</span><span class="p" data-group-id="7764024245-5">]</span><span class="p" data-group-id="7764024245-4">)</span></code></pre><h2 id="integration-with-funx-list" class="section-heading">
  <a href="#integration-with-funx-list" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Integration with Funx.List</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Basic sorting</span><span class="w">
</span><span class="nc">Funx.List</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="3545077550-1">(</span><span class="p" data-group-id="3545077550-2">[</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="3545077550-2">]</span><span class="p" data-group-id="3545077550-1">)</span><span class="w">  </span><span class="c1"># [1, 3, 4]</span><span class="w">

</span><span class="c1"># Custom ordering</span><span class="w">
</span><span class="n">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3545077550-3">[</span><span class="p" data-group-id="3545077550-4">%</span><span class="nc" data-group-id="3545077550-4">User</span><span class="p" data-group-id="3545077550-4">{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p" data-group-id="3545077550-4">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3545077550-5">%</span><span class="nc" data-group-id="3545077550-5">User</span><span class="p" data-group-id="3545077550-5">{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p" data-group-id="3545077550-5">}</span><span class="p" data-group-id="3545077550-3">]</span><span class="w">
</span><span class="n">by_age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="3545077550-6">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">age</span><span class="p" data-group-id="3545077550-6">)</span><span class="w">
</span><span class="nc">Funx.List</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="3545077550-7">(</span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="n">by_age</span><span class="p" data-group-id="3545077550-7">)</span><span class="w">

</span><span class="c1"># Sort and remove duplicates</span><span class="w">
</span><span class="nc">Funx.List</span><span class="o">.</span><span class="n">strict_sort</span><span class="p" data-group-id="3545077550-8">(</span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="n">by_age</span><span class="p" data-group-id="3545077550-8">)</span><span class="w">  </span><span class="c1"># uses Ord.Utils.to_eq for dedup</span><span class="w">

</span><span class="c1"># Multi-field sort</span><span class="w">
</span><span class="n">by_age_then_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">concat</span><span class="p" data-group-id="3545077550-9">(</span><span class="p" data-group-id="3545077550-10">[</span><span class="w">
  </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="3545077550-11">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">age</span><span class="p" data-group-id="3545077550-11">)</span><span class="p">,</span><span class="w">
  </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="3545077550-12">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">name</span><span class="p" data-group-id="3545077550-12">)</span><span class="w">
</span><span class="p" data-group-id="3545077550-10">]</span><span class="p" data-group-id="3545077550-9">)</span><span class="w">
</span><span class="nc">Funx.List</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="3545077550-13">(</span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="n">by_age_then_name</span><span class="p" data-group-id="3545077550-13">)</span></code></pre><h2 id="built-in-implementations" class="section-heading">
  <a href="#built-in-implementations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Built-in Implementations</span>
</h2>
<h3 id="temporal-types" class="section-heading">
  <a href="#temporal-types" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Temporal Types</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># DateTime, Date, Time, NaiveDateTime all have safe implementations</span><span class="w">
</span><span class="n">events</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4680177036-1">[</span><span class="p" data-group-id="4680177036-2">%</span><span class="nc" data-group-id="4680177036-2">Event</span><span class="p" data-group-id="4680177036-2">{</span><span class="ss">occurred_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-01-02 10:00:00Z]</span><span class="p" data-group-id="4680177036-2">}</span><span class="p">,</span><span class="w"> 
          </span><span class="p" data-group-id="4680177036-3">%</span><span class="nc" data-group-id="4680177036-3">Event</span><span class="p" data-group-id="4680177036-3">{</span><span class="ss">occurred_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-01-01 10:00:00Z]</span><span class="p" data-group-id="4680177036-3">}</span><span class="p" data-group-id="4680177036-1">]</span><span class="w">

</span><span class="n">by_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="4680177036-4">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">occurred_at</span><span class="p" data-group-id="4680177036-4">)</span><span class="w">
</span><span class="nc">Funx.List</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="4680177036-5">(</span><span class="n">events</span><span class="p">,</span><span class="w"> </span><span class="n">by_time</span><span class="p" data-group-id="4680177036-5">)</span><span class="w">  </span><span class="c1"># chronological order</span></code></pre><h3 id="fallback-any" class="section-heading">
  <a href="#fallback-any" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fallback (Any)</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Safe with basic types</span><span class="w">
</span><span class="nc">Ord</span><span class="o">.</span><span class="n">lt?</span><span class="p" data-group-id="1989191984-1">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1989191984-1">)</span><span class="w">        </span><span class="c1"># true</span><span class="w">
</span><span class="nc">Ord</span><span class="o">.</span><span class="n">lt?</span><span class="p" data-group-id="1989191984-2">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p" data-group-id="1989191984-2">)</span><span class="w">    </span><span class="c1"># true  </span><span class="w">
</span><span class="nc">Ord</span><span class="o">.</span><span class="n">lt?</span><span class="p" data-group-id="1989191984-3">(</span><span class="p" data-group-id="1989191984-4">[</span><span class="mi">1</span><span class="p" data-group-id="1989191984-4">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1989191984-5">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="1989191984-5">]</span><span class="p" data-group-id="1989191984-3">)</span><span class="w">  </span><span class="c1"># true</span><span class="w">

</span><span class="c1"># Unsafe with structs/maps - define explicit implementations</span><span class="w">
</span><span class="c1"># Ord.lt?(%User{}, %User{})  # May raise ArgumentError</span></code></pre><h2 id="common-patterns" class="section-heading">
  <a href="#common-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Common Patterns</span>
</h2>
<h3 id="multi-field-sorting" class="section-heading">
  <a href="#multi-field-sorting" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Multi-field Sorting</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Sort by priority (high first), then by created date (old first)</span><span class="w">
</span><span class="n">task_ordering</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">concat</span><span class="p" data-group-id="4378805936-1">(</span><span class="p" data-group-id="4378805936-2">[</span><span class="w">
  </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">reverse</span><span class="p" data-group-id="4378805936-3">(</span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="4378805936-4">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">priority</span><span class="p" data-group-id="4378805936-4">)</span><span class="p" data-group-id="4378805936-3">)</span><span class="p">,</span><span class="w">
  </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="4378805936-5">(</span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">created_at</span><span class="p" data-group-id="4378805936-5">)</span><span class="w">
</span><span class="p" data-group-id="4378805936-2">]</span><span class="p" data-group-id="4378805936-1">)</span><span class="w">

</span><span class="nc">Funx.List</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="4378805936-6">(</span><span class="n">tasks</span><span class="p">,</span><span class="w"> </span><span class="n">task_ordering</span><span class="p" data-group-id="4378805936-6">)</span></code></pre><h3 id="range-operations" class="section-heading">
  <a href="#range-operations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Range Operations</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Clamp values within bounds</span><span class="w">
</span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">clamp</span><span class="p" data-group-id="2225345742-1">(</span><span class="n">user_score</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p" data-group-id="2225345742-1">)</span><span class="w">

</span><span class="c1"># Check if value is in acceptable range  </span><span class="w">
</span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">between</span><span class="p" data-group-id="2225345742-2">(</span><span class="n">temperature</span><span class="p">,</span><span class="w"> </span><span class="n">min_temp</span><span class="p">,</span><span class="w"> </span><span class="n">max_temp</span><span class="p" data-group-id="2225345742-2">)</span><span class="w">

</span><span class="c1"># Find extreme values</span><span class="w">
</span><span class="n">oldest_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">reduce</span><span class="p" data-group-id="2225345742-3">(</span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">min</span><span class="p" data-group-id="2225345742-4">(</span><span class="ni">&amp;1</span><span class="p">,</span><span class="w"> </span><span class="ni">&amp;2</span><span class="p">,</span><span class="w"> </span><span class="n">by_age</span><span class="p" data-group-id="2225345742-4">)</span><span class="p" data-group-id="2225345742-3">)</span></code></pre><h3 id="domain-specific-ordering" class="section-heading">
  <a href="#domain-specific-ordering" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Domain-Specific Ordering</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Priority</span><span class="w"> </span><span class="k" data-group-id="0859249707-1">do</span><span class="w">
  </span><span class="na">@priorities</span><span class="w"> </span><span class="p" data-group-id="0859249707-2">[</span><span class="ss">:low</span><span class="p">,</span><span class="w"> </span><span class="ss">:medium</span><span class="p">,</span><span class="w"> </span><span class="ss">:high</span><span class="p">,</span><span class="w"> </span><span class="ss">:critical</span><span class="p" data-group-id="0859249707-2">]</span><span class="w">
  
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">to_index</span><span class="p" data-group-id="0859249707-3">(</span><span class="n">priority</span><span class="p" data-group-id="0859249707-3">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">find_index</span><span class="p" data-group-id="0859249707-4">(</span><span class="na">@priorities</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="0859249707-5">(</span><span class="ni">&amp;1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">priority</span><span class="p" data-group-id="0859249707-5">)</span><span class="p" data-group-id="0859249707-4">)</span><span class="w">
</span><span class="k" data-group-id="0859249707-1">end</span><span class="w">

</span><span class="c1"># Order by priority level</span><span class="w">
</span><span class="n">by_priority</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ord.Utils</span><span class="o">.</span><span class="n">contramap</span><span class="p" data-group-id="0859249707-6">(</span><span class="o">&amp;</span><span class="nc">Priority</span><span class="o">.</span><span class="n">to_index</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="0859249707-6">)</span><span class="w">
</span><span class="nc">Funx.List</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="0859249707-7">(</span><span class="n">tasks</span><span class="p">,</span><span class="w"> </span><span class="n">by_priority</span><span class="p" data-group-id="0859249707-7">)</span></code></pre><h2 id="performance-considerations" class="section-heading">
  <a href="#performance-considerations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Performance Considerations</span>
</h2>
<ul><li>Protocol dispatch has minimal overhead</li><li><code class="inline">contramap</code> creates new functions - avoid in tight loops</li><li>Composition with <code class="inline">concat</code> chains multiple comparisons</li><li><code class="inline">Funx.List.sort</code> is optimized for custom comparators</li><li>Built-in temporal comparisons are efficient</li></ul><h2 id="best-practices" class="section-heading">
  <a href="#best-practices" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Best Practices</span>
</h2>
<ul><li>Define <code class="inline">Ord</code> for domain types, not just structs</li><li>Keep <code class="inline">Ord</code> and <code class="inline">Eq</code> implementations consistent  </li><li>Use <code class="inline">Utils</code> functions rather than direct protocol calls</li><li>Prefer composition over custom implementations</li><li>Test ordering laws in your implementations</li><li>Document the ordering semantics for domain types</li></ul>
</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="monoid-usage-rules.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Funx.Monoid Usage Rules
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="predicate-usage-rules.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Funx.Predicate Usage Rules
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/funx/0.1.6" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/funx/0.1.6">Hex Preview</a>

              (<a href="https://preview.hex.pm/preview/funx/0.1.6/show/lib/ord/usage-rules.md">current file</a>)

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="funx.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.34.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>

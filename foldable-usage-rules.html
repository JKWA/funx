<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.34.2">
    <meta name="project" content="funx v0.1.6">


    <title>Funx.Foldable Usage Rules — funx v0.1.6</title>
    <link rel="stylesheet" href="dist/html-elixir-F2VRIOKR.css" />


      <link rel="canonical" href="https://hexdocs.pm/funx/foldable-usage-rules.html" />

    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-4674174F.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-YIPIRHGU.js"></script>

  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
funx
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.1.6
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of funx</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/JKWA/funx/blob/v0.1.6/lib/foldable/usage-rules.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>


    <span><code class="inline">Funx.Foldable</code> Usage Rules</span>
  </h1>

<h2 id="llm-functional-programming-foundation" class="section-heading">
  <a href="#llm-functional-programming-foundation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">LLM Functional Programming Foundation</span>
</h2>
<p><strong>Key Concepts for LLMs:</strong></p><p><strong>Foldable</strong>: Protocol for collapsing any structure into a single value using conditional logic</p><ul><li><strong><code class="inline">fold_l/3</code></strong>: Universal fold operation with present/absent function handling</li><li><strong><code class="inline">fold_r/3</code></strong>: Right-associative fold (same as fold_l for branching structures)</li><li><strong>Polymorphic folding</strong>: Same interface, different implementations based on structure type</li><li><strong>Generic abstraction</strong>: Folding is the universal pattern for &quot;structure → single value&quot;</li></ul><p><strong>Core Pattern</strong>: <code class="inline">fold(structure, present_func, absent_func)</code></p><ul><li><strong>present_func</strong>: Function called when structure contains value(s) </li><li><strong>absent_func</strong>: Function called when structure is empty/absent</li><li><strong>Result</strong>: Single collapsed value from conditional logic</li></ul><p><strong>Universal Folding Concept</strong>: Every time you handle &quot;what do I have, do different things based on that&quot;, you're conceptually folding. The protocol makes this pattern explicit and composable.</p><h2 id="llm-decision-guide-when-to-use-foldable" class="section-heading">
  <a href="#llm-decision-guide-when-to-use-foldable" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">LLM Decision Guide: When to Use Foldable</span>
</h2>
<p><strong>✅ Use Foldable when:</strong></p><ul><li>Need to extract a concrete value from wrapped context (Maybe, Either)</li><li>Collapsing collections into summary values</li><li>Providing default values for empty/missing cases  </li><li>Exit strategy from monadic pipelines back to concrete values</li><li><strong>Prefer over imperative conditionals</strong> (<code class="inline">case</code>, <code class="inline">cond</code>, <code class="inline">if/else</code>) for composability</li><li><strong>Prefer over <a href="https://hexdocs.pm/elixir/Enum.html#reduce/3"><code class="inline">Enum.reduce/3</code></a></strong> when working with potentially empty structures</li><li>User says: &quot;default value&quot;, &quot;extract from&quot;, &quot;handle both cases&quot;, &quot;reconcile branches&quot;</li></ul><p><strong>⚡ Folding Strategy Decision:</strong></p><ul><li><strong>Context reconciliation</strong> (Maybe/Either): Exit point from monadic pipeline</li><li><strong>Collection aggregation</strong> (List): Standard reduce/accumulation pattern  </li><li><strong>Default provision</strong>: Provide fallbacks for empty/missing cases</li><li><strong>Branch handling</strong>: Functional alternative to imperative case/cond logic</li></ul><p><strong>⚙️ Function Choice Guide:</strong></p><ul><li><strong>Simple default values</strong>: Use <code class="inline">Maybe.get_or_else/2</code> or <code class="inline">Either.get_or_else/2</code> instead of manual fold</li><li><strong>Complex pipeline exit</strong>: <code class="inline">fold_l(either_result, &amp;success_handler/1, &amp;error_handler/0)</code></li><li><strong>Collection summary</strong>: <code class="inline">fold_l(list, &amp;Enum.sum/1, fn -&gt; 0 end)</code></li><li><strong>Direction choice</strong>: Use <code class="inline">fold_l</code> as standard; <code class="inline">fold_r</code> only for ordered collections needing right-associative processing</li></ul><h2 id="llm-context-mapping" class="section-heading">
  <a href="#llm-context-mapping" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">LLM Context Mapping</span>
</h2>
<p><strong>User Intent → Foldable Patterns:</strong></p><ul><li>&quot;get value or default&quot; → <code class="inline">Maybe.get_or_else(maybe, default)</code> or <code class="inline">Either.get_or_else(either, default)</code></li><li>&quot;handle success and error&quot; → <code class="inline">fold_l(either, &amp;process_success/1, &amp;handle_error/0)</code></li><li>&quot;extract from Maybe&quot; → Use <code class="inline">Maybe.get_or_else/2</code> for simple cases, fold for complex transformations</li><li>&quot;sum all or zero&quot; → <code class="inline">fold_l(list, &amp;Enum.sum/1, fn -&gt; 0 end)</code></li><li>&quot;collapse pipeline result&quot; → Use fold as final step to exit monadic context</li></ul><h2 id="overview" class="section-heading">
  <a href="#overview" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Overview</span>
</h2>
<p><a href="Funx.Foldable.html"><code class="inline">Funx.Foldable</code></a> is a protocol that provides <strong>polymorphic folding</strong> - the universal pattern for collapsing any structure into a single value through conditional logic.</p><h2 id="core-insight-folding-is-everywhere" class="section-heading">
  <a href="#core-insight-folding-is-everywhere" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Core Insight: Folding is Everywhere</span>
</h2>
<p>Developers fold constantly without realizing it:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Pattern matching tagged tuples = folding</span><span class="w">
</span><span class="k">case</span><span class="w"> </span><span class="n">fetch_user</span><span class="p" data-group-id="0593295176-1">(</span><span class="n">id</span><span class="p" data-group-id="0593295176-1">)</span><span class="w"> </span><span class="k" data-group-id="0593295176-2">do</span><span class="w">
  </span><span class="p" data-group-id="0593295176-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="p" data-group-id="0593295176-3">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="w">        </span><span class="c1"># present_func</span><span class="w">
  </span><span class="p" data-group-id="0593295176-4">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="0593295176-4">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Unknown&quot;</span><span class="w">        </span><span class="c1"># absent_func  </span><span class="w">
</span><span class="k" data-group-id="0593295176-2">end</span><span class="w">

</span><span class="c1"># List reduction = folding</span><span class="w">
</span><span class="nc">Enum</span><span class="o">.</span><span class="n">reduce</span><span class="p" data-group-id="0593295176-5">(</span><span class="p" data-group-id="0593295176-6">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="0593295176-6">]</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="o">+</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="0593295176-5">)</span><span class="w">   </span><span class="c1"># Standard fold/reduce</span><span class="w">

</span><span class="c1"># Conditional logic = folding boolean structure</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="k" data-group-id="0593295176-7">do</span><span class="w">
  </span><span class="n">process</span><span class="p" data-group-id="0593295176-8">(</span><span class="n">user</span><span class="p" data-group-id="0593295176-8">)</span><span class="w">                   </span><span class="c1"># present_func</span><span class="w">
</span><span class="k" data-group-id="0593295176-7">else</span><span class="w">
  </span><span class="n">handle_missing</span><span class="p" data-group-id="0593295176-9">(</span><span class="p" data-group-id="0593295176-9">)</span><span class="w">                </span><span class="c1"># absent_func</span><span class="w">
</span><span class="k" data-group-id="0593295176-7">end</span></code></pre><p><strong>Foldable makes this pattern explicit and composable</strong> through protocol-based polymorphism.</p><h2 id="functional-programming-preference" class="section-heading">
  <a href="#functional-programming-preference" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Functional Programming Preference</span>
</h2>
<p><strong>In functional programming with Funx, prefer fold over:</strong></p><ul><li><strong>Imperative conditionals</strong>: <code class="inline">case</code>, <code class="inline">cond</code>, <code class="inline">if/else</code> statements  </li><li><strong>Elixir's <a href="https://hexdocs.pm/elixir/Enum.html#reduce/3"><code class="inline">Enum.reduce/3</code></a></strong>: When working with structures that might be empty</li><li><strong>Manual pattern matching</strong>: Scattered conditional logic throughout code</li></ul><p><strong>Why fold is better:</strong></p><ul><li><strong>Composable</strong>: Works in pipelines and with other functional operations</li><li><strong>Polymorphic</strong>: Same interface across different data types</li><li><strong>Consistent</strong>: Unified approach to conditional logic</li><li><strong>Safe</strong>: Always handles both present and absent cases explicitly</li></ul><h2 id="the-universal-folding-concept" class="section-heading">
  <a href="#the-universal-folding-concept" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">The Universal Folding Concept</span>
</h2>
<p><strong>Generic Pattern</strong>: <code class="inline">Structure + Logic → Single Value</code></p><p><strong>Structure-Specific Implementations</strong>:</p><ul><li><strong>Lists</strong>: Traversal + accumulation (using Erlang's <a href="https://www.erlang.org/doc/apps/stdlib/lists.html#foldl/3"><code class="inline">:lists.foldl/3</code></a>)</li><li><strong>Maybe/Either</strong>: Conditional branching (present vs absent logic)</li><li><strong>Predicates</strong>: Evaluation + branching (true/false cases)</li><li><strong>Tagged tuples</strong>: Success/error reconciliation</li></ul><p><strong>Same mental model everywhere</strong>: &quot;I have a structure, I want one value, here's logic for both cases.&quot;</p><h2 id="core-operations" class="section-heading">
  <a href="#core-operations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Core Operations</span>
</h2>
<h3 id="fold_l-3-universal-fold-operation" class="section-heading">
  <a href="#fold_l-3-universal-fold-operation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">fold_l/3</code> - Universal Fold Operation</span>
</h3>
<p>Collapses any structure using conditional functions:</p><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Foldable</span><span class="w">

</span><span class="c1"># Maybe: Extract with default</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="7813850852-1">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="7813850852-2">(</span><span class="mi">42</span><span class="p" data-group-id="7813850852-2">)</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7813850852-3">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k" data-group-id="7813850852-3">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7813850852-4">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="7813850852-4">end</span><span class="p" data-group-id="7813850852-1">)</span><span class="w">  </span><span class="c1"># 84</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="7813850852-5">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="7813850852-6">(</span><span class="p" data-group-id="7813850852-6">)</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7813850852-7">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k" data-group-id="7813850852-7">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7813850852-8">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="7813850852-8">end</span><span class="p" data-group-id="7813850852-5">)</span><span class="w">  </span><span class="c1"># 0</span><span class="w">

</span><span class="c1"># Either: Success/error handling  </span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="7813850852-9">(</span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="p" data-group-id="7813850852-10">(</span><span class="s">&quot;data&quot;</span><span class="p" data-group-id="7813850852-10">)</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">String</span><span class="o">.</span><span class="n">upcase</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7813850852-11">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;DEFAULT&quot;</span><span class="w"> </span><span class="k" data-group-id="7813850852-11">end</span><span class="p" data-group-id="7813850852-9">)</span><span class="w">  </span><span class="c1"># &quot;DATA&quot;</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="7813850852-12">(</span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="7813850852-13">(</span><span class="s">&quot;error&quot;</span><span class="p" data-group-id="7813850852-13">)</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">String</span><span class="o">.</span><span class="n">upcase</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7813850852-14">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;DEFAULT&quot;</span><span class="w"> </span><span class="k" data-group-id="7813850852-14">end</span><span class="p" data-group-id="7813850852-12">)</span><span class="w">   </span><span class="c1"># &quot;DEFAULT&quot;</span><span class="w">

</span><span class="c1"># List: Collection aggregation</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="7813850852-15">(</span><span class="p" data-group-id="7813850852-16">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="7813850852-16">]</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Enum</span><span class="o">.</span><span class="n">sum</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7813850852-17">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="7813850852-17">end</span><span class="p" data-group-id="7813850852-15">)</span><span class="w">  </span><span class="c1"># 6</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="7813850852-18">(</span><span class="p" data-group-id="7813850852-19">[</span><span class="p" data-group-id="7813850852-19">]</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Enum</span><span class="o">.</span><span class="n">sum</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7813850852-20">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="7813850852-20">end</span><span class="p" data-group-id="7813850852-18">)</span><span class="w">         </span><span class="c1"># 0</span></code></pre><p><strong>Use <code class="inline">fold_l</code> for:</strong></p><ul><li>Extracting concrete values from wrapped contexts</li><li>Providing defaults for empty cases</li><li>Pipeline exit points (monadic context → concrete value)</li><li>Standard choice for all folding operations</li></ul><h3 id="fold_r-3-right-associative-fold" class="section-heading">
  <a href="#fold_r-3-right-associative-fold" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><code class="inline">fold_r/3</code> - Right-Associative Fold</span>
</h3>
<p>Right-associative folding for ordered collections:</p><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Foldable</span><span class="w">

</span><span class="c1"># For branching structures, direction is irrelevant</span><span class="w">
</span><span class="n">fold_r</span><span class="p" data-group-id="2322735165-1">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="2322735165-2">(</span><span class="mi">42</span><span class="p" data-group-id="2322735165-2">)</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="2322735165-3">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k" data-group-id="2322735165-3">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="2322735165-4">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="2322735165-4">end</span><span class="p" data-group-id="2322735165-1">)</span><span class="w">  </span><span class="c1"># 84 (same as fold_l)</span><span class="w">

</span><span class="c1"># For ordered collections, direction affects traversal</span><span class="w">
</span><span class="n">fold_r</span><span class="p" data-group-id="2322735165-5">(</span><span class="p" data-group-id="2322735165-6">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="2322735165-6">]</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">build_right</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="2322735165-7">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">initial</span><span class="w"> </span><span class="k" data-group-id="2322735165-7">end</span><span class="p" data-group-id="2322735165-5">)</span><span class="w">  </span><span class="c1"># Right-to-left processing</span></code></pre><p><strong>Use <code class="inline">fold_r</code> when:</strong></p><ul><li>Working with ordered collections requiring right-associative folding</li><li>Specific algorithmic needs for traversal direction</li><li><strong>Note</strong>: Identical to <code class="inline">fold_l</code> for branching structures (Maybe, Either, predicates)</li></ul><h2 id="folding-types-two-categories" class="section-heading">
  <a href="#folding-types-two-categories" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Folding Types: Two Categories</span>
</h2>
<h3 id="1-branching-structures-context-reconciliation" class="section-heading">
  <a href="#1-branching-structures-context-reconciliation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">1. Branching Structures (Context Reconciliation)</span>
</h3>
<p><strong>Purpose</strong>: Exit strategy from monadic contexts</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Maybe folding - handle presence/absence</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">get_user_display_name</span><span class="p" data-group-id="5344461765-1">(</span><span class="n">maybe_user</span><span class="p" data-group-id="5344461765-1">)</span><span class="w"> </span><span class="k" data-group-id="5344461765-2">do</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="5344461765-3">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="5344461765-4">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="k" data-group-id="5344461765-4">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="5344461765-5">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Anonymous&quot;</span><span class="w"> </span><span class="k" data-group-id="5344461765-5">end</span><span class="p" data-group-id="5344461765-3">)</span><span class="w">
</span><span class="k" data-group-id="5344461765-2">end</span><span class="w">

</span><span class="c1"># Either folding - success/error reconciliation  </span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">process_api_result</span><span class="p" data-group-id="5344461765-6">(</span><span class="n">either_result</span><span class="p" data-group-id="5344461765-6">)</span><span class="w"> </span><span class="k" data-group-id="5344461765-7">do</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="5344461765-8">(</span><span class="w">
    </span><span class="n">either_result</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="5344461765-9">fn</span><span class="w"> </span><span class="n">success_data</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">format_success</span><span class="p" data-group-id="5344461765-10">(</span><span class="n">success_data</span><span class="p" data-group-id="5344461765-10">)</span><span class="w"> </span><span class="k" data-group-id="5344461765-9">end</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="5344461765-11">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Operation failed&quot;</span><span class="w"> </span><span class="k" data-group-id="5344461765-11">end</span><span class="w">
  </span><span class="p" data-group-id="5344461765-8">)</span><span class="w">
</span><span class="k" data-group-id="5344461765-7">end</span><span class="w">

</span><span class="c1"># Predicate folding - conditional execution</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">branch_on_condition</span><span class="p" data-group-id="5344461765-12">(</span><span class="n">predicate_fn</span><span class="p" data-group-id="5344461765-12">)</span><span class="w"> </span><span class="k" data-group-id="5344461765-13">do</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="5344461765-14">(</span><span class="w">
    </span><span class="n">predicate_fn</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="5344461765-15">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Condition met&quot;</span><span class="w"> </span><span class="k" data-group-id="5344461765-15">end</span><span class="p">,</span><span class="w">      </span><span class="c1"># If predicate returns true</span><span class="w">
    </span><span class="k" data-group-id="5344461765-16">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Condition not met&quot;</span><span class="w"> </span><span class="k" data-group-id="5344461765-16">end</span><span class="w">   </span><span class="c1"># If predicate returns false</span><span class="w">
  </span><span class="p" data-group-id="5344461765-14">)</span><span class="w">
</span><span class="k" data-group-id="5344461765-13">end</span></code></pre><p><strong>Characteristics</strong>:</p><ul><li><strong>Direction irrelevant</strong> - no traversal, just conditional logic</li><li><strong>Present/absent semantics</strong> </li><li><strong>Type reconciliation</strong> from wrapped to concrete values</li><li><strong>Pipeline exit points</strong></li></ul><h3 id="2-ordered-collections-aggregation-reduction" class="section-heading">
  <a href="#2-ordered-collections-aggregation-reduction" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">2. Ordered Collections (Aggregation/Reduction)</span>
</h3>
<p><strong>Purpose</strong>: Standard reduce operations using Erlang's fold functions</p><pre><code class="makeup elixir" translate="no"><span class="c1"># List aggregation</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">safe_sum</span><span class="p" data-group-id="6788880817-1">(</span><span class="n">list</span><span class="p" data-group-id="6788880817-1">)</span><span class="w"> </span><span class="k" data-group-id="6788880817-2">do</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="6788880817-3">(</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="6788880817-4">fn</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">sum</span><span class="p" data-group-id="6788880817-5">(</span><span class="n">items</span><span class="p" data-group-id="6788880817-5">)</span><span class="w"> </span><span class="k" data-group-id="6788880817-4">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="6788880817-6">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="6788880817-6">end</span><span class="p" data-group-id="6788880817-3">)</span><span class="w">
</span><span class="k" data-group-id="6788880817-2">end</span><span class="w">

</span><span class="c1"># Collection statistics</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">calculate_average</span><span class="p" data-group-id="6788880817-7">(</span><span class="n">numbers</span><span class="p" data-group-id="6788880817-7">)</span><span class="w"> </span><span class="k" data-group-id="6788880817-8">do</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="6788880817-9">(</span><span class="w">
    </span><span class="n">numbers</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="6788880817-10">fn</span><span class="w"> </span><span class="n">nums</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">sum</span><span class="p" data-group-id="6788880817-11">(</span><span class="n">nums</span><span class="p" data-group-id="6788880817-11">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">length</span><span class="p" data-group-id="6788880817-12">(</span><span class="n">nums</span><span class="p" data-group-id="6788880817-12">)</span><span class="w"> </span><span class="k" data-group-id="6788880817-10">end</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="6788880817-13">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="k" data-group-id="6788880817-13">end</span><span class="w">
  </span><span class="p" data-group-id="6788880817-9">)</span><span class="w">
</span><span class="k" data-group-id="6788880817-8">end</span><span class="w">

</span><span class="c1"># First element with default</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">first_or_default</span><span class="p" data-group-id="6788880817-14">(</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="p" data-group-id="6788880817-14">)</span><span class="w"> </span><span class="k" data-group-id="6788880817-15">do</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="6788880817-16">(</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="6788880817-17">fn</span><span class="w"> </span><span class="p" data-group-id="6788880817-18">[</span><span class="n">head</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="6788880817-18">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">head</span><span class="w"> </span><span class="k" data-group-id="6788880817-17">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="6788880817-19">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="k" data-group-id="6788880817-19">end</span><span class="p" data-group-id="6788880817-16">)</span><span class="w">
</span><span class="k" data-group-id="6788880817-15">end</span></code></pre><p><strong>Characteristics</strong>:</p><ul><li><strong>Direction matters</strong> - left-to-right vs right-to-left processing</li><li><strong>Accumulator patterns</strong> - building up results</li><li><strong>Uses Erlang's <a href="https://www.erlang.org/doc/apps/stdlib/lists.html#foldl/3"><code class="inline">:lists.foldl/3</code></a> and <a href="https://www.erlang.org/doc/apps/stdlib/lists.html#foldr/3"><code class="inline">:lists.foldr/3</code></a></strong></li><li><strong>Performance considerations</strong> for large collections</li></ul><h2 id="common-folding-patterns" class="section-heading">
  <a href="#common-folding-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Common Folding Patterns</span>
</h2>
<h3 id="1-pipeline-exit-pattern" class="section-heading">
  <a href="#1-pipeline-exit-pattern" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">1. Pipeline Exit Pattern</span>
</h3>
<p><strong>Problem</strong>: Need concrete value from monadic pipeline
<strong>Solution</strong>: Use fold as final step</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Manage control logic within pipeline, extract at end</span><span class="w">
</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> 
  </span><span class="n">user_id</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">fetch_user</span><span class="p" data-group-id="6602124294-1">(</span><span class="p" data-group-id="6602124294-1">)</span><span class="w">                    </span><span class="c1"># Maybe User - handles not found</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="6602124294-2">(</span><span class="o">&amp;</span><span class="n">validate_permissions</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="6602124294-2">)</span><span class="w">   </span><span class="c1"># Maybe User - handles validation</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="6602124294-3">(</span><span class="o">&amp;</span><span class="n">get_dashboard_data</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="6602124294-3">)</span><span class="w">      </span><span class="c1"># Maybe Dashboard - transforms if valid</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">filter</span><span class="p" data-group-id="6602124294-4">(</span><span class="o">&amp;</span><span class="n">has_recent_activity?</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="6602124294-4">)</span><span class="w"> </span><span class="c1"># Maybe Dashboard - conditional retention</span><span class="w">
  </span><span class="c1"># All control logic managed within Maybe context ↑</span><span class="w">
  
  </span><span class="c1"># Extract concrete value at pipeline boundary ↓</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">fold_l</span><span class="p" data-group-id="6602124294-5">(</span><span class="w">
      </span><span class="k" data-group-id="6602124294-6">fn</span><span class="w"> </span><span class="n">dashboard</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">render_dashboard</span><span class="p" data-group-id="6602124294-7">(</span><span class="n">dashboard</span><span class="p" data-group-id="6602124294-7">)</span><span class="w"> </span><span class="k" data-group-id="6602124294-6">end</span><span class="p">,</span><span class="w">  </span><span class="c1"># success path</span><span class="w">
      </span><span class="k" data-group-id="6602124294-8">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">render_login_prompt</span><span class="p" data-group-id="6602124294-9">(</span><span class="p" data-group-id="6602124294-9">)</span><span class="w"> </span><span class="k" data-group-id="6602124294-8">end</span><span class="w">                   </span><span class="c1"># any failure path</span><span class="w">
    </span><span class="p" data-group-id="6602124294-5">)</span></code></pre><h3 id="2-default-value-pattern" class="section-heading">
  <a href="#2-default-value-pattern" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">2. Default Value Pattern</span>
</h3>
<p><strong>Problem</strong>: Need fallbacks for missing/empty values
<strong>Solution</strong>: Use convenience functions for simple cases, fold for complex cases</p><pre><code class="makeup elixir" translate="no"><span class="c1"># ✅ Simple default - use convenience functions</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">with_simple_default</span><span class="p" data-group-id="8634553160-1">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="p" data-group-id="8634553160-1">)</span><span class="w"> </span><span class="k" data-group-id="8634553160-2">do</span><span class="w">
  </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">get_or_else</span><span class="p" data-group-id="8634553160-3">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="p" data-group-id="8634553160-3">)</span><span class="w">
</span><span class="k" data-group-id="8634553160-2">end</span><span class="w">

</span><span class="kd">def</span><span class="w"> </span><span class="nf">with_simple_either_default</span><span class="p" data-group-id="8634553160-4">(</span><span class="n">either_value</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="p" data-group-id="8634553160-4">)</span><span class="w"> </span><span class="k" data-group-id="8634553160-5">do</span><span class="w">
  </span><span class="nc">Either</span><span class="o">.</span><span class="n">get_or_else</span><span class="p" data-group-id="8634553160-6">(</span><span class="n">either_value</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="p" data-group-id="8634553160-6">)</span><span class="w">
</span><span class="k" data-group-id="8634553160-5">end</span><span class="w">

</span><span class="c1"># ✅ Complex transformations - use fold</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">with_complex_transformation</span><span class="p" data-group-id="8634553160-7">(</span><span class="n">maybe_value</span><span class="p" data-group-id="8634553160-7">)</span><span class="w"> </span><span class="k" data-group-id="8634553160-8">do</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="8634553160-9">(</span><span class="w">
    </span><span class="n">maybe_value</span><span class="p">,</span><span class="w"> 
    </span><span class="k" data-group-id="8634553160-10">fn</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">transform_and_process</span><span class="p" data-group-id="8634553160-11">(</span><span class="n">value</span><span class="p" data-group-id="8634553160-11">)</span><span class="w"> </span><span class="k" data-group-id="8634553160-10">end</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="8634553160-12">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">expensive_computation</span><span class="p" data-group-id="8634553160-13">(</span><span class="p" data-group-id="8634553160-13">)</span><span class="w"> </span><span class="k" data-group-id="8634553160-12">end</span><span class="w">
  </span><span class="p" data-group-id="8634553160-9">)</span><span class="w">
</span><span class="k" data-group-id="8634553160-8">end</span><span class="w">

</span><span class="c1"># Chained fallbacks</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">first_available</span><span class="p" data-group-id="8634553160-14">(</span><span class="n">maybes</span><span class="p" data-group-id="8634553160-14">)</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_list</span><span class="p" data-group-id="8634553160-15">(</span><span class="n">maybes</span><span class="p" data-group-id="8634553160-15">)</span><span class="w"> </span><span class="k" data-group-id="8634553160-16">do</span><span class="w">
  </span><span class="nc">Enum</span><span class="o">.</span><span class="n">reduce</span><span class="p" data-group-id="8634553160-17">(</span><span class="n">maybes</span><span class="p">,</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="8634553160-18">(</span><span class="p" data-group-id="8634553160-18">)</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="8634553160-19">fn</span><span class="w"> </span><span class="n">maybe</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="n">fold_l</span><span class="p" data-group-id="8634553160-20">(</span><span class="n">acc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="8634553160-21">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">maybe</span><span class="w"> </span><span class="k" data-group-id="8634553160-21">end</span><span class="p" data-group-id="8634553160-20">)</span><span class="w">
  </span><span class="k" data-group-id="8634553160-19">end</span><span class="p" data-group-id="8634553160-17">)</span><span class="w">
</span><span class="k" data-group-id="8634553160-16">end</span></code></pre><h3 id="3-tagged-tuple-reconciliation-pattern" class="section-heading">
  <a href="#3-tagged-tuple-reconciliation-pattern" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">3. Tagged Tuple Reconciliation Pattern</span>
</h3>
<p><strong>Problem</strong>: Handle <code class="inline">{:ok, value}</code> / <code class="inline">{:error, reason}</code> results
<strong>Solution</strong>: Convert to Either, then fold</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">handle_api_call</span><span class="p" data-group-id="8439945721-1">(</span><span class="n">params</span><span class="p" data-group-id="8439945721-1">)</span><span class="w"> </span><span class="k" data-group-id="8439945721-2">do</span><span class="w">
  </span><span class="n">params</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">make_api_request</span><span class="p" data-group-id="8439945721-3">(</span><span class="p" data-group-id="8439945721-3">)</span><span class="w">              </span><span class="c1"># {:ok, data} | {:error, reason}</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">from_tagged</span><span class="p" data-group-id="8439945721-4">(</span><span class="p" data-group-id="8439945721-4">)</span><span class="w">            </span><span class="c1"># Either.Right | Either.Left</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">fold_l</span><span class="p" data-group-id="8439945721-5">(</span><span class="w">
      </span><span class="k" data-group-id="8439945721-6">fn</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">process_success</span><span class="p" data-group-id="8439945721-7">(</span><span class="n">data</span><span class="p" data-group-id="8439945721-7">)</span><span class="w"> </span><span class="k" data-group-id="8439945721-6">end</span><span class="p">,</span><span class="w">
      </span><span class="k" data-group-id="8439945721-8">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">handle_api_error</span><span class="p" data-group-id="8439945721-9">(</span><span class="p" data-group-id="8439945721-9">)</span><span class="w"> </span><span class="k" data-group-id="8439945721-8">end</span><span class="w">
    </span><span class="p" data-group-id="8439945721-5">)</span><span class="w">
</span><span class="k" data-group-id="8439945721-2">end</span></code></pre><h3 id="4-collection-aggregation-pattern" class="section-heading">
  <a href="#4-collection-aggregation-pattern" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">4. Collection Aggregation Pattern</span>
</h3>
<p><strong>Problem</strong>: Safely aggregate collections that might be empty
<strong>Solution</strong>: Use fold with aggregation and default functions</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Safe mathematical operations</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">safe_average</span><span class="p" data-group-id="5370836358-1">(</span><span class="n">numbers</span><span class="p" data-group-id="5370836358-1">)</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_list</span><span class="p" data-group-id="5370836358-2">(</span><span class="n">numbers</span><span class="p" data-group-id="5370836358-2">)</span><span class="w"> </span><span class="k" data-group-id="5370836358-3">do</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="k" data-group-id="5370836358-4">do</span><span class="w">
    </span><span class="p" data-group-id="5370836358-5">[</span><span class="p" data-group-id="5370836358-5">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">fold_l</span><span class="p" data-group-id="5370836358-6">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="5370836358-7">(</span><span class="p" data-group-id="5370836358-7">)</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Function</span><span class="o">.</span><span class="n">identity</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="5370836358-8">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="k" data-group-id="5370836358-8">end</span><span class="p" data-group-id="5370836358-6">)</span><span class="w">
    </span><span class="n">nums</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">fold_l</span><span class="p" data-group-id="5370836358-9">(</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5370836358-10">(</span><span class="n">nums</span><span class="p" data-group-id="5370836358-10">)</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="5370836358-11">fn</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">sum</span><span class="p" data-group-id="5370836358-12">(</span><span class="n">ns</span><span class="p" data-group-id="5370836358-12">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">length</span><span class="p" data-group-id="5370836358-13">(</span><span class="n">ns</span><span class="p" data-group-id="5370836358-13">)</span><span class="w"> </span><span class="k" data-group-id="5370836358-11">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="5370836358-14">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="k" data-group-id="5370836358-14">end</span><span class="p" data-group-id="5370836358-9">)</span><span class="w">
  </span><span class="k" data-group-id="5370836358-4">end</span><span class="w">
</span><span class="k" data-group-id="5370836358-3">end</span><span class="w">

</span><span class="c1"># Resource utilization</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">calculate_usage</span><span class="p" data-group-id="5370836358-15">(</span><span class="n">maybe_metrics</span><span class="p" data-group-id="5370836358-15">)</span><span class="w"> </span><span class="k" data-group-id="5370836358-16">do</span><span class="w">
  </span><span class="n">fold_l</span><span class="p" data-group-id="5370836358-17">(</span><span class="w">
    </span><span class="n">maybe_metrics</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="5370836358-18">fn</span><span class="w"> </span><span class="n">metrics</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="p" data-group-id="5370836358-19">%{</span><span class="w">
        </span><span class="ss">total</span><span class="p">:</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">sum</span><span class="p" data-group-id="5370836358-20">(</span><span class="n">metrics</span><span class="p" data-group-id="5370836358-20">)</span><span class="p">,</span><span class="w">
        </span><span class="ss">average</span><span class="p">:</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">sum</span><span class="p" data-group-id="5370836358-21">(</span><span class="n">metrics</span><span class="p" data-group-id="5370836358-21">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">length</span><span class="p" data-group-id="5370836358-22">(</span><span class="n">metrics</span><span class="p" data-group-id="5370836358-22">)</span><span class="p">,</span><span class="w">
        </span><span class="ss">peak</span><span class="p">:</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">max</span><span class="p" data-group-id="5370836358-23">(</span><span class="n">metrics</span><span class="p" data-group-id="5370836358-23">)</span><span class="w">
      </span><span class="p" data-group-id="5370836358-19">}</span><span class="w">
    </span><span class="k" data-group-id="5370836358-18">end</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="5370836358-24">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="5370836358-25">%{</span><span class="ss">total</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">average</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="ss">peak</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="5370836358-25">}</span><span class="w"> </span><span class="k" data-group-id="5370836358-24">end</span><span class="w">
  </span><span class="p" data-group-id="5370836358-17">)</span><span class="w">
</span><span class="k" data-group-id="5370836358-16">end</span></code></pre><h2 id="protocol-implementations" class="section-heading">
  <a href="#protocol-implementations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Protocol Implementations</span>
</h2>
<p>Foldable uses <strong>protocol-based polymorphism</strong> - same interface, different runtime behavior:</p><h3 id="branching-structures-conditional-logic" class="section-heading">
  <a href="#branching-structures-conditional-logic" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Branching Structures (Conditional Logic)</span>
</h3>
<p><strong>Maybe Types</strong>:</p><ul><li><code class="inline">Just</code>: Calls <code class="inline">present_func</code> with wrapped value</li><li><code class="inline">Nothing</code>: Calls <code class="inline">absent_func</code> with no arguments</li></ul><p><strong>Either Types</strong>:</p><ul><li><code class="inline">Right</code>: Calls <code class="inline">present_func</code> with success value  </li><li><code class="inline">Left</code>: Calls <code class="inline">absent_func</code> (ignores error details)</li></ul><p><strong>Predicates (Functions)</strong>:</p><ul><li>Evaluates predicate function</li><li>Calls <code class="inline">present_func</code> if true, <code class="inline">absent_func</code> if false</li></ul><h3 id="ordered-collections-traversal-logic" class="section-heading">
  <a href="#ordered-collections-traversal-logic" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Ordered Collections (Traversal Logic)</span>
</h3>
<p><strong>Lists</strong>:</p><ul><li>Non-empty: Calls <code class="inline">present_func</code> with entire list</li><li>Empty: Calls <code class="inline">absent_func</code></li><li>Uses Erlang's <a href="https://www.erlang.org/doc/apps/stdlib/lists.html#foldl/3"><code class="inline">:lists.foldl/3</code></a> and <a href="https://www.erlang.org/doc/apps/stdlib/lists.html#foldr/3"><code class="inline">:lists.foldr/3</code></a> internally</li></ul><p><strong>Ranges</strong>:</p><ul><li>Non-empty: Calls <code class="inline">present_func</code> with range</li><li>Empty: Calls <code class="inline">absent_func</code>  </li><li>Direction affects traversal order</li></ul><h2 id="integration-with-other-protocols" class="section-heading">
  <a href="#integration-with-other-protocols" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Integration with Other Protocols</span>
</h2>
<h3 id="fold-monad-pipeline-exit" class="section-heading">
  <a href="#fold-monad-pipeline-exit" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fold + Monad (Pipeline Exit)</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Foldable</span><span class="w">  
</span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Monad</span><span class="w">

</span><span class="c1"># Monadic pipeline with fold extraction</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">user_dashboard_workflow</span><span class="p" data-group-id="0770563806-1">(</span><span class="n">user_id</span><span class="p" data-group-id="0770563806-1">)</span><span class="w"> </span><span class="k" data-group-id="0770563806-2">do</span><span class="w">
  </span><span class="n">user_id</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">fetch_user</span><span class="p" data-group-id="0770563806-3">(</span><span class="p" data-group-id="0770563806-3">)</span><span class="w">                    </span><span class="c1"># Maybe User</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="0770563806-4">(</span><span class="o">&amp;</span><span class="n">validate_user</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="0770563806-4">)</span><span class="w">          </span><span class="c1"># Maybe ValidUser  </span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="0770563806-5">(</span><span class="o">&amp;</span><span class="n">build_dashboard</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="0770563806-5">)</span><span class="w">         </span><span class="c1"># Maybe Dashboard</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">fold_l</span><span class="p" data-group-id="0770563806-6">(</span><span class="w">
      </span><span class="k" data-group-id="0770563806-7">fn</span><span class="w"> </span><span class="n">dashboard</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="0770563806-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">dashboard</span><span class="p" data-group-id="0770563806-8">}</span><span class="w"> </span><span class="k" data-group-id="0770563806-7">end</span><span class="p">,</span><span class="w">
      </span><span class="k" data-group-id="0770563806-9">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="0770563806-10">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:user_not_found</span><span class="p" data-group-id="0770563806-10">}</span><span class="w"> </span><span class="k" data-group-id="0770563806-9">end</span><span class="w">
    </span><span class="p" data-group-id="0770563806-6">)</span><span class="w">
</span><span class="k" data-group-id="0770563806-2">end</span></code></pre><h3 id="fold-filter-conditional-aggregation" class="section-heading">
  <a href="#fold-filter-conditional-aggregation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fold + Filter (Conditional Aggregation)</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Foldable</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Filterable</span><span class="w">

</span><span class="c1"># Filter then aggregate</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">process_valid_data</span><span class="p" data-group-id="1421606032-1">(</span><span class="n">maybe_users</span><span class="p" data-group-id="1421606032-1">)</span><span class="w"> </span><span class="k" data-group-id="1421606032-2">do</span><span class="w">
  </span><span class="n">maybe_users</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">filter</span><span class="p" data-group-id="1421606032-3">(</span><span class="k" data-group-id="1421606032-4">fn</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">length</span><span class="p" data-group-id="1421606032-5">(</span><span class="n">users</span><span class="p" data-group-id="1421606032-5">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="1421606032-4">end</span><span class="p" data-group-id="1421606032-3">)</span><span class="w">    </span><span class="c1"># Keep non-empty</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">fold_l</span><span class="p" data-group-id="1421606032-6">(</span><span class="k" data-group-id="1421606032-7">fn</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">analyze_users</span><span class="p" data-group-id="1421606032-8">(</span><span class="n">users</span><span class="p" data-group-id="1421606032-8">)</span><span class="w"> </span><span class="k" data-group-id="1421606032-7">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="1421606032-9">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">default_analysis</span><span class="p" data-group-id="1421606032-10">(</span><span class="p" data-group-id="1421606032-10">)</span><span class="w"> </span><span class="k" data-group-id="1421606032-9">end</span><span class="p" data-group-id="1421606032-6">)</span><span class="w">
</span><span class="k" data-group-id="1421606032-2">end</span></code></pre><h2 id="performance-considerations" class="section-heading">
  <a href="#performance-considerations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Performance Considerations</span>
</h2>
<h3 id="lazy-evaluation-benefits" class="section-heading">
  <a href="#lazy-evaluation-benefits" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Lazy Evaluation Benefits</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Expensive computations only execute when needed</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="1872302796-1">(</span><span class="w">
  </span><span class="n">maybe_data</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="1872302796-2">fn</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">expensive_processing</span><span class="p" data-group-id="1872302796-3">(</span><span class="n">data</span><span class="p" data-group-id="1872302796-3">)</span><span class="w"> </span><span class="k" data-group-id="1872302796-2">end</span><span class="p">,</span><span class="w">    </span><span class="c1"># Only runs if present</span><span class="w">
  </span><span class="k" data-group-id="1872302796-4">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">expensive_default</span><span class="p" data-group-id="1872302796-5">(</span><span class="p" data-group-id="1872302796-5">)</span><span class="w"> </span><span class="k" data-group-id="1872302796-4">end</span><span class="w">                 </span><span class="c1"># Only runs if absent</span><span class="w">
</span><span class="p" data-group-id="1872302796-1">)</span></code></pre><h3 id="short-circuiting-for-empty-structures" class="section-heading">
  <a href="#short-circuiting-for-empty-structures" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Short-Circuiting for Empty Structures</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Early return for empty cases</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="6959781687-1">(</span><span class="w">
  </span><span class="n">empty_list</span><span class="p">,</span><span class="w">
  </span><span class="k" data-group-id="6959781687-2">fn</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">complex_calculation</span><span class="p" data-group-id="6959781687-3">(</span><span class="p" data-group-id="6959781687-3">)</span><span class="w"> </span><span class="k" data-group-id="6959781687-2">end</span><span class="p">,</span><span class="w">    </span><span class="c1"># Never executes</span><span class="w">
  </span><span class="k" data-group-id="6959781687-4">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="6959781687-4">end</span><span class="w">                          </span><span class="c1"># Returns immediately</span><span class="w">
</span><span class="p" data-group-id="6959781687-1">)</span></code></pre><h3 id="memory-efficiency" class="section-heading">
  <a href="#memory-efficiency" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Memory Efficiency</span>
</h3>
<ul><li><strong>No intermediate collections</strong> created during folding</li><li><strong>Direct value transformation</strong> without temporary structures</li><li><strong>Tail recursion optimization</strong> for large list folds</li></ul><h2 id="troubleshooting-common-issues" class="section-heading">
  <a href="#troubleshooting-common-issues" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Troubleshooting Common Issues</span>
</h2>
<h3 id="issue-missing-absent-function" class="section-heading">
  <a href="#issue-missing-absent-function" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Issue: Missing Absent Function</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Problem: Only considering present case</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="0090295848-1">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0090295848-2">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="k" data-group-id="0090295848-2">end</span><span class="p" data-group-id="0090295848-1">)</span><span class="w">  </span><span class="c1"># Compiler error!</span><span class="w">

</span><span class="c1"># ✅ Solution: Always provide both functions  </span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="0090295848-3">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0090295848-4">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="k" data-group-id="0090295848-4">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0090295848-5">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Unknown&quot;</span><span class="w"> </span><span class="k" data-group-id="0090295848-5">end</span><span class="p" data-group-id="0090295848-3">)</span></code></pre><h3 id="issue-wrong-function-arity" class="section-heading">
  <a href="#issue-wrong-function-arity" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Issue: Wrong Function Arity</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Problem: absent_func expecting parameters</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="7274771734-1">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7274771734-2">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k" data-group-id="7274771734-2">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7274771734-3">fn</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="k" data-group-id="7274771734-3">end</span><span class="p" data-group-id="7274771734-1">)</span><span class="w">  </span><span class="c1"># Wrong!</span><span class="w">

</span><span class="c1"># ✅ Solution: absent_func takes no arguments</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="7274771734-4">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7274771734-5">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k" data-group-id="7274771734-5">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7274771734-6">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">default_value</span><span class="w"> </span><span class="k" data-group-id="7274771734-6">end</span><span class="p" data-group-id="7274771734-4">)</span></code></pre><h3 id="issue-confusing-fold-direction" class="section-heading">
  <a href="#issue-confusing-fold-direction" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Issue: Confusing Fold Direction</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Problem: Thinking direction matters for Maybe/Either</span><span class="w">
</span><span class="n">fold_r</span><span class="p" data-group-id="8742251315-1">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w"> </span><span class="n">present_func</span><span class="p">,</span><span class="w"> </span><span class="n">absent_func</span><span class="p" data-group-id="8742251315-1">)</span><span class="w">  </span><span class="c1"># Same as fold_l!</span><span class="w">

</span><span class="c1"># ✅ Understanding: Direction only matters for ordered collections</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="8742251315-2">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w"> </span><span class="n">present_func</span><span class="p">,</span><span class="w"> </span><span class="n">absent_func</span><span class="p" data-group-id="8742251315-2">)</span><span class="w">  </span><span class="c1"># Standard choice</span><span class="w">
</span><span class="n">fold_r</span><span class="p" data-group-id="8742251315-3">(</span><span class="p" data-group-id="8742251315-4">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p" data-group-id="8742251315-4">]</span><span class="p">,</span><span class="w"> </span><span class="n">combine_func</span><span class="p">,</span><span class="w"> </span><span class="n">default_func</span><span class="p" data-group-id="8742251315-3">)</span><span class="w">     </span><span class="c1"># Direction affects traversal</span></code></pre><h3 id="issue-using-fold-instead-of-map-bind" class="section-heading">
  <a href="#issue-using-fold-instead-of-map-bind" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Issue: Using Fold Instead of Map/Bind</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Problem: Using fold when you want to stay in context</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="8313053224-1">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="8313053224-2">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="8313053224-3">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p" data-group-id="8313053224-3">)</span><span class="w"> </span><span class="k" data-group-id="8313053224-2">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="8313053224-4">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="8313053224-5">(</span><span class="p" data-group-id="8313053224-5">)</span><span class="w"> </span><span class="k" data-group-id="8313053224-4">end</span><span class="p" data-group-id="8313053224-1">)</span><span class="w">

</span><span class="c1"># ✅ Solution: Use map to transform within context</span><span class="w">
</span><span class="n">map</span><span class="p" data-group-id="8313053224-6">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="8313053224-7">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="k" data-group-id="8313053224-7">end</span><span class="p" data-group-id="8313053224-6">)</span><span class="w">  </span><span class="c1"># Stays in Maybe context</span></code></pre><h2 id="when-not-to-use-foldable" class="section-heading">
  <a href="#when-not-to-use-foldable" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">When NOT to Use Foldable</span>
</h2>
<h3 id="use-convenience-functions-for-simple-default-values" class="section-heading">
  <a href="#use-convenience-functions-for-simple-default-values" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Use Convenience Functions for Simple Default Values</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Manual fold for simple default values</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="0304948071-1">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Function</span><span class="o">.</span><span class="n">identity</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0304948071-2">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Anonymous&quot;</span><span class="w"> </span><span class="k" data-group-id="0304948071-2">end</span><span class="p" data-group-id="0304948071-1">)</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="0304948071-3">(</span><span class="n">either_result</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Function</span><span class="o">.</span><span class="n">identity</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0304948071-4">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Error&quot;</span><span class="w"> </span><span class="k" data-group-id="0304948071-4">end</span><span class="p" data-group-id="0304948071-3">)</span><span class="w">

</span><span class="c1"># ✅ Use convenience functions</span><span class="w">
</span><span class="nc">Maybe</span><span class="o">.</span><span class="n">get_or_else</span><span class="p" data-group-id="0304948071-5">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Anonymous&quot;</span><span class="p" data-group-id="0304948071-5">)</span><span class="w">
</span><span class="nc">Either</span><span class="o">.</span><span class="n">get_or_else</span><span class="p" data-group-id="0304948071-6">(</span><span class="n">either_result</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Error&quot;</span><span class="p" data-group-id="0304948071-6">)</span></code></pre><h3 id="use-map-when-staying-in-context" class="section-heading">
  <a href="#use-map-when-staying-in-context" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Use Map When Staying in Context</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Fold to transform while keeping structure</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="5954988618-1">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="5954988618-2">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="5954988618-3">(</span><span class="n">transform</span><span class="p" data-group-id="5954988618-4">(</span><span class="n">user</span><span class="p" data-group-id="5954988618-4">)</span><span class="p" data-group-id="5954988618-3">)</span><span class="w"> </span><span class="k" data-group-id="5954988618-2">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="5954988618-5">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="5954988618-6">(</span><span class="p" data-group-id="5954988618-6">)</span><span class="w"> </span><span class="k" data-group-id="5954988618-5">end</span><span class="p" data-group-id="5954988618-1">)</span><span class="w">

</span><span class="c1"># ✅ Map to transform while preserving context</span><span class="w">
</span><span class="n">map</span><span class="p" data-group-id="5954988618-7">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">transform</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="5954988618-7">)</span><span class="w">  </span><span class="c1"># Result is still Maybe</span></code></pre><h3 id="use-bind-for-monadic-chaining" class="section-heading">
  <a href="#use-bind-for-monadic-chaining" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Use Bind for Monadic Chaining</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Fold for operations returning wrapped values</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="8715275975-1">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="8715275975-2">fn</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">fetch_profile</span><span class="p" data-group-id="8715275975-3">(</span><span class="n">user</span><span class="p" data-group-id="8715275975-3">)</span><span class="w"> </span><span class="k" data-group-id="8715275975-2">end</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="8715275975-4">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="8715275975-5">(</span><span class="p" data-group-id="8715275975-5">)</span><span class="w"> </span><span class="k" data-group-id="8715275975-4">end</span><span class="p" data-group-id="8715275975-1">)</span><span class="w">

</span><span class="c1"># ✅ Bind for monadic sequencing</span><span class="w">
</span><span class="n">bind</span><span class="p" data-group-id="8715275975-6">(</span><span class="n">maybe_user</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">fetch_profile</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="8715275975-6">)</span><span class="w">  </span><span class="c1"># Flattens nested Maybe</span></code></pre><h3 id="use-filter-for-conditional-retention" class="section-heading">
  <a href="#use-filter-for-conditional-retention" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Use Filter for Conditional Retention</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Fold for conditional value retention</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="9890898067-1">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="9890898067-2">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">just</span><span class="p" data-group-id="9890898067-3">(</span><span class="n">x</span><span class="p" data-group-id="9890898067-3">)</span><span class="p">,</span><span class="w"> </span><span class="ss">else</span><span class="p">:</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="9890898067-4">(</span><span class="p" data-group-id="9890898067-4">)</span><span class="w"> </span><span class="k" data-group-id="9890898067-2">end</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="9890898067-1">)</span><span class="w">

</span><span class="c1"># ✅ Filter for conditional retention within context</span><span class="w">
</span><span class="n">filter</span><span class="p" data-group-id="9890898067-5">(</span><span class="n">maybe_value</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="9890898067-6">fn</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="9890898067-6">end</span><span class="p" data-group-id="9890898067-5">)</span></code></pre><h2 id="best-practices" class="section-heading">
  <a href="#best-practices" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Best Practices</span>
</h2>
<h3 id="1-fold-as-universal-recursion-eliminator" class="section-heading">
  <a href="#1-fold-as-universal-recursion-eliminator" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">1. Fold as Universal Recursion Eliminator</span>
</h3>
<p>Prefer fold over explicit pattern matching for composability:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># ❌ Imperative: Scattered case statements</span><span class="w">
</span><span class="k">case</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="k" data-group-id="5469278883-1">do</span><span class="w">
  </span><span class="p" data-group-id="5469278883-2">%</span><span class="nc" data-group-id="5469278883-2">Either.Right</span><span class="p" data-group-id="5469278883-2">{</span><span class="ss">right</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="5469278883-2">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">process</span><span class="p" data-group-id="5469278883-3">(</span><span class="n">value</span><span class="p" data-group-id="5469278883-3">)</span><span class="w">
  </span><span class="p" data-group-id="5469278883-4">%</span><span class="nc" data-group-id="5469278883-4">Either.Left</span><span class="p" data-group-id="5469278883-4">{</span><span class="p" data-group-id="5469278883-4">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">default</span><span class="w">
</span><span class="k" data-group-id="5469278883-1">end</span><span class="w">

</span><span class="c1"># ✅ Functional: Consistent fold interface  </span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="5469278883-5">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">process</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="5469278883-6">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="k" data-group-id="5469278883-6">end</span><span class="p" data-group-id="5469278883-5">)</span><span class="w">

</span><span class="c1"># ❌ Imperative: Manual reduce with conditionals</span><span class="w">
</span><span class="k">case</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="k" data-group-id="5469278883-7">do</span><span class="w">
  </span><span class="p" data-group-id="5469278883-8">[</span><span class="p" data-group-id="5469278883-8">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="n">nums</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">reduce</span><span class="p" data-group-id="5469278883-9">(</span><span class="n">nums</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="o">+</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="5469278883-9">)</span><span class="w">
</span><span class="k" data-group-id="5469278883-7">end</span><span class="w">

</span><span class="c1"># ✅ Functional: Fold handles empty case automatically</span><span class="w">
</span><span class="n">fold_l</span><span class="p" data-group-id="5469278883-10">(</span><span class="n">numbers</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Enum</span><span class="o">.</span><span class="n">sum</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="5469278883-11">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="5469278883-11">end</span><span class="p" data-group-id="5469278883-10">)</span></code></pre><h3 id="2-stay-in-context-fold-at-boundaries" class="section-heading">
  <a href="#2-stay-in-context-fold-at-boundaries" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">2. Stay in Context, Fold at Boundaries</span>
</h3>
<p>Keep computations in monadic context as long as possible:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Do all transformations in wrapped context</span><span class="w">
</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> 
  </span><span class="n">input</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Maybe</span><span class="o">.</span><span class="n">pure</span><span class="p" data-group-id="3860567039-1">(</span><span class="p" data-group-id="3860567039-1">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="3860567039-2">(</span><span class="o">&amp;</span><span class="n">transform1</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="3860567039-2">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="3860567039-3">(</span><span class="o">&amp;</span><span class="n">transform2</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="3860567039-3">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="3860567039-4">(</span><span class="o">&amp;</span><span class="n">transform3</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="3860567039-4">)</span><span class="w">
  </span><span class="c1"># Stay in Maybe context ↑</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">fold_l</span><span class="p" data-group-id="3860567039-5">(</span><span class="o">&amp;</span><span class="n">finalize</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="3860567039-6">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">default_result</span><span class="w"> </span><span class="k" data-group-id="3860567039-6">end</span><span class="p" data-group-id="3860567039-5">)</span><span class="w">  </span><span class="c1"># Exit to concrete value ↓</span></code></pre><h3 id="3-fold-monoid-for-powerful-aggregation" class="section-heading">
  <a href="#3-fold-monoid-for-powerful-aggregation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">3. Fold + Monoid for Powerful Aggregation</span>
</h3>
<p>Combine folding with monoid operations:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Aggregate with monoid combination</span><span class="w">
</span><span class="n">scores</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="0505018909-1">(</span><span class="o">&amp;</span><span class="n">calculate_score</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="0505018909-1">)</span><span class="w">           </span><span class="c1"># Transform to scores</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">fold_l</span><span class="p" data-group-id="0505018909-2">(</span><span class="o">&amp;</span><span class="nc">Enum</span><span class="o">.</span><span class="n">sum</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0505018909-3">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k" data-group-id="0505018909-3">end</span><span class="p" data-group-id="0505018909-2">)</span><span class="w">       </span><span class="c1"># Aggregate with + monoid</span></code></pre><h3 id="4-type-driven-folding" class="section-heading">
  <a href="#4-type-driven-folding" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">4. Type-Driven Folding</span>
</h3>
<p>Let types guide fold usage:</p><ul><li><strong>Have wrapped value, need concrete result</strong> → Use fold</li><li><strong>Have collection, need summary</strong> → Use fold  </li><li><strong>Have computation that might fail, need final result</strong> → Use fold</li></ul><h2 id="summary" class="section-heading">
  <a href="#summary" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Summary</span>
</h2>
<p>Foldable provides <strong>polymorphic folding</strong> - the universal pattern for collapsing structures into single values:</p><p><strong>Core Operations:</strong></p><ul><li><code class="inline">fold_l/3</code>: Universal fold operation (standard choice)</li><li><code class="inline">fold_r/3</code>: Right-associative fold (for ordered collections needing specific direction)</li></ul><p><strong>Two Folding Categories:</strong></p><ul><li><strong>Branching structures</strong> (Maybe, Either, predicates): Context reconciliation through conditional logic</li><li><strong>Ordered collections</strong> (List, Range): Aggregation/reduction using Erlang's fold functions</li></ul><p><strong>Key Patterns:</strong></p><ul><li><strong>Pipeline exit</strong>: Extract concrete values from monadic contexts</li><li><strong>Default provision</strong>: Handle empty/missing cases with fallbacks</li><li><strong>Tagged tuple reconciliation</strong>: Convert success/error tuples to single results  </li><li><strong>Collection aggregation</strong>: Safely collapse collections with default handling</li></ul><p><strong>Universal Insight:</strong></p><p>Folding is everywhere in programming - pattern matching, conditionals, reductions are all forms of folding. The <code class="inline">Foldable</code> protocol makes this pattern <strong>explicit, composable, and polymorphic</strong>.</p><p><strong>Functional Programming Philosophy:</strong></p><p>In Funx, <strong>prefer fold over imperative conditionals and manual reduce operations</strong>. Fold provides:</p><ul><li><strong>Unified interface</strong> across all data types</li><li><strong>Composable operations</strong> that work in pipelines  </li><li><strong>Explicit handling</strong> of both success and failure cases</li><li><strong>Type safety</strong> through protocol dispatch</li></ul><p><strong>Mental Model</strong>: &quot;I have a structure that might be empty, I need a concrete value, here's logic for both cases.&quot;</p><p>Remember: <strong>Manage context-specific control logic within the pipeline, then fold to extract at the end.</strong></p>
</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="errors-validation-error-usage-rules.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Funx.Errors.ValidationError Usage Rules
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="list-usage-rules.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Funx.List Usage Rules
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/funx/0.1.6" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/funx/0.1.6">Hex Preview</a>

              (<a href="https://preview.hex.pm/preview/funx/0.1.6/show/lib/foldable/usage-rules.md">current file</a>)

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="funx.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.34.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>

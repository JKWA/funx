<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.34.2">
    <meta name="project" content="funx v0.1.5">


    <title>Funx Usage Rules — funx v0.1.5</title>
    <link rel="stylesheet" href="dist/html-elixir-F2VRIOKR.css" />


      <link rel="canonical" href="https://hexdocs.pm/funx/usage-rules.html" />

    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-FD9C8F72.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-YIPIRHGU.js"></script>

  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
funx
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.1.5
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of funx</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/JKWA/funx/blob/v0.1.5/lib/usage-rules.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>


    <span>Funx Usage Rules (Index)</span>
  </h1>

<p>Usage rules describe how to use Funx protocols and utilities in practice.<br/>They complement the module docs (which describe <em>what</em> the APIs do).  </p><p>Each protocol or major module has its own <code class="inline">usage-rules.md</code>, stored next to the code.<br/>This index links them together.</p><h2 id="author-s-voice-and-approach" class="section-heading">
  <a href="#author-s-voice-and-approach" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Author's Voice and Approach</span>
</h2>
<p>These usage rules reflect <strong>Joseph Koski's</strong> approach to functional programming in Elixir, developed alongside his book <a href="https://pragprog.com/titles/jkelixir/advanced-functional-programming-with-elixir"><strong>&quot;Advanced Functional Programming with Elixir&quot;</strong></a>. </p><p>The documentation emphasizes <strong>practical application over academic theory</strong>, focusing on real-world patterns, business problems, and incremental adoption. Joseph's philosophy is that functional programming should be approachable and immediately useful, not an abstract mathematical exercise.</p><p>When reading these usage rules, you're getting Joseph's perspective on how to effectively apply functional patterns in Elixir production systems.</p><h2 id="available-rules" class="section-heading">
  <a href="#available-rules" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Available Rules</span>
</h2>
<ul><li><p><a href="utils-usage-rules.html">Funx.Appendable Usage Rules</a><br/>Flexible aggregation for accumulating results - structured vs flat collection strategies.</p></li><li><p><a href="utils-usage-rules.html">Funx.Eq Usage Rules</a><br/>Domain-specific equality and identity for comparison, deduplication, and filtering.</p></li><li><p><a href="utils-usage-rules.html">Funx.Errors.ValidationError Usage Rules</a><br/>Domain validation with structured error collection, composition, and Either integration.</p></li><li><p><a href="utils-usage-rules.html">Funx.Foldable Usage Rules</a><br/>Conditional structure collapse with different functions for present vs absent cases—defaults and aggregation.</p></li><li><p><a href="utils-usage-rules.html">Funx.List Usage Rules</a><br/>Equality- and order-aware set operations, deduplication, and sorting.</p></li><li><p><a href="utils-usage-rules.html">Funx.Monad Usage Rules</a><br/>Declarative control flow with <code class="inline">map</code>, <code class="inline">bind</code>, and <code class="inline">ap</code>—composing context-aware steps.</p></li><li><p><a href="utils-usage-rules.html">Funx.Monad.Either Usage Rules</a><br/>Branching computation with error context—fail fast or accumulate validation errors.</p></li><li><p><a href="utils-usage-rules.html">Funx.Monad.Effect Usage Rules</a><br/>Deferred observable async computation—Reader + Either + async execution with full telemetry.</p></li><li><p><a href="utils-usage-rules.html">Funx.Monad.Identity Usage Rules</a><br/>Structure without effects—used as a baseline for composing monads.</p></li><li><p><a href="utils-usage-rules.html">Funx.Monad.Maybe Usage Rules</a><br/>Optional computation: preserve structure, short-circuit on absence, avoid <code class="inline">nil</code>.</p></li><li><p><a href="utils-usage-rules.html">Funx.Monad.Reader Usage Rules</a><br/>Deferred computation with read-only environment access—dependency injection and configuration.</p></li><li><p><a href="utils-usage-rules.html">Funx.Monoid Usage Rules</a><br/>Identity and associative combination, enabling folds, logs, and accumulation.</p></li><li><p><a href="utils-usage-rules.html">Funx.Ord Usage Rules</a><br/>Context-aware ordering for sorting, ranking, and prioritization.</p></li><li><p><a href="utils-usage-rules.html">Funx.Predicate Usage Rules</a><br/>Logical composition using <code class="inline">&amp;&amp;</code>/<code class="inline">||</code>, reusable combinators, and lifted conditions.</p></li><li><p><a href="utils-usage-rules.html">Funx.Utils Usage Rules</a><br/>Currying, flipping, and function transformation for point-free, pipeline-friendly composition.</p></li></ul><h2 id="conventions" class="section-heading">
  <a href="#conventions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Conventions</span>
</h2>
<ul><li>Collocation: rules live beside the code they describe.  </li><li>Scope: focus on <em>usage guidance</em> and best practices, not API reference.  </li><li>LLM-friendly: small sections, explicit examples, stable links.</li></ul><h2 id="project-layout-rules-only" class="section-heading">
  <a href="#project-layout-rules-only" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Project Layout (rules only)</span>
</h2>
<pre><code class="text">lib/
  usage-rules.md            # ← index (this file)
  appendable/
    usage-rules.md          # ← Funx.Appendable rules
  eq/
    usage-rules.md          # ← Funx.Eq rules
  errors/
    validation_error/
      usage-rules.md        # ← Funx.Errors.ValidationError rules
  foldable/
    usage-rules.md          # ← Funx.Foldable rules
  list/
    usage-rules.md          # ← Funx.List rules
  monad/
    usage-rules.md          # ← Funx.Monad rules
    either/
      usage-rules.md        # ← Funx.Monad.Either rules
    effect/
      usage-rules.md        # ← Funx.Monad.Effect rules
    identity/
      usage-rules.md        # ← Funx.Monad.Identity rules
    maybe/
      usage-rules.md        # ← Funx.Monad.Maybe rules
    reader/
      usage-rules.md        # ← Funx.Monad.Reader rules
  monoid/
    usage-rules.md          # ← Funx.Monoid rules
  ord/
    usage-rules.md          # ← Funx.Ord rules
  predicate/
    usage-rules.md          # ← Funx.Predicate rules
  utils/
    usage-rules.md          # ← Funx.Utils rules</code></pre><h2 id="domain-model-repository-pattern-usage-rules" class="section-heading">
  <a href="#domain-model-repository-pattern-usage-rules" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Domain Model + Repository Pattern Usage Rules</span>
</h2>
<h3 id="core-concepts" class="section-heading">
  <a href="#core-concepts" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Core Concepts</span>
</h3>
<p><strong>Functional Domain-Driven Design</strong>: Domain model with validation, healing, and repository patterns using Funx functional programming constructs.</p><p><strong>Never-Fail Constructors</strong>: Use transformation over validation to create always-valid data structures.</p><p><strong>Separate Validation</strong>: Domain rules validation is separate from data integrity (healing).</p><p><strong>Repository Abstraction</strong>: Clean separation between domain logic and storage concerns.</p><h3 id="quick-patterns" class="section-heading">
  <a href="#quick-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Quick Patterns</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Domain Model Structure</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyEntity</span><span class="w"> </span><span class="k" data-group-id="7615728612-1">do</span><span class="w">
  </span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Predicate</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.Monad.Either</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.Errors.ValidationError</span><span class="w">

  </span><span class="na">@type</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="7615728612-2">{</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">pos_integer</span><span class="p" data-group-id="7615728612-3">(</span><span class="p" data-group-id="7615728612-3">)</span><span class="p">,</span><span class="w">
    </span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p" data-group-id="7615728612-4">(</span><span class="p" data-group-id="7615728612-4">)</span><span class="p">,</span><span class="w">
    </span><span class="ss">optional_field</span><span class="p">:</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p" data-group-id="7615728612-5">(</span><span class="p" data-group-id="7615728612-5">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">nil</span><span class="w">
  </span><span class="p" data-group-id="7615728612-2">}</span><span class="w">

  </span><span class="na">@enforce_keys</span><span class="w"> </span><span class="p" data-group-id="7615728612-6">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:required_field</span><span class="p">,</span><span class="w"> </span><span class="ss">:optional_field</span><span class="p" data-group-id="7615728612-6">]</span><span class="w">
  </span><span class="kd">defstruct</span><span class="w"> </span><span class="p" data-group-id="7615728612-7">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:required_field</span><span class="p">,</span><span class="w"> </span><span class="ss">optional_field</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="7615728612-7">]</span><span class="w">

  </span><span class="c1"># Domain Constants</span><span class="w">
  </span><span class="na">@default_value</span><span class="w"> </span><span class="s">&quot;Default&quot;</span><span class="w">

  </span><span class="c1"># Predicates (boolean checks)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">invalid_field?</span><span class="p" data-group-id="7615728612-8">(</span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="7615728612-9">{</span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="n">field</span><span class="p" data-group-id="7615728612-9">}</span><span class="p" data-group-id="7615728612-8">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="na">@default_value</span><span class="w">

  </span><span class="c1"># Validation Functions (Either-wrapped)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">ensure_field</span><span class="p" data-group-id="7615728612-10">(</span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="7615728612-11">{</span><span class="p" data-group-id="7615728612-11">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entity</span><span class="p" data-group-id="7615728612-10">)</span><span class="w"> </span><span class="k" data-group-id="7615728612-12">do</span><span class="w">
    </span><span class="n">entity</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">lift_predicate</span><span class="p" data-group-id="7615728612-13">(</span><span class="w">
      </span><span class="n">p_not</span><span class="p" data-group-id="7615728612-14">(</span><span class="o">&amp;</span><span class="n">invalid_field?</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="7615728612-14">)</span><span class="p">,</span><span class="w">
      </span><span class="k" data-group-id="7615728612-15">fn</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Entity &#39;</span><span class="si" data-group-id="7615728612-16">#{</span><span class="n">e</span><span class="o">.</span><span class="n">required_field</span><span class="si" data-group-id="7615728612-16">}</span><span class="s">&#39; is invalid&quot;</span><span class="w"> </span><span class="k" data-group-id="7615728612-15">end</span><span class="w">
    </span><span class="p" data-group-id="7615728612-13">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">map_left</span><span class="p" data-group-id="7615728612-17">(</span><span class="o">&amp;</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="7615728612-17">)</span><span class="w">
  </span><span class="k" data-group-id="7615728612-12">end</span><span class="w">

  </span><span class="c1"># Complete Validation</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">validate</span><span class="p" data-group-id="7615728612-18">(</span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="7615728612-19">{</span><span class="p" data-group-id="7615728612-19">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entity</span><span class="p" data-group-id="7615728612-18">)</span><span class="w"> </span><span class="k" data-group-id="7615728612-20">do</span><span class="w">
    </span><span class="n">entity</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="7615728612-21">(</span><span class="p" data-group-id="7615728612-22">[</span><span class="o">&amp;</span><span class="n">ensure_field</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="7615728612-22">]</span><span class="p" data-group-id="7615728612-21">)</span><span class="w">
  </span><span class="k" data-group-id="7615728612-20">end</span><span class="w">

  </span><span class="c1"># Never-Fail Constructor</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">make</span><span class="p" data-group-id="7615728612-23">(</span><span class="n">required_field</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="w"> </span><span class="o">\\</span><span class="w"> </span><span class="p" data-group-id="7615728612-24">[</span><span class="p" data-group-id="7615728612-24">]</span><span class="p" data-group-id="7615728612-23">)</span><span class="w"> </span><span class="k" data-group-id="7615728612-25">do</span><span class="w">
    </span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="7615728612-26">{</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="nc">:erlang</span><span class="o">.</span><span class="n">unique_integer</span><span class="p" data-group-id="7615728612-27">(</span><span class="p" data-group-id="7615728612-28">[</span><span class="ss">:positive</span><span class="p" data-group-id="7615728612-28">]</span><span class="p" data-group-id="7615728612-27">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="n">required_field</span><span class="p">,</span><span class="w">
      </span><span class="ss">optional_field</span><span class="p">:</span><span class="w"> </span><span class="nc">Keyword</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="7615728612-29">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:optional_field</span><span class="p" data-group-id="7615728612-29">)</span><span class="w">
    </span><span class="p" data-group-id="7615728612-26">}</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">heal_entity</span><span class="p" data-group-id="7615728612-30">(</span><span class="p" data-group-id="7615728612-30">)</span><span class="w">
  </span><span class="k" data-group-id="7615728612-25">end</span><span class="w">

  </span><span class="c1"># Safe Change (with healing)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">change</span><span class="p" data-group-id="7615728612-31">(</span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="7615728612-32">{</span><span class="p" data-group-id="7615728612-32">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entity</span><span class="p">,</span><span class="w"> </span><span class="n">attrs</span><span class="p" data-group-id="7615728612-31">)</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_map</span><span class="p" data-group-id="7615728612-33">(</span><span class="n">attrs</span><span class="p" data-group-id="7615728612-33">)</span><span class="w"> </span><span class="k" data-group-id="7615728612-34">do</span><span class="w">
    </span><span class="n">attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">delete</span><span class="p" data-group-id="7615728612-35">(</span><span class="n">attrs</span><span class="p">,</span><span class="w"> </span><span class="ss">:id</span><span class="p" data-group-id="7615728612-35">)</span><span class="w">
    </span><span class="n">entity</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">struct</span><span class="p" data-group-id="7615728612-36">(</span><span class="n">attrs</span><span class="p" data-group-id="7615728612-36">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">heal_entity</span><span class="p" data-group-id="7615728612-37">(</span><span class="p" data-group-id="7615728612-37">)</span><span class="w">
  </span><span class="k" data-group-id="7615728612-34">end</span><span class="w">

  </span><span class="c1"># Unsafe Change (for testing)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">unsafe_change</span><span class="p" data-group-id="7615728612-38">(</span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="7615728612-39">{</span><span class="p" data-group-id="7615728612-39">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entity</span><span class="p">,</span><span class="w"> </span><span class="n">attrs</span><span class="p" data-group-id="7615728612-38">)</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_map</span><span class="p" data-group-id="7615728612-40">(</span><span class="n">attrs</span><span class="p" data-group-id="7615728612-40">)</span><span class="w"> </span><span class="k" data-group-id="7615728612-41">do</span><span class="w">
    </span><span class="n">attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">delete</span><span class="p" data-group-id="7615728612-42">(</span><span class="n">attrs</span><span class="p">,</span><span class="w"> </span><span class="ss">:id</span><span class="p" data-group-id="7615728612-42">)</span><span class="w">
    </span><span class="n">entity</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">struct</span><span class="p" data-group-id="7615728612-43">(</span><span class="n">attrs</span><span class="p" data-group-id="7615728612-43">)</span><span class="w">
  </span><span class="k" data-group-id="7615728612-41">end</span><span class="w">

  </span><span class="c1"># Self-Healing Function</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">heal_entity</span><span class="p" data-group-id="7615728612-44">(</span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="7615728612-45">{</span><span class="p" data-group-id="7615728612-45">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entity</span><span class="p" data-group-id="7615728612-44">)</span><span class="w"> </span><span class="k" data-group-id="7615728612-46">do</span><span class="w">
    </span><span class="p" data-group-id="7615728612-47">%{</span><span class="n">entity</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="n">heal_field</span><span class="p" data-group-id="7615728612-48">(</span><span class="n">entity</span><span class="o">.</span><span class="n">required_field</span><span class="p" data-group-id="7615728612-48">)</span><span class="p" data-group-id="7615728612-47">}</span><span class="w">
  </span><span class="k" data-group-id="7615728612-46">end</span><span class="w">

  </span><span class="kd">defp</span><span class="w"> </span><span class="nf">heal_field</span><span class="p" data-group-id="7615728612-49">(</span><span class="n">field</span><span class="p" data-group-id="7615728612-49">)</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_binary</span><span class="p" data-group-id="7615728612-50">(</span><span class="n">field</span><span class="p" data-group-id="7615728612-50">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">byte_size</span><span class="p" data-group-id="7615728612-51">(</span><span class="n">field</span><span class="p" data-group-id="7615728612-51">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">field</span><span class="w">
  </span><span class="kd">defp</span><span class="w"> </span><span class="nf">heal_field</span><span class="p" data-group-id="7615728612-52">(</span><span class="bp">_</span><span class="p" data-group-id="7615728612-52">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="na">@default_value</span><span class="w">

  </span><span class="c1"># Field Accessors (encapsulation)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">id</span><span class="p" data-group-id="7615728612-53">(</span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="7615728612-54">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="p" data-group-id="7615728612-54">}</span><span class="p" data-group-id="7615728612-53">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">required_field</span><span class="p" data-group-id="7615728612-55">(</span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="7615728612-56">{</span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="n">field</span><span class="p" data-group-id="7615728612-56">}</span><span class="p" data-group-id="7615728612-55">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">field</span><span class="w">
</span><span class="k" data-group-id="7615728612-1">end</span><span class="w">

</span><span class="c1"># Protocol Implementations</span><span class="w">
</span><span class="kd">defimpl</span><span class="w"> </span><span class="nc">Funx.Eq</span><span class="p">,</span><span class="w"> </span><span class="ss">for</span><span class="p">:</span><span class="w"> </span><span class="nc">MyEntity</span><span class="w"> </span><span class="k" data-group-id="7615728612-57">do</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.Eq</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">MyEntity</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">eq?</span><span class="p" data-group-id="7615728612-58">(</span><span class="p" data-group-id="7615728612-59">%</span><span class="nc" data-group-id="7615728612-59">MyEntity</span><span class="p" data-group-id="7615728612-59">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="p" data-group-id="7615728612-59">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7615728612-60">%</span><span class="nc" data-group-id="7615728612-60">MyEntity</span><span class="p" data-group-id="7615728612-60">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7615728612-60">}</span><span class="p" data-group-id="7615728612-58">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Eq</span><span class="o">.</span><span class="n">eq?</span><span class="p" data-group-id="7615728612-61">(</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7615728612-61">)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">not_eq?</span><span class="p" data-group-id="7615728612-62">(</span><span class="p" data-group-id="7615728612-63">%</span><span class="nc" data-group-id="7615728612-63">MyEntity</span><span class="p" data-group-id="7615728612-63">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="p" data-group-id="7615728612-63">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7615728612-64">%</span><span class="nc" data-group-id="7615728612-64">MyEntity</span><span class="p" data-group-id="7615728612-64">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7615728612-64">}</span><span class="p" data-group-id="7615728612-62">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">eq?</span><span class="p" data-group-id="7615728612-65">(</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7615728612-65">)</span><span class="w">
</span><span class="k" data-group-id="7615728612-57">end</span><span class="w">

</span><span class="kd">defimpl</span><span class="w"> </span><span class="nc">Funx.Ord</span><span class="p">,</span><span class="w"> </span><span class="ss">for</span><span class="p">:</span><span class="w"> </span><span class="nc">MyEntity</span><span class="w"> </span><span class="k" data-group-id="7615728612-66">do</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.Ord</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">MyEntity</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">lt?</span><span class="p" data-group-id="7615728612-67">(</span><span class="p" data-group-id="7615728612-68">%</span><span class="nc" data-group-id="7615728612-68">MyEntity</span><span class="p" data-group-id="7615728612-68">{</span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="p" data-group-id="7615728612-68">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7615728612-69">%</span><span class="nc" data-group-id="7615728612-69">MyEntity</span><span class="p" data-group-id="7615728612-69">{</span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7615728612-69">}</span><span class="p" data-group-id="7615728612-67">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">lt?</span><span class="p" data-group-id="7615728612-70">(</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7615728612-70">)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">le?</span><span class="p" data-group-id="7615728612-71">(</span><span class="p" data-group-id="7615728612-72">%</span><span class="nc" data-group-id="7615728612-72">MyEntity</span><span class="p" data-group-id="7615728612-72">{</span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="p" data-group-id="7615728612-72">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7615728612-73">%</span><span class="nc" data-group-id="7615728612-73">MyEntity</span><span class="p" data-group-id="7615728612-73">{</span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7615728612-73">}</span><span class="p" data-group-id="7615728612-71">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">le?</span><span class="p" data-group-id="7615728612-74">(</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7615728612-74">)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">gt?</span><span class="p" data-group-id="7615728612-75">(</span><span class="p" data-group-id="7615728612-76">%</span><span class="nc" data-group-id="7615728612-76">MyEntity</span><span class="p" data-group-id="7615728612-76">{</span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="p" data-group-id="7615728612-76">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7615728612-77">%</span><span class="nc" data-group-id="7615728612-77">MyEntity</span><span class="p" data-group-id="7615728612-77">{</span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7615728612-77">}</span><span class="p" data-group-id="7615728612-75">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">gt?</span><span class="p" data-group-id="7615728612-78">(</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7615728612-78">)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">ge?</span><span class="p" data-group-id="7615728612-79">(</span><span class="p" data-group-id="7615728612-80">%</span><span class="nc" data-group-id="7615728612-80">MyEntity</span><span class="p" data-group-id="7615728612-80">{</span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="p" data-group-id="7615728612-80">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7615728612-81">%</span><span class="nc" data-group-id="7615728612-81">MyEntity</span><span class="p" data-group-id="7615728612-81">{</span><span class="ss">required_field</span><span class="p">:</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7615728612-81">}</span><span class="p" data-group-id="7615728612-79">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">ge?</span><span class="p" data-group-id="7615728612-82">(</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7615728612-82">)</span><span class="w">
</span><span class="k" data-group-id="7615728612-66">end</span><span class="w">

</span><span class="c1"># Repository Pattern</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyEntity.Repo</span><span class="w"> </span><span class="k" data-group-id="7615728612-83">do</span><span class="w">
  </span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Monad</span><span class="w">
  </span><span class="kn">import</span><span class="w"> </span><span class="nc">Funx.Utils</span><span class="p">,</span><span class="w"> </span><span class="ss">only</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7615728612-84">[</span><span class="ss">curry</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="7615728612-84">]</span><span class="w">

  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.Monad.Either</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.List</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">MyEntity</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Store</span><span class="w">

  </span><span class="na">@table_name</span><span class="w"> </span><span class="ss">:my_entity</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">create_table</span><span class="w"> </span><span class="k" data-group-id="7615728612-85">do</span><span class="w">
    </span><span class="nc">Store</span><span class="o">.</span><span class="n">create_table</span><span class="p" data-group-id="7615728612-86">(</span><span class="na">@table_name</span><span class="p" data-group-id="7615728612-86">)</span><span class="w">
  </span><span class="k" data-group-id="7615728612-85">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">save</span><span class="p" data-group-id="7615728612-87">(</span><span class="p" data-group-id="7615728612-88">%</span><span class="nc" data-group-id="7615728612-88">MyEntity</span><span class="p" data-group-id="7615728612-88">{</span><span class="p" data-group-id="7615728612-88">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entity</span><span class="p" data-group-id="7615728612-87">)</span><span class="w"> </span><span class="k" data-group-id="7615728612-89">do</span><span class="w">
    </span><span class="n">insert_entity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curry</span><span class="p" data-group-id="7615728612-90">(</span><span class="o">&amp;</span><span class="nc">Store</span><span class="o">.</span><span class="n">insert_item</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="7615728612-90">)</span><span class="w">

    </span><span class="n">entity</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">MyEntity</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="7615728612-91">(</span><span class="p" data-group-id="7615728612-91">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">bind</span><span class="p" data-group-id="7615728612-92">(</span><span class="n">insert_entity</span><span class="o">.</span><span class="p" data-group-id="7615728612-93">(</span><span class="na">@table_name</span><span class="p" data-group-id="7615728612-93">)</span><span class="p" data-group-id="7615728612-92">)</span><span class="w">
  </span><span class="k" data-group-id="7615728612-89">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">get</span><span class="p" data-group-id="7615728612-94">(</span><span class="n">id</span><span class="p" data-group-id="7615728612-94">)</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_integer</span><span class="p" data-group-id="7615728612-95">(</span><span class="n">id</span><span class="p" data-group-id="7615728612-95">)</span><span class="w"> </span><span class="k" data-group-id="7615728612-96">do</span><span class="w">
    </span><span class="nc">Store</span><span class="o">.</span><span class="n">get_item</span><span class="p" data-group-id="7615728612-97">(</span><span class="na">@table_name</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p" data-group-id="7615728612-97">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="7615728612-98">(</span><span class="k" data-group-id="7615728612-99">fn</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">struct</span><span class="p" data-group-id="7615728612-100">(</span><span class="nc">MyEntity</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p" data-group-id="7615728612-100">)</span><span class="w"> </span><span class="k" data-group-id="7615728612-99">end</span><span class="p" data-group-id="7615728612-98">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">map_left</span><span class="p" data-group-id="7615728612-101">(</span><span class="k" data-group-id="7615728612-102">fn</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="ss">:not_found</span><span class="w"> </span><span class="k" data-group-id="7615728612-102">end</span><span class="p" data-group-id="7615728612-101">)</span><span class="w">
  </span><span class="k" data-group-id="7615728612-96">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">list</span><span class="p" data-group-id="7615728612-103">(</span><span class="p" data-group-id="7615728612-103">)</span><span class="w"> </span><span class="k" data-group-id="7615728612-104">do</span><span class="w">
    </span><span class="nc">Store</span><span class="o">.</span><span class="n">get_all_items</span><span class="p" data-group-id="7615728612-105">(</span><span class="na">@table_name</span><span class="p" data-group-id="7615728612-105">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="7615728612-106">(</span><span class="k" data-group-id="7615728612-107">fn</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="n">items</span><span class="w">
      </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="7615728612-108">(</span><span class="k" data-group-id="7615728612-109">fn</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">struct</span><span class="p" data-group-id="7615728612-110">(</span><span class="nc">MyEntity</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="p" data-group-id="7615728612-110">)</span><span class="w"> </span><span class="k" data-group-id="7615728612-109">end</span><span class="p" data-group-id="7615728612-108">)</span><span class="w">
      </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="7615728612-111">(</span><span class="p" data-group-id="7615728612-111">)</span><span class="w">
    </span><span class="k" data-group-id="7615728612-107">end</span><span class="p" data-group-id="7615728612-106">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">get_or_else</span><span class="p" data-group-id="7615728612-112">(</span><span class="p" data-group-id="7615728612-113">[</span><span class="p" data-group-id="7615728612-113">]</span><span class="p" data-group-id="7615728612-112">)</span><span class="w">
  </span><span class="k" data-group-id="7615728612-104">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">delete</span><span class="p" data-group-id="7615728612-114">(</span><span class="p" data-group-id="7615728612-115">%</span><span class="nc" data-group-id="7615728612-115">MyEntity</span><span class="p" data-group-id="7615728612-115">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="p" data-group-id="7615728612-115">}</span><span class="p" data-group-id="7615728612-114">)</span><span class="w"> </span><span class="k" data-group-id="7615728612-116">do</span><span class="w">
    </span><span class="nc">Store</span><span class="o">.</span><span class="n">delete_item</span><span class="p" data-group-id="7615728612-117">(</span><span class="na">@table_name</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p" data-group-id="7615728612-117">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">get_or_else</span><span class="p" data-group-id="7615728612-118">(</span><span class="ss">:ok</span><span class="p" data-group-id="7615728612-118">)</span><span class="w">
  </span><span class="k" data-group-id="7615728612-116">end</span><span class="w">
</span><span class="k" data-group-id="7615728612-83">end</span></code></pre><h3 id="key-rules" class="section-heading">
  <a href="#key-rules" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Key Rules</span>
</h3>
<h4>Domain Model Rules</h4><ul><li><strong>Always use @enforce_keys</strong> for required struct fields</li><li><strong>Define @type for your struct</strong> with proper type annotations</li><li><strong>Use module constants</strong> for domain constraints (@min_value, @default_name, etc.)</li><li><strong>Predicate functions</strong> end with <code class="inline">?</code> and return boolean</li><li><strong>Validation functions</strong> start with <code class="inline">ensure_</code> and return Either</li><li><strong>Constructor never fails</strong> - use <code class="inline">make/2</code> with healing</li><li><strong>Provide safe/unsafe change</strong> - <code class="inline">change/2</code> heals, <code class="inline">unsafe_change/2</code> doesn't</li><li><strong>Encapsulate with accessors</strong> - don't access struct fields directly</li><li><strong>Use Either.validate/2</strong> to collect all validation errors</li></ul><h4>Validation Pattern</h4><pre><code class="makeup elixir" translate="no"><span class="c1"># 1. Predicate (boolean check)</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">invalid_thing?</span><span class="p" data-group-id="8989235471-1">(</span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="8989235471-2">{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="8989235471-2">}</span><span class="p" data-group-id="8989235471-1">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">some_check</span><span class="p" data-group-id="8989235471-3">(</span><span class="n">value</span><span class="p" data-group-id="8989235471-3">)</span><span class="w">

</span><span class="c1"># 2. Validation function (Either-wrapped)</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">ensure_thing</span><span class="p" data-group-id="8989235471-4">(</span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="8989235471-5">{</span><span class="p" data-group-id="8989235471-5">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entity</span><span class="p" data-group-id="8989235471-4">)</span><span class="w"> </span><span class="k" data-group-id="8989235471-6">do</span><span class="w">
  </span><span class="n">entity</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">lift_predicate</span><span class="p" data-group-id="8989235471-7">(</span><span class="w">
    </span><span class="n">p_not</span><span class="p" data-group-id="8989235471-8">(</span><span class="o">&amp;</span><span class="n">invalid_thing?</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="8989235471-8">)</span><span class="p">,</span><span class="w">
    </span><span class="k" data-group-id="8989235471-9">fn</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Descriptive error message with </span><span class="si" data-group-id="8989235471-10">#{</span><span class="n">e</span><span class="o">.</span><span class="n">field</span><span class="si" data-group-id="8989235471-10">}</span><span class="s">&quot;</span><span class="w"> </span><span class="k" data-group-id="8989235471-9">end</span><span class="w">
  </span><span class="p" data-group-id="8989235471-7">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">map_left</span><span class="p" data-group-id="8989235471-11">(</span><span class="o">&amp;</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="8989235471-11">)</span><span class="w">
</span><span class="k" data-group-id="8989235471-6">end</span><span class="w">

</span><span class="c1"># 3. Add to comprehensive validation</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">validate</span><span class="p" data-group-id="8989235471-12">(</span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="8989235471-13">{</span><span class="p" data-group-id="8989235471-13">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entity</span><span class="p" data-group-id="8989235471-12">)</span><span class="w"> </span><span class="k" data-group-id="8989235471-14">do</span><span class="w">
  </span><span class="n">entity</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Either</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="8989235471-15">(</span><span class="p" data-group-id="8989235471-16">[</span><span class="o">&amp;</span><span class="n">ensure_thing</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ensure_other</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="8989235471-16">]</span><span class="p" data-group-id="8989235471-15">)</span><span class="w">
</span><span class="k" data-group-id="8989235471-14">end</span></code></pre><h4>Protocol Implementation Pattern</h4><pre><code class="makeup elixir" translate="no"><span class="c1"># Equality by ID (identity)</span><span class="w">
</span><span class="kd">defimpl</span><span class="w"> </span><span class="nc">Funx.Eq</span><span class="p">,</span><span class="w"> </span><span class="ss">for</span><span class="p">:</span><span class="w"> </span><span class="nc">MyType</span><span class="w"> </span><span class="k" data-group-id="7100858628-1">do</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.Eq</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">MyType</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">eq?</span><span class="p" data-group-id="7100858628-2">(</span><span class="p" data-group-id="7100858628-3">%</span><span class="nc" data-group-id="7100858628-3">MyType</span><span class="p" data-group-id="7100858628-3">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="p" data-group-id="7100858628-3">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7100858628-4">%</span><span class="nc" data-group-id="7100858628-4">MyType</span><span class="p" data-group-id="7100858628-4">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7100858628-4">}</span><span class="p" data-group-id="7100858628-2">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Eq</span><span class="o">.</span><span class="n">eq?</span><span class="p" data-group-id="7100858628-5">(</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7100858628-5">)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">not_eq?</span><span class="p" data-group-id="7100858628-6">(</span><span class="p" data-group-id="7100858628-7">%</span><span class="nc" data-group-id="7100858628-7">MyType</span><span class="p" data-group-id="7100858628-7">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="p" data-group-id="7100858628-7">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7100858628-8">%</span><span class="nc" data-group-id="7100858628-8">MyType</span><span class="p" data-group-id="7100858628-8">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7100858628-8">}</span><span class="p" data-group-id="7100858628-6">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">eq?</span><span class="p" data-group-id="7100858628-9">(</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7100858628-9">)</span><span class="w">
</span><span class="k" data-group-id="7100858628-1">end</span><span class="w">

</span><span class="c1"># Ordering by display field (sorting)</span><span class="w">
</span><span class="kd">defimpl</span><span class="w"> </span><span class="nc">Funx.Ord</span><span class="p">,</span><span class="w"> </span><span class="ss">for</span><span class="p">:</span><span class="w"> </span><span class="nc">MyType</span><span class="w"> </span><span class="k" data-group-id="7100858628-10">do</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Funx.Ord</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">MyType</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">lt?</span><span class="p" data-group-id="7100858628-11">(</span><span class="p" data-group-id="7100858628-12">%</span><span class="nc" data-group-id="7100858628-12">MyType</span><span class="p" data-group-id="7100858628-12">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="p" data-group-id="7100858628-12">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7100858628-13">%</span><span class="nc" data-group-id="7100858628-13">MyType</span><span class="p" data-group-id="7100858628-13">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7100858628-13">}</span><span class="p" data-group-id="7100858628-11">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">lt?</span><span class="p" data-group-id="7100858628-14">(</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7100858628-14">)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">le?</span><span class="p" data-group-id="7100858628-15">(</span><span class="p" data-group-id="7100858628-16">%</span><span class="nc" data-group-id="7100858628-16">MyType</span><span class="p" data-group-id="7100858628-16">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="p" data-group-id="7100858628-16">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7100858628-17">%</span><span class="nc" data-group-id="7100858628-17">MyType</span><span class="p" data-group-id="7100858628-17">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7100858628-17">}</span><span class="p" data-group-id="7100858628-15">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">le?</span><span class="p" data-group-id="7100858628-18">(</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7100858628-18">)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">gt?</span><span class="p" data-group-id="7100858628-19">(</span><span class="p" data-group-id="7100858628-20">%</span><span class="nc" data-group-id="7100858628-20">MyType</span><span class="p" data-group-id="7100858628-20">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="p" data-group-id="7100858628-20">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7100858628-21">%</span><span class="nc" data-group-id="7100858628-21">MyType</span><span class="p" data-group-id="7100858628-21">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7100858628-21">}</span><span class="p" data-group-id="7100858628-19">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">gt?</span><span class="p" data-group-id="7100858628-22">(</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7100858628-22">)</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">ge?</span><span class="p" data-group-id="7100858628-23">(</span><span class="p" data-group-id="7100858628-24">%</span><span class="nc" data-group-id="7100858628-24">MyType</span><span class="p" data-group-id="7100858628-24">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="p" data-group-id="7100858628-24">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7100858628-25">%</span><span class="nc" data-group-id="7100858628-25">MyType</span><span class="p" data-group-id="7100858628-25">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7100858628-25">}</span><span class="p" data-group-id="7100858628-23">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Ord</span><span class="o">.</span><span class="n">ge?</span><span class="p" data-group-id="7100858628-26">(</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p" data-group-id="7100858628-26">)</span><span class="w">
</span><span class="k" data-group-id="7100858628-10">end</span></code></pre><h4>Repository Rules</h4><ul><li><strong>Import Funx.Monad</strong> for bind, map operations</li><li><strong>Import curry/1</strong> from Funx.Utils for partial application</li><li><strong>Use @table_name</strong> constant for ETS table</li><li><strong>Always validate before save</strong> - <code class="inline">validate() |&gt; bind(insert_...)</code></li><li><strong>Use curry for partial application</strong> - <code class="inline">curry(&amp;Store.insert_item/2)</code></li><li><strong>Map data back to structs</strong> on retrieval</li><li><strong>Use Either.get_or_else</strong> for sensible defaults</li><li><strong>Handle not_found</strong> with Either.map_left</li><li><strong>Auto-sort lists</strong> using protocol-defined ordering</li></ul><h4>Self-Healing Pattern</h4><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">heal_entity</span><span class="p" data-group-id="6228801878-1">(</span><span class="p">%</span><span class="bp">__MODULE__</span><span class="p" data-group-id="6228801878-2">{</span><span class="p" data-group-id="6228801878-2">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entity</span><span class="p" data-group-id="6228801878-1">)</span><span class="w"> </span><span class="k" data-group-id="6228801878-3">do</span><span class="w">
  </span><span class="p" data-group-id="6228801878-4">%{</span><span class="n">entity</span><span class="w"> </span><span class="o">|</span><span class="w">
    </span><span class="ss">field1</span><span class="p">:</span><span class="w"> </span><span class="n">heal_field1</span><span class="p" data-group-id="6228801878-5">(</span><span class="n">entity</span><span class="o">.</span><span class="n">field1</span><span class="p" data-group-id="6228801878-5">)</span><span class="p">,</span><span class="w">
    </span><span class="ss">field2</span><span class="p">:</span><span class="w"> </span><span class="n">heal_field2</span><span class="p" data-group-id="6228801878-6">(</span><span class="n">entity</span><span class="o">.</span><span class="n">field2</span><span class="p" data-group-id="6228801878-6">)</span><span class="w">
  </span><span class="p" data-group-id="6228801878-4">}</span><span class="w">
</span><span class="k" data-group-id="6228801878-3">end</span><span class="w">

</span><span class="c1"># Individual field healing functions</span><span class="w">
</span><span class="kd">defp</span><span class="w"> </span><span class="nf">heal_field1</span><span class="p" data-group-id="6228801878-7">(</span><span class="n">value</span><span class="p" data-group-id="6228801878-7">)</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_binary</span><span class="p" data-group-id="6228801878-8">(</span><span class="n">value</span><span class="p" data-group-id="6228801878-8">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">byte_size</span><span class="p" data-group-id="6228801878-9">(</span><span class="n">value</span><span class="p" data-group-id="6228801878-9">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="w">
</span><span class="kd">defp</span><span class="w"> </span><span class="nf">heal_field1</span><span class="p" data-group-id="6228801878-10">(</span><span class="bp">_</span><span class="p" data-group-id="6228801878-10">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="na">@default_value</span><span class="w">

</span><span class="kd">defp</span><span class="w"> </span><span class="nf">heal_field2</span><span class="p" data-group-id="6228801878-11">(</span><span class="n">value</span><span class="p" data-group-id="6228801878-11">)</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_integer</span><span class="p" data-group-id="6228801878-12">(</span><span class="n">value</span><span class="p" data-group-id="6228801878-12">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="w">
</span><span class="kd">defp</span><span class="w"> </span><span class="nf">heal_field2</span><span class="p" data-group-id="6228801878-13">(</span><span class="bp">_</span><span class="p" data-group-id="6228801878-13">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span></code></pre><h3 id="when-to-use" class="section-heading">
  <a href="#when-to-use" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">When to Use</span>
</h3>
<ul><li><strong>Domain entities</strong> with complex business rules</li><li><strong>Data that needs validation</strong> but should never fail to construct</li><li><strong>Entities requiring persistence</strong> with repository pattern</li><li><strong>Types needing custom comparison</strong> semantics</li><li><strong>Systems preferring transformation</strong> over validation errors</li></ul><h3 id="anti-patterns" class="section-heading">
  <a href="#anti-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Anti-Patterns</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Don&#39;t access struct fields directly</span><span class="w">
</span><span class="n">hero</span><span class="o">.</span><span class="n">name</span><span class="w">  </span><span class="c1"># Use Hero.name(hero) instead</span><span class="w">

</span><span class="c1"># Don&#39;t use plain strings in Either.left</span><span class="w">
</span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="3818983600-1">(</span><span class="s">&quot;error&quot;</span><span class="p" data-group-id="3818983600-1">)</span><span class="w">  </span><span class="c1"># Use ValidationError</span><span class="w">

</span><span class="c1"># Don&#39;t mix validation concerns</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">make</span><span class="p" data-group-id="3818983600-2">(</span><span class="n">name</span><span class="p" data-group-id="3818983600-2">)</span><span class="w"> </span><span class="k" data-group-id="3818983600-3">do</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="n">valid_name?</span><span class="p" data-group-id="3818983600-4">(</span><span class="n">name</span><span class="p" data-group-id="3818983600-4">)</span><span class="w"> </span><span class="k" data-group-id="3818983600-5">do</span><span class="w">
    </span><span class="p" data-group-id="3818983600-6">%</span><span class="nc" data-group-id="3818983600-6">Hero</span><span class="p" data-group-id="3818983600-6">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="3818983600-6">}</span><span class="w">  </span><span class="c1"># This can fail!</span><span class="w">
  </span><span class="k" data-group-id="3818983600-5">else</span><span class="w">
    </span><span class="p" data-group-id="3818983600-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;invalid&quot;</span><span class="p" data-group-id="3818983600-7">}</span><span class="w">
  </span><span class="k" data-group-id="3818983600-5">end</span><span class="w">
</span><span class="k" data-group-id="3818983600-3">end</span><span class="w">

</span><span class="c1"># Don&#39;t forget ID protection in change functions</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">change</span><span class="p" data-group-id="3818983600-8">(</span><span class="n">entity</span><span class="p">,</span><span class="w"> </span><span class="n">attrs</span><span class="p" data-group-id="3818983600-8">)</span><span class="w"> </span><span class="k" data-group-id="3818983600-9">do</span><span class="w">
  </span><span class="n">struct</span><span class="p" data-group-id="3818983600-10">(</span><span class="n">entity</span><span class="p">,</span><span class="w"> </span><span class="n">attrs</span><span class="p" data-group-id="3818983600-10">)</span><span class="w">  </span><span class="c1"># Allows ID modification!</span><span class="w">
</span><span class="k" data-group-id="3818983600-9">end</span><span class="w">

</span><span class="c1"># Don&#39;t skip validation in repository save</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">save</span><span class="p" data-group-id="3818983600-11">(</span><span class="n">entity</span><span class="p" data-group-id="3818983600-11">)</span><span class="w"> </span><span class="k" data-group-id="3818983600-12">do</span><span class="w">
  </span><span class="nc">Store</span><span class="o">.</span><span class="n">insert_item</span><span class="p" data-group-id="3818983600-13">(</span><span class="na">@table</span><span class="p">,</span><span class="w"> </span><span class="n">entity</span><span class="p" data-group-id="3818983600-13">)</span><span class="w">  </span><span class="c1"># No validation!</span><span class="w">
</span><span class="k" data-group-id="3818983600-12">end</span></code></pre><h3 id="testing-patterns" class="section-heading">
  <a href="#testing-patterns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Testing Patterns</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="c1"># Use unsafe_change to create invalid entities for testing</span><span class="w">
</span><span class="n">invalid_entity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">MyEntity</span><span class="o">.</span><span class="n">unsafe_change</span><span class="p" data-group-id="7301356803-1">(</span><span class="n">entity</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7301356803-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;invalid&quot;</span><span class="p" data-group-id="7301356803-2">}</span><span class="p" data-group-id="7301356803-1">)</span><span class="w">

</span><span class="c1"># Test that validation catches issues</span><span class="w">
</span><span class="k">case</span><span class="w"> </span><span class="nc">MyEntity</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="7301356803-3">(</span><span class="n">invalid_entity</span><span class="p" data-group-id="7301356803-3">)</span><span class="w"> </span><span class="k" data-group-id="7301356803-4">do</span><span class="w">
  </span><span class="p" data-group-id="7301356803-5">%</span><span class="nc" data-group-id="7301356803-5">Either.Left</span><span class="p" data-group-id="7301356803-5">{</span><span class="ss">left</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7301356803-6">%</span><span class="nc" data-group-id="7301356803-6">ValidationError</span><span class="p" data-group-id="7301356803-6">{</span><span class="ss">errors</span><span class="p">:</span><span class="w"> </span><span class="n">errors</span><span class="p" data-group-id="7301356803-6">}</span><span class="p" data-group-id="7301356803-5">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="n">assert</span><span class="w"> </span><span class="s">&quot;expected error&quot;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">errors</span><span class="w">
  </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">flunk</span><span class="p" data-group-id="7301356803-7">(</span><span class="s">&quot;Expected validation failure&quot;</span><span class="p" data-group-id="7301356803-7">)</span><span class="w">
</span><span class="k" data-group-id="7301356803-4">end</span><span class="w">

</span><span class="c1"># Test self-healing</span><span class="w">
</span><span class="n">healed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">MyEntity</span><span class="o">.</span><span class="n">heal_entity</span><span class="p" data-group-id="7301356803-8">(</span><span class="n">invalid_entity</span><span class="p" data-group-id="7301356803-8">)</span><span class="w">
</span><span class="n">assert</span><span class="w"> </span><span class="nc">MyEntity</span><span class="o">.</span><span class="n">field</span><span class="p" data-group-id="7301356803-9">(</span><span class="n">healed</span><span class="p" data-group-id="7301356803-9">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;default&quot;</span></code></pre><h3 id="performance-considerations" class="section-heading">
  <a href="#performance-considerations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Performance Considerations</span>
</h3>
<ul><li>Self-healing is lightweight transformation</li><li>Either.validate/2 collects all errors in single pass</li><li>Protocol dispatch for Eq/Ord is efficient</li><li>ETS operations are wrapped safely with Either.from_try</li><li>Currying creates closures - use judiciously</li></ul><h3 id="best-practices" class="section-heading">
  <a href="#best-practices" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Best Practices</span>
</h3>
<ul><li>Use descriptive error messages with entity context</li><li>Keep domain constants at module level</li><li>Implement both Eq and Ord protocols when needed</li><li>Test both happy path and error accumulation</li><li>Use repository for all persistence operations</li><li>Never expose struct fields directly</li><li>Prefer transformation over validation failure</li><li>Use curry for reusable partially-applied functions</li></ul>
</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="license.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
LICENSE
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="appendable-usage-rules.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Funx.Appendable Usage Rules
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/funx/0.1.5" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/funx/0.1.5">Hex Preview</a>

              (<a href="https://preview.hex.pm/preview/funx/0.1.5/show/lib/usage-rules.md">current file</a>)

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="funx.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.34.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>

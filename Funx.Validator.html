<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.39.3">
    <meta name="project" content="funx v0.8.3">


    <title>Funx.Validator — funx v0.8.3</title>

    <link rel="stylesheet" href="dist/html-elixir-VYWJUHZE.css" />

      <link rel="canonical" href="https://hexdocs.pm/funx/Funx.Validator.html" />

    <script defer src="dist/sidebar_items-855ABC33.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-XBCM4BHM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
funx
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.8.3
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-behaviour" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of funx</span>
            <div class="search-input-wrapper">
              <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
              <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
                <i class="ri-close-line ri-lg" title="Cancel search"></i>
              </button>
            </div>
          </label>
        </form>
        <div class="autocomplete">
        </div>
        <div class="engine-selector" data-multiple="false">
          <button type="button" class="engine-button" aria-label="Select search engine" aria-haspopup="true" aria-expanded="false">
            <i class="ri-search-2-line" aria-hidden="true"></i>
            <span class="engine-name">Default</span>
            <i class="ri-arrow-down-s-line" aria-hidden="true"></i>
          </button>
          <div class="engine-dropdown" hidden role="menu">

              <button type="button"
                      class="engine-option"
                      data-engine-url="search.html?q="
                      role="menuitemradio"
                      aria-checked="true">
                <span class="name">Default</span>
                <span class="help">In-browser search</span>
              </button>

          </div>
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">Funx.Validator</span> <small>behaviour</small>
      <small class="app-vsn" translate="no">(funx v0.8.3)</small>

    </h1>

      <a href="https://github.com/JKWA/funx/blob/v0.8.3/lib/validator.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Macro for building custom validators with minimal boilerplate.</p><p>Users creating custom validators (e.g., database checks, API validations) can use
this macro to avoid reimplementing the standard validator pattern. The macro
generates all the boilerplate including arity overloads, Maybe handling, message
building, and Either wrapping.</p><h2 id="module-two-behaviours" class="section-heading"><a href="#module-two-behaviours" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Two Behaviours</span></h2><p>This module defines two separate behaviours:</p><ol><li><p><strong><a href="Funx.Validate.Behaviour.html"><code class="inline">Funx.Validate.Behaviour</code></a></strong> - The public contract for all validators.
Defines <code class="inline">validate/3</code> which returns <code class="inline">Either.t(value, ValidationError.t())</code>.
This is what the validation DSL and consumers interact with.</p></li><li><p><strong><a href="Funx.Validator.html"><code class="inline">Funx.Validator</code></a></strong> - The callback contract for users of this macro.
Defines <code class="inline">validate_value/3</code> (returns boolean) and <code class="inline">default_message/1</code> (returns string).
This is the simplified API for implementing custom validation logic.</p></li></ol><p>The macro generates the <a href="Funx.Validate.Behaviour.html"><code class="inline">Funx.Validate.Behaviour</code></a> implementation from your
<a href="Funx.Validator.html"><code class="inline">Funx.Validator</code></a> callbacks.</p><h2 id="module-user-api" class="section-heading"><a href="#module-user-api" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">User API</span></h2><p>Users implement one required callback (and optionally a second):</p><ul><li><code class="inline">valid?/3</code> - Predicate function that returns <code class="inline">true</code> or <code class="inline">false</code> (required)</li><li><code class="inline">default_message/2</code> - Returns a plain string error message (optional)</li></ul><p>If <code class="inline">default_message/2</code> is not implemented, a generic &quot;is invalid&quot; message is used.</p><p>No need to know about <code class="inline">Either</code>, <code class="inline">ValidationError</code>, or <code class="inline">Maybe</code> - the macro
handles all functional programming complexity.</p><h2 id="module-examples" class="section-heading"><a href="#module-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="c1"># Minimal - just implement valid?/3</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyApp.Validators.UniqueEmail</span><span class="w"> </span><span class="k" data-group-id="1338713512-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Funx.Validator</span><span class="w">

  </span><span class="na">@impl</span><span class="w"> </span><span class="nc">Funx.Validator</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">valid?</span><span class="p" data-group-id="1338713512-2">(</span><span class="n">email</span><span class="p">,</span><span class="w"> </span><span class="c">_opts</span><span class="p">,</span><span class="w"> </span><span class="c">_env</span><span class="p" data-group-id="1338713512-2">)</span><span class="w"> </span><span class="k" data-group-id="1338713512-3">do</span><span class="w">
    </span><span class="ow">not</span><span class="w"> </span><span class="nc">MyApp.Repo</span><span class="o">.</span><span class="n">exists?</span><span class="p" data-group-id="1338713512-4">(</span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">email</span><span class="p">:</span><span class="w"> </span><span class="n">email</span><span class="p" data-group-id="1338713512-4">)</span><span class="w">
  </span><span class="k" data-group-id="1338713512-3">end</span><span class="w">
  </span><span class="c1"># Uses default &quot;is invalid&quot; message</span><span class="w">
</span><span class="k" data-group-id="1338713512-1">end</span><span class="w">

</span><span class="c1"># With custom message</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyApp.Validators.UniqueEmailWithMessage</span><span class="w"> </span><span class="k" data-group-id="1338713512-5">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Funx.Validator</span><span class="w">

  </span><span class="na">@impl</span><span class="w"> </span><span class="nc">Funx.Validator</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">valid?</span><span class="p" data-group-id="1338713512-6">(</span><span class="n">email</span><span class="p">,</span><span class="w"> </span><span class="c">_opts</span><span class="p">,</span><span class="w"> </span><span class="c">_env</span><span class="p" data-group-id="1338713512-6">)</span><span class="w"> </span><span class="k" data-group-id="1338713512-7">do</span><span class="w">
    </span><span class="ow">not</span><span class="w"> </span><span class="nc">MyApp.Repo</span><span class="o">.</span><span class="n">exists?</span><span class="p" data-group-id="1338713512-8">(</span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">email</span><span class="p">:</span><span class="w"> </span><span class="n">email</span><span class="p" data-group-id="1338713512-8">)</span><span class="w">
  </span><span class="k" data-group-id="1338713512-7">end</span><span class="w">

  </span><span class="na">@impl</span><span class="w"> </span><span class="nc">Funx.Validator</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">default_message</span><span class="p" data-group-id="1338713512-9">(</span><span class="c">_value</span><span class="p">,</span><span class="w"> </span><span class="c">_opts</span><span class="p" data-group-id="1338713512-9">)</span><span class="w"> </span><span class="k" data-group-id="1338713512-10">do</span><span class="w">
    </span><span class="s">&quot;email is already taken&quot;</span><span class="w">
  </span><span class="k" data-group-id="1338713512-10">end</span><span class="w">
</span><span class="k" data-group-id="1338713512-5">end</span><span class="w">

</span><span class="c1"># With custom type checking (if needed)</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyApp.Validators.CustomNumber</span><span class="w"> </span><span class="k" data-group-id="1338713512-11">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Funx.Validator</span><span class="w">

  </span><span class="na">@impl</span><span class="w"> </span><span class="nc">Funx.Validator</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">valid?</span><span class="p" data-group-id="1338713512-12">(</span><span class="n">num</span><span class="p">,</span><span class="w"> </span><span class="c">_opts</span><span class="p">,</span><span class="w"> </span><span class="c">_env</span><span class="p" data-group-id="1338713512-12">)</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_number</span><span class="p" data-group-id="1338713512-13">(</span><span class="n">num</span><span class="p" data-group-id="1338713512-13">)</span><span class="w"> </span><span class="k" data-group-id="1338713512-14">do</span><span class="w">
    </span><span class="n">custom_number_check</span><span class="p" data-group-id="1338713512-15">(</span><span class="n">num</span><span class="p" data-group-id="1338713512-15">)</span><span class="w">
  </span><span class="k" data-group-id="1338713512-14">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">valid?</span><span class="p" data-group-id="1338713512-16">(</span><span class="c">_non_number</span><span class="p">,</span><span class="w"> </span><span class="c">_opts</span><span class="p">,</span><span class="w"> </span><span class="c">_env</span><span class="p" data-group-id="1338713512-16">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">

  </span><span class="na">@impl</span><span class="w"> </span><span class="nc">Funx.Validator</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">default_message</span><span class="p" data-group-id="1338713512-17">(</span><span class="c">_value</span><span class="p" data-group-id="1338713512-17">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;must be a valid number&quot;</span><span class="w">
</span><span class="k" data-group-id="1338713512-11">end</span></code></pre><h2 id="module-generated-code" class="section-heading"><a href="#module-generated-code" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Generated Code</span></h2><p>The macro generates:</p><ul><li><code class="inline">@behaviour Funx.Validate.Behaviour</code> implementation</li><li>Convenience helpers <code class="inline">validate/1</code>, <code class="inline">validate/2</code> (delegate to <code class="inline">validate/3</code>)</li><li>Maybe handling at the validation boundary (see Maybe Semantics below)</li><li>Message handling via <a href="#build_message/3"><code class="inline">build_message/3</code></a> (supports <code class="inline">:message</code> option)</li><li>Either wrapping using <code class="inline">Either.lift_predicate</code></li></ul><h2 id="module-maybe-semantics" class="section-heading"><a href="#module-maybe-semantics" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Maybe Semantics</span></h2><p><strong>Critical design rule</strong>: <code class="inline">Nothing</code> always passes through unchanged.</p><ul><li><code class="inline">Nothing</code> → <code class="inline">Either.right(Nothing)</code> (validation skipped)</li><li><code class="inline">Just(value)</code> → unwraps to <code class="inline">value</code>, calls your <code class="inline">validate_value/3</code>, re-wraps result</li><li>Raw value → calls your <code class="inline">validate_value/3</code> directly</li></ul><p><strong>Why <code class="inline">Nothing</code> passes</strong>: In Funx's validation model, absence is handled by Prism
optics. <code class="inline">Nothing</code> represents &quot;value not present&quot; (e.g., optional field missing).
Only <a href="Funx.Validator.Required.html"><code class="inline">Funx.Validator.Required</code></a> fails on absence - all other validators assume presence.</p><p><strong>What you validate</strong>: Your <code class="inline">validate_value/3</code> callback receives the <strong>unwrapped value</strong>,
never <code class="inline">Nothing</code> or <code class="inline">Just</code>. The macro handles the Maybe boundary for you.</p><h2 id="module-message-customization" class="section-heading"><a href="#module-message-customization" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Message Customization</span></h2><p>All generated validators support the <code class="inline">:message</code> option to override the default error:</p><pre><code class="makeup elixir" translate="no"><span class="nc">MyValidator</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="0840372572-1">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="0840372572-2">fn</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;custom error for </span><span class="si" data-group-id="0840372572-3">#{</span><span class="n">v</span><span class="si" data-group-id="0840372572-3">}</span><span class="s">&quot;</span><span class="w"> </span><span class="k" data-group-id="0840372572-2">end</span><span class="p" data-group-id="0840372572-1">)</span></code></pre><p>The <code class="inline">:message</code> option accepts a <strong>function</strong> <code class="inline">(value -&gt; String.t())</code> that receives
the invalid value and returns an error message string. The macro wraps this in
<code class="inline">ValidationError.new/1</code> automatically.</p><p><strong>Note</strong>: Only function callbacks are supported (not raw strings), consistent with
all built-in Funx validators.</p><h2 id="module-custom-message-override" class="section-heading"><a href="#module-custom-message-override" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Custom Message Override</span></h2><p>Users of your validator can override the default message using the <code class="inline">:message</code> option:</p><pre><code class="makeup elixir" translate="no"><span class="nc">MyApp.Validators.UniqueEmail</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="4811700893-1">(</span><span class="w">
  </span><span class="s">&quot;test@example.com&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="4811700893-2">fn</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;</span><span class="si" data-group-id="4811700893-3">#{</span><span class="n">email</span><span class="si" data-group-id="4811700893-3">}</span><span class="s"> is already registered&quot;</span><span class="w"> </span><span class="k" data-group-id="4811700893-2">end</span><span class="w">
</span><span class="p" data-group-id="4811700893-1">)</span></code></pre><h2 id="module-built-in-validators" class="section-heading"><a href="#module-built-in-validators" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Built-in Validators</span></h2><p>Funx provides built-in validators for common scenarios:</p><h3 id="module-presence-and-structure" class="section-heading"><a href="#module-presence-and-structure" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Presence and Structure</span></h3><ul><li><a href="Funx.Validator.Required.html"><code class="inline">Funx.Validator.Required</code></a> – Validates presence (not <code class="inline">nil</code>, not empty, not <code class="inline">Nothing</code>)</li><li><a href="Funx.Validator.Confirmation.html"><code class="inline">Funx.Validator.Confirmation</code></a> – Validates that a value matches another field using <code class="inline">Eq</code></li></ul><h3 id="module-string-validators" class="section-heading"><a href="#module-string-validators" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">String Validators</span></h3><ul><li><a href="Funx.Validator.Email.html"><code class="inline">Funx.Validator.Email</code></a> – Validates basic email format</li><li><a href="Funx.Validator.MinLength.html"><code class="inline">Funx.Validator.MinLength</code></a> – Validates minimum string length</li><li><a href="Funx.Validator.MaxLength.html"><code class="inline">Funx.Validator.MaxLength</code></a> – Validates maximum string length</li><li><a href="Funx.Validator.Pattern.html"><code class="inline">Funx.Validator.Pattern</code></a> – Validates against a regular expression</li></ul><h3 id="module-numeric-validators" class="section-heading"><a href="#module-numeric-validators" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Numeric Validators</span></h3><ul><li><a href="Funx.Validator.Integer.html"><code class="inline">Funx.Validator.Integer</code></a> – Validates that the value is an integer</li><li><a href="Funx.Validator.Negative.html"><code class="inline">Funx.Validator.Negative</code></a> – Validates number &lt; 0</li><li><a href="Funx.Validator.Positive.html"><code class="inline">Funx.Validator.Positive</code></a> – Validates number &gt; 0</li><li><a href="Funx.Validator.Range.html"><code class="inline">Funx.Validator.Range</code></a> – Validates number within inclusive bounds</li></ul><h3 id="module-equality-eq-based" class="section-heading"><a href="#module-equality-eq-based" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Equality (Eq based)</span></h3><ul><li><a href="Funx.Validator.Equal.html"><code class="inline">Funx.Validator.Equal</code></a> – Validates that a value equals an expected value using <code class="inline">Eq</code></li><li><a href="Funx.Validator.NotEqual.html"><code class="inline">Funx.Validator.NotEqual</code></a> – Validates that a value does not equal an expected value using <code class="inline">Eq</code></li><li><a href="Funx.Validator.AllEqual.html"><code class="inline">Funx.Validator.AllEqual</code></a> – Validates that all elements in a collection are equal using <code class="inline">Eq</code></li></ul><h3 id="module-ordering-ord-based" class="section-heading"><a href="#module-ordering-ord-based" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ordering (Ord based)</span></h3><ul><li><a href="Funx.Validator.GreaterThan.html"><code class="inline">Funx.Validator.GreaterThan</code></a> – Validates value &gt; threshold</li><li><a href="Funx.Validator.GreaterThanOrEqual.html"><code class="inline">Funx.Validator.GreaterThanOrEqual</code></a> – Validates value ≥ threshold</li><li><a href="Funx.Validator.LessThan.html"><code class="inline">Funx.Validator.LessThan</code></a> – Validates value &lt; threshold</li><li><a href="Funx.Validator.LessThanOrEqual.html"><code class="inline">Funx.Validator.LessThanOrEqual</code></a> – Validates value ≤ threshold</li></ul><h3 id="module-membership-eq-based" class="section-heading"><a href="#module-membership-eq-based" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Membership (Eq based)</span></h3><ul><li><a href="Funx.Validator.In.html"><code class="inline">Funx.Validator.In</code></a> – Validates membership in a set of allowed values using <code class="inline">Eq</code></li><li><a href="Funx.Validator.NotIn.html"><code class="inline">Funx.Validator.NotIn</code></a> – Validates non-membership in a set of disallowed values using <code class="inline">Eq</code></li></ul><h3 id="module-combinators" class="section-heading"><a href="#module-combinators" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Combinators</span></h3><ul><li><a href="Funx.Validator.Any.html"><code class="inline">Funx.Validator.Any</code></a> – Validates that at least one of several validators succeeds (OR logic)</li><li><a href="Funx.Validator.Not.html"><code class="inline">Funx.Validator.Not</code></a> – Negates the result of another validator</li></ul><h3 id="module-predicate-lifting" class="section-heading"><a href="#module-predicate-lifting" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Predicate Lifting</span></h3><ul><li><a href="Funx.Validator.LiftPredicate.html"><code class="inline">Funx.Validator.LiftPredicate</code></a> – Lifts a predicate function into a validator</li></ul><h2 id="module-validator-contract" class="section-heading"><a href="#module-validator-contract" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Validator Contract</span></h2><p>When implementing a validator with this macro, you must follow this contract:</p><h3 id="module-input-handling" class="section-heading"><a href="#module-input-handling" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Input Handling</span></h3><ul><li>Your <code class="inline">valid?/3</code> receives the <strong>unwrapped value</strong> (never <code class="inline">Nothing</code> or <code class="inline">Just</code>)</li><li><code class="inline">Nothing</code> is handled by the macro (always passes through)</li><li>You only validate <strong>present values</strong></li><li>You can pattern match on type, structure, etc. in <code class="inline">valid?/3</code> clauses</li></ul><h3 id="module-return-values" class="section-heading"><a href="#module-return-values" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Return Values</span></h3><ul><li>Return <code class="inline">true</code> if validation passes</li><li>Return <code class="inline">false</code> if validation fails (triggers <code class="inline">default_message/1</code>)</li><li>The macro wraps your boolean in <code class="inline">Either</code> and <code class="inline">ValidationError</code> automatically</li></ul><h3 id="module-options-and-environment" class="section-heading"><a href="#module-options-and-environment" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options and Environment</span></h3><ul><li><code class="inline">opts</code> - Configuration for your validator (e.g., <code class="inline">[threshold: 100]</code>)</li><li><code class="inline">env</code> - Runtime context (database, session, etc.) - currently unused by convention</li><li>If you need <code class="inline">opts</code> or <code class="inline">env</code>, pattern match them; otherwise use <code class="inline">_opts</code>, <code class="inline">_env</code></li></ul><h3 id="module-error-messages" class="section-heading"><a href="#module-error-messages" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Error Messages</span></h3><ul><li>Implement <code class="inline">default_message/1</code> to return a plain string</li><li>You can pattern match on value to customize the message</li><li>Users can override with <code class="inline">:message</code> option (function callback)</li></ul>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:t/0" data-no-tooltip="" translate="no">t()</a>

      </div>

    </div>

</div>
<div class="summary-callbacks summary">
  <h2>
    <a href="#callbacks">Callbacks</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:default_message/2" data-no-tooltip="" translate="no">default_message(value, opts)</a>

      </div>

        <div class="summary-synopsis"><p>Callback for default error message.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:valid?/3" data-no-tooltip="" translate="no">valid?(value, opts, env)</a>

      </div>

        <div class="summary-synopsis"><p>Callback for custom validation predicate.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#build_message/3" data-no-tooltip="" translate="no">build_message(opts, value, default)</a>

      </div>

        <div class="summary-synopsis"><p>Helper function to build error messages with :message option support.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#validation_error/3" data-no-tooltip="" translate="no">validation_error(opts, value, default)</a>

      </div>

        <div class="summary-synopsis"><p>Helper function to build a ValidationError with message option support.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>

    <div class="types-list">
<section class="detail" id="t:t/0">

  <div class="detail-header">
    <a href="#t:t/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">t()</h1>


        <a href="https://github.com/JKWA/funx/blob/v0.8.3/lib/validator.ex#L225" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> t() :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>()</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="callbacks" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks</span>
    </h1>

    <div class="callbacks-list">
<section class="detail" id="c:default_message/2">

  <div class="detail-header">
    <a href="#c:default_message/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">default_message(value, opts)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/JKWA/funx/blob/v0.8.3/lib/validator.ex#L259" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> default_message(value :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>(), opts :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">keyword</a>()) :: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()</pre>

      </div>

<p>Callback for default error message.</p><p>Returns a plain string that will be wrapped in <code class="inline">ValidationError.new/1</code>.</p><p><strong>This callback is optional.</strong> If not implemented, a generic &quot;is invalid&quot; message is used.</p><h2 id="c:default_message/2-arguments" class="section-heading"><a href="#c:default_message/2-arguments" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Arguments</span></h2><ul><li><code class="inline">value</code> - The value that failed validation</li><li><code class="inline">opts</code> - Keyword list of options (for accessing configuration in error messages)</li></ul><h2 id="c:default_message/2-returns" class="section-heading"><a href="#c:default_message/2-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><p>A plain string error message (will be wrapped in <code class="inline">ValidationError.new/1</code>)</p><h2 id="c:default_message/2-example" class="section-heading"><a href="#c:default_message/2-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="na">@impl</span><span class="w"> </span><span class="nc">Funx.Validator</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">default_message</span><span class="p" data-group-id="6929685197-1">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p" data-group-id="6929685197-1">)</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_binary</span><span class="p" data-group-id="6929685197-2">(</span><span class="n">value</span><span class="p" data-group-id="6929685197-2">)</span><span class="w"> </span><span class="k" data-group-id="6929685197-3">do</span><span class="w">
  </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Keyword</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="6929685197-4">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:min</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="6929685197-4">)</span><span class="w">
  </span><span class="s">&quot;must be at least </span><span class="si" data-group-id="6929685197-5">#{</span><span class="n">min</span><span class="si" data-group-id="6929685197-5">}</span><span class="s"> characters&quot;</span><span class="w">
</span><span class="k" data-group-id="6929685197-3">end</span><span class="w">

</span><span class="kd">def</span><span class="w"> </span><span class="nf">default_message</span><span class="p" data-group-id="6929685197-6">(</span><span class="c">_value</span><span class="p">,</span><span class="w"> </span><span class="c">_opts</span><span class="p" data-group-id="6929685197-6">)</span><span class="w"> </span><span class="k" data-group-id="6929685197-7">do</span><span class="w">
  </span><span class="s">&quot;must be a string&quot;</span><span class="w">
</span><span class="k" data-group-id="6929685197-7">end</span></code></pre>
  </section>
</section>
<section class="detail" id="c:valid?/3">

  <div class="detail-header">
    <a href="#c:valid?/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">valid?(value, opts, env)</h1>


        <a href="https://github.com/JKWA/funx/blob/v0.8.3/lib/validator.ex#L229" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> valid?(value :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>(), opts :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">keyword</a>(), env :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Callback for custom validation predicate.</p><p>Your implementation receives the <strong>unwrapped value</strong> (never <code class="inline">Nothing</code> or <code class="inline">Just</code>).</p><h2 id="c:valid?/3-arguments" class="section-heading"><a href="#c:valid?/3-arguments" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Arguments</span></h2><ul><li><code class="inline">value</code> - The value to validate (unwrapped from Just if applicable)</li><li><code class="inline">opts</code> - Keyword list of options passed to the validator</li><li><code class="inline">env</code> - Environment map (runtime context like database connections, session data)</li></ul><h2 id="c:valid?/3-returns" class="section-heading"><a href="#c:valid?/3-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><ul><li><code class="inline">true</code> - Validation passed</li><li><code class="inline">false</code> - Validation failed (will use default_message/1)</li></ul><h2 id="c:valid?/3-example" class="section-heading"><a href="#c:valid?/3-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="na">@impl</span><span class="w"> </span><span class="nc">Funx.Validator</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">valid?</span><span class="p" data-group-id="2861757612-1">(</span><span class="n">num</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="c">_env</span><span class="p" data-group-id="2861757612-1">)</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_number</span><span class="p" data-group-id="2861757612-2">(</span><span class="n">num</span><span class="p" data-group-id="2861757612-2">)</span><span class="w"> </span><span class="k" data-group-id="2861757612-3">do</span><span class="w">
  </span><span class="n">threshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Keyword</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="2861757612-4">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:min</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="2861757612-4">)</span><span class="w">
  </span><span class="n">num</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">threshold</span><span class="w">
</span><span class="k" data-group-id="2861757612-3">end</span><span class="w">

</span><span class="kd">def</span><span class="w"> </span><span class="nf">valid?</span><span class="p" data-group-id="2861757612-5">(</span><span class="c">_non_number</span><span class="p">,</span><span class="w"> </span><span class="c">_opts</span><span class="p">,</span><span class="w"> </span><span class="c">_env</span><span class="p" data-group-id="2861757612-5">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="no">false</span></code></pre>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>

    <div class="functions-list">
<section class="detail" id="build_message/3">

  <div class="detail-header">
    <a href="#build_message/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">build_message(opts, value, default)</h1>


        <a href="https://github.com/JKWA/funx/blob/v0.8.3/lib/validator.ex#L290" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Helper function to build error messages with :message option support.</p><p>This can be used by validators that don't use the macro but want consistent
message handling.</p><h2 id="build_message/3-arguments" class="section-heading"><a href="#build_message/3-arguments" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Arguments</span></h2><ul><li><code class="inline">opts</code> - Keyword list that may contain a <code class="inline">:message</code> callback</li><li><code class="inline">value</code> - The value that failed validation</li><li><code class="inline">default</code> - The default message to use if no <code class="inline">:message</code> option provided</li></ul><h2 id="build_message/3-returns" class="section-heading"><a href="#build_message/3-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><p>A string message - either from the <code class="inline">:message</code> callback or the default</p><h2 id="build_message/3-example" class="section-heading"><a href="#build_message/3-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="kd">defp</span><span class="w"> </span><span class="nf">validate_something</span><span class="p" data-group-id="2063053547-1">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p" data-group-id="2063053547-1">)</span><span class="w"> </span><span class="k" data-group-id="2063053547-2">do</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="n">valid?</span><span class="p" data-group-id="2063053547-3">(</span><span class="n">value</span><span class="p" data-group-id="2063053547-3">)</span><span class="w"> </span><span class="k" data-group-id="2063053547-4">do</span><span class="w">
    </span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="p" data-group-id="2063053547-5">(</span><span class="n">value</span><span class="p" data-group-id="2063053547-5">)</span><span class="w">
  </span><span class="k" data-group-id="2063053547-4">else</span><span class="w">
    </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Validator</span><span class="o">.</span><span class="n">build_message</span><span class="p" data-group-id="2063053547-6">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;default error&quot;</span><span class="p" data-group-id="2063053547-6">)</span><span class="w">
    </span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="2063053547-7">(</span><span class="nc">ValidationError</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="2063053547-8">(</span><span class="n">message</span><span class="p" data-group-id="2063053547-8">)</span><span class="p" data-group-id="2063053547-7">)</span><span class="w">
  </span><span class="k" data-group-id="2063053547-4">end</span><span class="w">
</span><span class="k" data-group-id="2063053547-2">end</span></code></pre>
  </section>
</section>
<section class="detail" id="validation_error/3">

  <div class="detail-header">
    <a href="#validation_error/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">validation_error(opts, value, default)</h1>


        <a href="https://github.com/JKWA/funx/blob/v0.8.3/lib/validator.ex#L324" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Helper function to build a ValidationError with message option support.</p><p>Combines <a href="#build_message/3"><code class="inline">build_message/3</code></a> and <code class="inline">ValidationError.new/1</code> into a single call.
This is the most common pattern for validators.</p><h2 id="validation_error/3-arguments" class="section-heading"><a href="#validation_error/3-arguments" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Arguments</span></h2><ul><li><code class="inline">opts</code> - Keyword list that may contain a <code class="inline">:message</code> callback</li><li><code class="inline">value</code> - The value that failed validation</li><li><code class="inline">default</code> - The default message to use if no <code class="inline">:message</code> option provided</li></ul><h2 id="validation_error/3-returns" class="section-heading"><a href="#validation_error/3-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><p>A <code class="inline">ValidationError</code> struct</p><h2 id="validation_error/3-example" class="section-heading"><a href="#validation_error/3-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="kd">defp</span><span class="w"> </span><span class="nf">validate_something</span><span class="p" data-group-id="9081882636-1">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p" data-group-id="9081882636-1">)</span><span class="w"> </span><span class="k" data-group-id="9081882636-2">do</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="n">valid?</span><span class="p" data-group-id="9081882636-3">(</span><span class="n">value</span><span class="p" data-group-id="9081882636-3">)</span><span class="w"> </span><span class="k" data-group-id="9081882636-4">do</span><span class="w">
    </span><span class="nc">Either</span><span class="o">.</span><span class="n">right</span><span class="p" data-group-id="9081882636-5">(</span><span class="n">value</span><span class="p" data-group-id="9081882636-5">)</span><span class="w">
  </span><span class="k" data-group-id="9081882636-4">else</span><span class="w">
    </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Funx.Validator</span><span class="o">.</span><span class="n">validation_error</span><span class="p" data-group-id="9081882636-6">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;default error&quot;</span><span class="p" data-group-id="9081882636-6">)</span><span class="w">
    </span><span class="nc">Either</span><span class="o">.</span><span class="n">left</span><span class="p" data-group-id="9081882636-7">(</span><span class="n">error</span><span class="p" data-group-id="9081882636-7">)</span><span class="w">
  </span><span class="k" data-group-id="9081882636-4">end</span><span class="w">
</span><span class="k" data-group-id="9081882636-2">end</span></code></pre>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">

        <p>

            <span class="line">
              <a href="https://hex.pm/packages/funx/0.8.3" class="footer-hex-package">Hex Package</a>

              <a href="https://preview.hex.pm/preview/funx/0.8.3">Hex Preview</a>

            </span>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Go to package docs">
              Go to package docs
            </button>

              <a href="funx.epub" title="ePub version">
                Download ePub version
              </a>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.39.3) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>


    </footer>
  </div>
</main>
</div>

  </body>
</html>
